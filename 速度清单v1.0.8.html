<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÈÄüÂ∫¶Ê∏ÖÂçï - ÊûÅÈÄü‰ªªÂä°ÁÆ°ÁêÜ</title>
    <!-- Â§ñÈÉ®ËµÑÊ∫ê -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    
    <!-- Tailwind ÈÖçÁΩÆ -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#007AFF',
                        secondary: '#6B7280',
                        success: '#34C759',
                        warning: '#FF9500',
                        danger: '#FF3B30',
                        light: '#F5F7FA',
                        dark: '#1C1C1E',
                        'glass': 'rgba(255, 255, 255, 0.7)',
                      'glass-dark': 'rgba(30, 30, 30, 0.7)'
                  },
                    fontFamily: {
                        sans: ['-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Helvetica Neue', 'Arial', 'sans-serif'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.3s ease-out',
                        'slide-up': 'slideUp 0.3s ease-out',
                        'bounce-light': 'bounceLight 0.5s ease-in-out',
                        'pulse-soft': 'pulseSoft 2s infinite'
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(10px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                        bounceLight: {
                            '0%, 100%': { transform: 'scale(1)' },
                            '50%': { transform: 'scale(1.05)' },
                        },
                        pulseSoft: {
                            '0%, 100%': { opacity: '1' },
                            '50%': { opacity: '0.7' },
                        }
                    }
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        :root {
            --primary-color: #007AFF;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --glass-blur: blur(20px);
            --glass-opacity: 0.8;
        }
        
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            
            /* Á°Æ‰øùbg-primaryÁ±ªÊ≠£Á°ÆÂ∫îÁî® */
            .bg-primary {
                background-color: #007AFF !important;
            }
            
            /* Áªü‰∏ÄÁöÑÁéªÁíÉÊÄÅÊïàÊûú */
        .glass-effect, .glass-card {
            background: rgba(255, 255, 255, var(--glass-opacity));
            backdrop-filter: var(--glass-blur);
            -webkit-backdrop-filter: var(--glass-blur);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.06);
        }
        
        .glass-effect-dark, .glass-morphism-dark {
            background: rgba(30, 30, 30, var(--glass-opacity));
            backdrop-filter: var(--glass-blur);
            -webkit-backdrop-filter: var(--glass-blur);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            position: relative;
            z-index: 1;
        }
        
        .language-btn {
            position: relative;
            z-index: 2;
            border-color: #3b82f6;
            background-color: #eff6ff;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.04);
            border-radius: 1rem;
        }
        
        .glass-morphism {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.18);
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.15);
        }
            .glass-hover {
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                position: relative;
            }
            .glass-hover:hover {
                background: rgba(255, 255, 255, 0.95);
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
                transform: translateY(-2px);
            }
            .glass-hover:active {
                transform: translateY(-1px);
                transition: all 0.1s ease-in-out;
            }
            .text-shadow {
                text-shadow: 0 1px 2px rgba(0,0,0,0.1);
            }
            .transition-all-300 {
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            }
            .transition-smooth {
                transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            }
            .transition-bounce {
                transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            }
            .scrollbar-hide::-webkit-scrollbar {
                display: none;
            }
            .scrollbar-hide {
                -ms-overflow-style: none;
                scrollbar-width: none;
            }
            .conflict-indicator {
                position: absolute;
                top: -0.25rem;
                right: -0.25rem;
                width: 1.25rem;
                height: 1.25rem;
                background-color: #FF3B30;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                font-size: 0.75rem;
                animation: pulseGlow 2s infinite;
            }
            /* Áªü‰∏ÄÁöÑÂç°ÁâáÂíåÊåâÈíÆÊïàÊûú */
            .card, .btn, .icon-btn {
                transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
                position: relative;
                overflow: hidden;
            }
            
            .card {
                background-color: white;
                border-radius: 1rem;
                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                backdrop-filter: blur(8px);
                -webkit-backdrop-filter: blur(8px);
            }
            
            .card:hover {
                box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            }
            
            .btn {
                border-radius: 9999px;
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                transform: translateZ(0);
            }
            
            .icon-btn {
                width: 2.5rem;
                height: 2.5rem;
                border-radius: 9999px;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            /* Âø´Êç∑‰ºòÂÖàÁ∫ßÊåâÈíÆÊ†∑Âºè */
            .priority-quick-btn {
                width: 1.5rem;
                height: 1.5rem;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 0.75rem;
                background: rgba(255, 255, 255, 0.9);
                border: 1px solid rgba(0, 0, 0, 0.1);
                backdrop-filter: blur(4px);
                transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            }
            
            .priority-quick-btn:hover {
                transform: scale(1.15);
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
                background: rgba(255, 255, 255, 1);
            }
            
            .priority-quick-btn:active {
                transform: scale(0.95);
                transition: all 0.1s ease-in-out;
            }
            
            .priority-quick-btn.active {
                background: rgba(59, 130, 246, 0.1);
                border-color: rgba(59, 130, 246, 0.3);
                box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
            }
            .btn:hover, .icon-btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
            }
            .btn:active, .icon-btn:active {
                transform: translateY(0);
                transition: all 0.1s ease-in-out;
            }
            .fade-in-up {
                animation: fadeInUp 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            }
            .slide-in-right {
                animation: slideInRight 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            }
            .scale-in {
                animation: scaleIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            }
            .float-animation {
                animation: float 3s ease-in-out infinite;
                position: relative;
                z-index: 1;
            }
            .shimmer {
                background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
                background-size: 200% 100%;
                animation: shimmer 2s infinite;
            }
            /* ‰ªªÂä°ÂÆåÊàêÂä®ÁîªÊ†∑Âºè */
            .animate-scale-in {
                animation: scaleIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            }
            .animate-checkmark {
                animation: checkmarkDraw 0.8s ease-in-out;
            }
            .animate-fade-in-up {
                animation: fadeInUp 0.5s ease-out 0.3s both;
            }
            .animate-fade-out {
                animation: fadeOut 0.3s ease-out;
            }
            @keyframes checkmarkDraw {
                0% {
                    stroke-dasharray: 0 100;
                    opacity: 0;
                    transform: scale(0.3) rotate(-45deg);
                }
                30% {
                    opacity: 0.8;
                    transform: scale(1.3) rotate(-15deg);
                }
                60% {
                    opacity: 1;
                    transform: scale(0.9) rotate(5deg);
                }
                80% {
                    transform: scale(1.05) rotate(-2deg);
                }
                100% {
                    stroke-dasharray: 100 100;
                    opacity: 1;
                    transform: scale(1) rotate(0deg);
                }
            }
            @keyframes fadeOut {
                0% {
                    opacity: 1;
                    transform: scale(1);
                }
                100% {
                    opacity: 0;
                    transform: scale(0.8);
                }
            }
        }
        
        @keyframes fadeInUp {
            0% {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            50% {
                opacity: 0.8;
                transform: translateY(-5px) scale(1.02);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        @keyframes slideInRight {
            0% {
                opacity: 0;
                transform: translateX(50px) scale(0.9);
            }
            60% {
                opacity: 0.9;
                transform: translateX(-10px) scale(1.05);
            }
            100% {
                opacity: 1;
                transform: translateX(0) scale(1);
            }
        }
        
        @keyframes scaleIn {
            0% {
                opacity: 0;
                transform: scale(0.3) rotate(-5deg);
            }
            50% {
                opacity: 0.8;
                transform: scale(1.1) rotate(2deg);
            }
            100% {
                opacity: 1;
                transform: scale(1) rotate(0deg);
            }
        }
        
        @keyframes float {
            0%, 100% {
                transform: translateY(0px) rotate(0deg);
            }
            25% {
                transform: translateY(-8px) rotate(1deg);
            }
            50% {
                transform: translateY(-15px) rotate(0deg);
            }
            75% {
                transform: translateY(-8px) rotate(-1deg);
            }
        }
        
        @keyframes shimmer {
            0% {
                background-position: -200% 0;
            }
            100% {
                background-position: 200% 0;
            }
        }
        
        @keyframes pulseGlow {
            0%, 100% {
                box-shadow: 0 0 0 0 rgba(255, 59, 48, 0.7);
                transform: scale(1);
            }
            50% {
                box-shadow: 0 0 0 8px rgba(255, 59, 48, 0);
                transform: scale(1.05);
            }
        }
        
        /* Áªü‰∏ÄÁöÑÂºπË∑≥Âä®ÁîªÊïàÊûú */
        @keyframes bounceIn {
            0% {
                opacity: 0;
                transform: scale(0.3) translateY(50px);
            }
            20% {
                opacity: 0.9;
                transform: scale(1.1) translateY(-20px);
            }
            40% {
                opacity: 1;
                transform: scale(0.9) translateY(10px);
            }
            60% {
                transform: scale(1.05) translateY(-5px);
            }
            80% {
                transform: scale(0.98) translateY(2px);
            }
            100% {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }
        
        /* ÁÆÄÂåñÁöÑQÂºπÊïàÊûú - ÁßªÈô§Ê®™ÂêëÁßªÂä®ÈÅøÂÖçÊäñÂä® */
        @keyframes jellyBounce {
            0%, 100% {
                transform: scale(1);
            }
            25% {
                transform: scale(0.95);
            }
            50% {
                transform: scale(1.05);
            }
            75% {
                transform: scale(0.98);
            }
        }
        
        /* ÂºπÊÄßËÑâÂÜ≤ÊïàÊûú */
        @keyframes elasticPulse {
            0%, 100% {
                transform: scale(1);
            }
            30% {
                transform: scale(1.25);
            }
            40% {
                transform: scale(0.75);
            }
            50% {
                transform: scale(1.15);
            }
            65% {
                transform: scale(0.95);
            }
            75% {
                transform: scale(1.05);
            }
            85% {
                transform: scale(0.98);
            }
            92% {
                transform: scale(1.02);
            }
            96% {
                transform: scale(0.99);
            }
            98% {
                transform: scale(1.01);
            }
        }
        
        @keyframes wobble {
            0%, 100% {
                transform: translateX(0) rotate(0deg);
            }
            15% {
                transform: translateX(-25%) rotate(-5deg);
            }
            30% {
                transform: translateX(20%) rotate(3deg);
            }
            45% {
                transform: translateX(-15%) rotate(-3deg);
            }
            60% {
                transform: translateX(10%) rotate(2deg);
            }
            75% {
                transform: translateX(-5%) rotate(-1deg);
            }
            90% {
                transform: translateX(2%) rotate(1deg);
            }
        }
        
        @keyframes shake {
            0%, 100% {
                transform: translateX(0);
            }
            10%, 30%, 50%, 70%, 90% {
                transform: translateX(-8px);
            }
            20%, 40%, 60%, 80% {
                transform: translateX(8px);
            }
        }
        
        @keyframes heartbeat {
            0%, 100% {
                transform: scale(1);
            }
            14% {
                transform: scale(1.3);
            }
            28% {
                transform: scale(1);
            }
            42% {
                transform: scale(1.3);
            }
            70% {
                transform: scale(1);
            }
        }
        
        /* Â∫îÁî®Êñ∞ÁöÑÂä®ÁîªÁ±ª */
        .bounce-in {
            animation: bounceIn 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        .jelly-bounce {
            animation: jellyBounce 0.3s ease-in-out;
        }
        
        .elastic-pulse {
            animation: elasticPulse 1s ease-in-out;
        }
        
        .wobble {
            animation: wobble 1s ease-in-out;
        }
        
        .shake {
            animation: shake 0.5s ease-in-out;
        }
        
        .heartbeat {
            animation: heartbeat 1.5s ease-in-out infinite;
        }
        
        /* ÁÅ´ÁÆ≠ÂõæÊ†áÂ±ÇÁ∫ßËÆæÁΩÆ - Á°Æ‰øù‰∏ç‰ºöË¶ÜÁõñÊñ∞ÊâãÊïôÁ®ã */
        #rocket-motivator {
            position: relative;
            z-index: 10;
        }
        
        /* Â¢ûÂº∫ÁöÑÁéªÁíÉÊÄÅÊïàÊûú */
        .glass-morphism {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.18);
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.15);
        }
        
        /* Áªü‰∏ÄÁöÑÊåâÈíÆÂíå‰∫§‰∫íÊïàÊûú */
        
        /* ÈöêËóèÂç≥Â∞ÜÂºÄÂßãÁöÑ‰ªªÂä°Ê®°Âùó */
        #next-task-container {
            display: none !important;
        }
        
        /* Âπ≥ÊªëÁöÑÊªöÂä®Êù°Ê†∑Âºè */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.05);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 4px;
            transition: background 0.3s ease;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 0, 0, 0.3);
        }
        
        /* ËÆæÁΩÆÈ°µÈù¢ÊÄßËÉΩ‰ºòÂåñ */
        .settings-performance-mode .glass-hover:hover {
            backdrop-filter: none;
            -webkit-backdrop-filter: none;
            transform: translateY(-1px);
        }
        
        .settings-performance-mode .micro-interaction:hover {
            transform: none;
        }
        
        .settings-performance-mode .fade-in-up {
            animation: none;
            opacity: 1;
            transform: none;
        }
        
        .settings-performance-mode .float-animation {
            animation: none;
        }
        
        .settings-performance-mode .shimmer {
            animation: none;
            background: none;
        }
        
        /* Â¢ûÂº∫ÁöÑÁÑ¶ÁÇπÁä∂ÊÄÅ */
        .focus-ring {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .focus-ring:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.3);
            border-color: var(--primary-color);
        }
        
        /* ÂæÆ‰∫§‰∫íÂä®Áîª */
        .micro-interaction {
            transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .micro-interaction:hover {
            transform: translateY(-1px);
        }
        
        /* ËæìÂÖ•Ê°ÜÁöÑQÂºπÊïàÊûú */
        input:focus, textarea:focus, select:focus {
            transform: scale(1.01);
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* ‰ªªÂä°Âç°ÁâáÁöÑQÂºπÊïàÊûú */
        .card {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
        }
        .card:active {
            transform: translateY(-1px);
            transition: all 0.1s ease-in-out;
        }
        @keyframes float-up {
            0% { 
                opacity: 1; 
                transform: translateY(0) rotate(0deg); 
            }
            100% { 
                opacity: 0; 
                transform: translateY(-100px) rotate(360deg); 
            }
        }
        
        @keyframes cat-wiggle {
            0%, 100% { transform: rotate(-5deg); }
            50% { transform: rotate(5deg); }
        }
        
        @keyframes cat-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        @keyframes sparkle {
            0%, 100% { opacity: 0; transform: scale(0); }
            50% { opacity: 1; transform: scale(1); }
        }
        
        .animate-float-up {
            animation: float-up 2s ease-out forwards;
        }
        
        .animate-cat-wiggle {
            animation: cat-wiggle 0.5s ease-in-out;
        }
        
        .animate-cat-pulse {
            animation: cat-pulse 1s ease-in-out infinite;
        }
        
        .animate-sparkle {
            animation: sparkle 1s ease-in-out;
        }
        
        .cat-happiness-bar {
            transition: width 0.5s ease-out;
        }
        
        .cat-message {
            animation: fadeInUp 0.3s ease-out;
        }
        
        .cat-suggestion {
            transition: all 0.3s ease;
        }
        
        .cat-suggestion:hover {
            transform: translateX(5px);
            background-color: rgba(147, 51, 234, 0.1);
        }
        
        .cat-interactive-btn {
            transition: all 0.2s ease;
        }
        
        /* Â∫ïÈÉ®Èù¢ÊùøÊ†∑Âºè */
        #bottom-panel-content {
            transform: translateY(100%);
            transition: transform 0.3s ease-out;
        }
        
        #bottom-panel-content.show {
            transform: translateY(0);
        }
        
        .bottom-content-body {
            max-height: 320px;
            overflow-y: auto;
        }
        
        .bottom-content-body::-webkit-scrollbar {
            width: 6px;
        }
        
        .bottom-content-body::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.05);
            border-radius: 3px;
        }
        
        .bottom-content-body::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 3px;
        }
        
        .bottom-content-body::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 0, 0, 0.3);
        }
        
        /* ÁîüÊàêÈù¢ÊùøÂä®Áîª‰ºòÂåñ */
        @keyframes pulse-ring {
            0% {
                transform: scale(0.8);
                opacity: 1;
            }
            100% {
                transform: scale(1.2);
                opacity: 0;
            }
        }
        
        .pulse-ring::before {
            content: '';
            position: absolute;
            inset: -4px;
            border: 2px solid currentColor;
            border-radius: 50%;
            animation: pulse-ring 1.5s ease-out infinite;
        }
        
        .cat-interactive-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(147, 51, 234, 0.3);
        }
        
        .cat-interactive-btn:active {
            transform: translateY(0);
        }
        
        .sparkle-effect {
            position: absolute;
            pointer-events: none;
            animation: sparkle 1s ease-out forwards;
        }
        
        .heart-particle {
            position: absolute;
            pointer-events: none;
            animation: float-up 2s ease-out forwards;
        }
        
        /* Áã¨Á´ãÁå´Âí™Âä©ÊâãÊ®°ÂùóÊ†∑Âºè */
        .cat-assistant-module {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        .cat-assistant-container {
            position: relative;
        }
        
        .cat-toggle-btn {
            position: relative;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 20px rgba(102, 126, 234, 0.4);
            transition: all 0.3s ease;
            overflow: hidden;
        }
        
        .cat-toggle-btn:before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .cat-toggle-btn:hover:before {
            width: 100px;
            height: 100px;
        }
        
        .cat-toggle-btn:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 8px 30px rgba(102, 126, 234, 0.6);
        }
        
        .cat-toggle-btn:active {
            transform: translateY(0) scale(0.98);
        }
        
        .cat-icon {
            font-size: 24px;
            animation: bounce 2s infinite;
        }
        
        .cat-status-dot {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #10b981;
            border: 2px solid white;
            animation: pulse 2s infinite;
        }
        
        .cat-assistant-panel {
            position: absolute;
            bottom: 80px;
            right: 0;
            width: 380px;
            max-height: 600px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 20px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(20px) scale(0.95);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            overflow-y: auto;
            overflow-x: hidden;
        }
        
        .cat-assistant-panel::-webkit-scrollbar {
            width: 6px;
        }
        
        .cat-assistant-panel::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.05);
            border-radius: 3px;
        }
        
        .cat-assistant-panel::-webkit-scrollbar-thumb {
            background: rgba(102, 126, 234, 0.3);
            border-radius: 3px;
            transition: background 0.3s ease;
        }
        
        .cat-assistant-panel::-webkit-scrollbar-thumb:hover {
            background: rgba(102, 126, 234, 0.5);
        }
        
        .cat-assistant-panel.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0) scale(1);
        }
        
        .cat-assistant-panel:hover {
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.15);
        }
        
        .cat-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .cat-avatar {
            position: relative;
            margin-right: 15px;
        }
        
        .cat-emoji {
            font-size: 40px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        
        .cat-emoji:hover {
            transform: scale(1.1);
        }
        
        .cat-mood-indicator {
            position: absolute;
            top: -5px;
            right: -5px;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #fbbf24;
            border: 2px solid white;
        }
        
        .cat-info {
            flex: 1;
        }
        
        .cat-language-switch {
            display: flex;
            gap: 4px;
            margin-top: 8px;
        }
        
        .cat-lang-btn {
            width: 28px;
            height: 28px;
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 6px;
            background: rgba(255, 255, 255, 0.8);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            transition: all 0.2s ease;
        }
        
        .cat-lang-btn:hover {
            background: rgba(59, 130, 246, 0.1);
            border-color: rgba(59, 130, 246, 0.3);
            transform: scale(1.1);
        }
        
        .cat-lang-btn.active {
            background: rgba(59, 130, 246, 0.2);
            border-color: rgba(59, 130, 246, 0.5);
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.2);
        }
        
        .cat-message-area {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .cat-message {
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 13px;
            text-align: center;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }
        
        .cat-message[style*="block"] {
            opacity: 1;
            transform: translateY(0);
        }
        
        .cat-message-success {
            background: rgba(16, 185, 129, 0.1);
            color: #059669;
            border: 1px solid rgba(16, 185, 129, 0.2);
        }
        
        .cat-message-info {
            background: rgba(59, 130, 246, 0.1);
            color: #2563eb;
            border: 1px solid rgba(59, 130, 246, 0.2);
        }
        
        .cat-message-warning {
            background: rgba(245, 158, 11, 0.1);
            color: #d97706;
            border: 1px solid rgba(245, 158, 11, 0.2);
        }
        
        .cat-name {
            font-size: 18px;
            font-weight: 600;
            color: #1f2937;
            margin: 0 0 5px 0;
        }
        
        .cat-mood-text {
            font-size: 14px;
            color: #6b7280;
            margin-bottom: 8px;
        }
        
        .cat-happiness-bar {
            width: 100%;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .cat-happiness-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981 0%, #34d399 100%);
            transition: width 0.5s ease;
        }
        
        .cat-analysis-section,
        .cat-encouragement-section,
        .cat-suggestions-section {
            margin-bottom: 20px;
            transition: all 0.3s ease;
            border-radius: 12px;
            padding: 5px;
        }
        
        .cat-analysis-section:hover,
        .cat-encouragement-section:hover,
        .cat-suggestions-section:hover {
            background: rgba(102, 126, 234, 0.02);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .section-title {
            font-size: 14px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        
        .analysis-content {
            display: flex;
            justify-content: space-between;
            background: #f9fafb;
            padding: 12px;
            border-radius: 10px;
            transition: all 0.3s ease;
        }
        
        .analysis-content:hover {
            background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
            transform: scale(1.02);
        }
        
        .analysis-item {
            text-align: center;
            flex: 1;
            transition: all 0.3s ease;
        }
        
        .analysis-item:hover .analysis-value {
            transform: scale(1.1);
            color: #667eea;
        }
        
        .analysis-label {
            display: block;
            font-size: 12px;
            color: #6b7280;
            margin-bottom: 4px;
        }
        
        .analysis-value {
            display: block;
            font-size: 16px;
            font-weight: 600;
            color: #1f2937;
        }
        
        .encouragement-content {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            padding: 15px;
            border-radius: 12px;
            border: 1px solid rgba(251, 191, 36, 0.2);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .encouragement-content:before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: rotate(45deg);
            transition: all 0.5s ease;
            opacity: 0;
        }
        
        .encouragement-content:hover:before {
            animation: shimmer 1.5s ease-in-out;
        }
        
        .encouragement-content:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(251, 191, 36, 0.3);
        }
        
        .encouragement-message {
            font-size: 14px;
            color: #92400e;
            line-height: 1.5;
            font-weight: 500;
            position: relative;
            z-index: 1;
        }
        
        .suggestions-content {
            background: #f0f9ff;
            padding: 15px;
            border-radius: 12px;
            border: 1px solid rgba(59, 130, 246, 0.2);
            transition: all 0.3s ease;
        }
        
        .suggestions-content:hover {
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.2);
        }
        
        .suggestion-item {
            font-size: 13px;
            color: #1e40af;
            line-height: 1.5;
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
            transition: all 0.3s ease;
            cursor: pointer;
            border-radius: 6px;
            padding: 8px 8px 8px 28px;
        }
        
        .suggestion-item:hover {
            background: rgba(59, 130, 246, 0.1);
            transform: translateX(5px);
            color: #1d4ed8;
        }
        
        .suggestion-item:last-child {
            margin-bottom: 0;
        }
        
        .suggestion-item:before {
            content: "üí°";
            position: absolute;
            left: 8px;
            top: 8px;
            transition: all 0.3s ease;
        }
        
        .suggestion-item:hover:before {
            transform: scale(1.2) rotate(15deg);
        }
        
        .cat-interaction-section {
            margin-bottom: 20px;
        }
        
        .interaction-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
        }
        
        .interaction-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 12px 16px;
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            min-width: 70px;
            overflow: hidden;
        }
        
        .interaction-btn:before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(167, 139, 250, 0.1) 100%);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.5s ease;
        }
        
        .interaction-btn:hover:before {
            width: 120px;
            height: 120px;
        }
        
        .interaction-btn:hover {
            border-color: #8b5cf6;
            background: #faf5ff;
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 10px 25px rgba(139, 92, 246, 0.3);
        }
        
        .interaction-btn:active {
            transform: translateY(-2px) scale(0.95);
            box-shadow: 0 5px 15px rgba(139, 92, 246, 0.4);
        }
        
        /* Â¢ûÂº∫ÁöÑÊë∏Êë∏ÂèçÈ¶àÊïàÊûú */
        .interaction-btn.petting {
            animation: pet-super-bounce 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        .interaction-btn.combo-2 {
            animation: combo-effect-2 0.8s ease-out;
        }
        
        .interaction-btn.combo-3 {
            animation: combo-effect-3 1s ease-out;
        }
        
        .interaction-btn.combo-5 {
            animation: combo-effect-5 1.2s ease-out;
        }
        
        .interaction-btn.combo-10 {
            animation: combo-effect-10 1.5s ease-out;
        }
        
        .btn-icon {
            font-size: 20px;
            margin-bottom: 4px;
            transition: all 0.3s ease;
            position: relative;
            z-index: 1;
        }
        
        .interaction-btn:hover .btn-icon {
            transform: scale(1.2) rotate(5deg);
        }
        
        .btn-text {
            font-size: 12px;
            color: #6b7280;
            font-weight: 500;
        }
        
        .interaction-count {
            position: absolute;
            top: 5px;
            right: 5px;
            background: #ef4444;
            color: white;
            font-size: 10px;
            padding: 2px 5px;
            border-radius: 10px;
            min-width: 18px;
            text-align: center;
        }
        
        .cat-message-area {
            margin-top: 15px;
        }
        
        .cat-message {
            background: linear-gradient(135deg, #e0e7ff 0%, #c7d2fe 100%);
            color: #3730a3;
            padding: 12px;
            border-radius: 10px;
            font-size: 13px;
            line-height: 1.4;
            text-align: center;
            border: 1px solid rgba(99, 102, 241, 0.2);
            animation: fadeInUp 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .cat-message:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }
        
        .cat-message:hover:before {
            left: 100%;
        }
        
        .cat-message:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(99, 102, 241, 0.3);
        }
        
        /* ÂìçÂ∫îÂºèËÆæËÆ° */
        @media (max-width: 480px) {
            .cat-assistant-module {
                bottom: 15px;
                right: 15px;
            }
            
            .cat-toggle-btn {
                width: 50px;
                height: 50px;
            }
            
            .cat-icon {
                font-size: 20px;
            }
            
            .cat-assistant-panel {
                width: calc(100vw - 40px);
                right: -10px;
                max-height: 500px;
            }
            
            .analysis-content {
                flex-direction: column;
                gap: 10px;
            }
            
            .interaction-buttons {
                flex-wrap: wrap;
            }
        }
        
        /* Âä®ÁîªÊïàÊûú */
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }
        
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(16, 185, 129, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(16, 185, 129, 0);
            }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes shimmer {
            0% {
                opacity: 0;
                transform: rotate(45deg) translateY(-100%);
            }
            50% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                transform: rotate(45deg) translateY(100%);
            }
        }
        
        @keyframes float {
            0%, 100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-10px);
            }
        }
        
        /* Â¢ûÂº∫ÁöÑÊë∏Êë∏Âä®ÁîªÊïàÊûú */
        @keyframes pet-super-bounce {
            0% { transform: scale(1); }
            25% { transform: scale(1.3); }
            50% { transform: scale(0.9); }
            75% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        @keyframes combo-effect-2 {
            0% { transform: scale(1); filter: brightness(1); }
            50% { transform: scale(1.4); filter: brightness(1.5) hue-rotate(20deg); }
            100% { transform: scale(1); filter: brightness(1); }
        }
        
        @keyframes combo-effect-3 {
            0% { transform: scale(1) rotate(0deg); filter: brightness(1); }
            33% { transform: scale(1.5) rotate(120deg); filter: brightness(1.8) hue-rotate(60deg); }
            66% { transform: scale(1.3) rotate(240deg); filter: brightness(1.5) hue-rotate(120deg); }
            100% { transform: scale(1) rotate(360deg); filter: brightness(1); }
        }
        
        @keyframes combo-effect-5 {
            0% { transform: scale(1); filter: brightness(1) saturate(1); }
            25% { transform: scale(1.6); filter: brightness(2) saturate(2) hue-rotate(90deg); }
            50% { transform: scale(1.4); filter: brightness(1.8) saturate(1.5) hue-rotate(180deg); }
            75% { transform: scale(1.2); filter: brightness(1.3) saturate(1.2) hue-rotate(270deg); }
            100% { transform: scale(1); filter: brightness(1) saturate(1); }
        }
        
        @keyframes combo-effect-10 {
            0% { 
                transform: scale(1) rotate(0deg); 
                filter: brightness(1) saturate(1);
                box-shadow: 0 0 0 rgba(139, 92, 246, 0);
            }
            20% { 
                transform: scale(1.8) rotate(72deg); 
                filter: brightness(2.5) saturate(3) hue-rotate(120deg);
                box-shadow: 0 0 30px rgba(139, 92, 246, 0.8);
            }
            40% { 
                transform: scale(1.6) rotate(144deg); 
                filter: brightness(2) saturate(2.5) hue-rotate(240deg);
                box-shadow: 0 0 20px rgba(167, 139, 250, 0.6);
            }
            60% { 
                transform: scale(1.4) rotate(216deg); 
                filter: brightness(1.8) saturate(2) hue-rotate(360deg);
                box-shadow: 0 0 15px rgba(196, 181, 253, 0.4);
            }
            80% { 
                transform: scale(1.2) rotate(288deg); 
                filter: brightness(1.3) saturate(1.5);
                box-shadow: 0 0 10px rgba(221, 214, 254, 0.2);
            }
            100% { 
                transform: scale(1) rotate(360deg); 
                filter: brightness(1) saturate(1);
                box-shadow: 0 0 0 rgba(139, 92, 246, 0);
            }
        }
        
        /* Á≤íÂ≠êÊïàÊûúÂÆπÂô® */
        .particle-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            border-radius: 12px;
        }
        
        .pet-particle {
            position: absolute;
            pointer-events: none;
            animation: particle-float 1.5s ease-out forwards;
        }
        
        @keyframes particle-float {
            0% {
                transform: translate(0, 0) scale(0);
                opacity: 1;
            }
            50% {
                transform: translate(var(--tx), var(--ty)) scale(1);
                opacity: 1;
            }
            100% {
                transform: translate(var(--tx2), var(--ty2)) scale(0.3);
                opacity: 0;
            }
        }
        
        /* ËøûÂáªÊòæÁ§∫ÊïàÊûú */
        .combo-display {
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 14px;
            font-weight: bold;
            color: #8b5cf6;
            text-shadow: 0 0 10px rgba(139, 92, 246, 0.8);
            animation: combo-popup 1s ease-out forwards;
            pointer-events: none;
            z-index: 1000;
        }
        
        @keyframes combo-popup {
            0% {
                transform: translateX(-50%) translateY(0) scale(0);
                opacity: 0;
            }
            50% {
                transform: translateX(-50%) translateY(-20px) scale(1.5);
                opacity: 1;
            }
            100% {
                transform: translateX(-50%) translateY(-30px) scale(1);
                opacity: 0;
            }
        }
        
        @keyframes glow {
            0%, 100% {
                box-shadow: 0 0 5px rgba(102, 126, 234, 0.5);
            }
            50% {
                box-shadow: 0 0 20px rgba(102, 126, 234, 0.8), 0 0 30px rgba(102, 126, 234, 0.6);
            }
        }
        
        /* Êñ∞Â¢ûÁöÑÂæÆ‰∫§‰∫íÊïàÊûú */
        .cat-emoji {
            animation: float 3s ease-in-out infinite;
        }
        
        .cat-emoji:hover {
            animation-play-state: paused;
            transform: scale(1.2) rotate(10deg);
        }
        
        .cat-status-dot {
            animation: pulse 2s infinite, glow 2s ease-in-out infinite alternate;
        }
        
        .analysis-value {
            animation: fadeInUp 0.6s ease-out;
        }
        
        .encouragement-message {
            animation: fadeInUp 0.8s ease-out;
        }
        
        .suggestion-item {
            animation: fadeInUp 0.5s ease-out backwards;
        }
        
        .suggestion-item:nth-child(1) { animation-delay: 0.1s; }
        .suggestion-item:nth-child(2) { animation-delay: 0.2s; }
        .suggestion-item:nth-child(3) { animation-delay: 0.3s; }
        
        /* Âàõ‰ΩúËÄÖ‰ø°ÊÅØÊ†∑Âºè */
        .creator-signature {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            padding: 6px 12px;
            border-radius: 20px;
            border: 1px solid rgba(0, 0, 0, 0.05);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
        }
        
        .creator-signature:hover {
            background: rgba(255, 255, 255, 0.95);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
        }
        
        .creator-signature span {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen font-sans text-gray-800">
    <!-- ‰∏ªÂÆπÂô® -->
    <div class="min-h-screen">
        <!-- ‰∏ªÂÜÖÂÆπÂå∫ -->
        <main class="flex flex-col">
            <!-- È°∂ÈÉ®ÂØºËà™Ê†è -->
            <header class="glass-effect border-b border-gray-200 py-3 px-4 md:px-6 z-30">
                <div class="flex items-center justify-between">
                    <div class="flex-1">
                        <div class="flex flex-wrap items-center">
                            <div class="w-8 h-8 rounded-full bg-primary flex items-center justify-center mr-3">
                                <i class="fa fa-rocket text-white text-sm"></i>
                            </div>
                            <div class="flex-1 min-w-0">
                                <h1 class="text-lg md:text-lg font-bold text-primary mr-2 whitespace-nowrap" data-i18n="appTitle">ÈÄüÂ∫¶Ê∏ÖÂçï</h1>
                                <h2 id="welcome-message" class="text-base md:text-xl font-semibold mt-1 md:mt-0 md:inline-block"></h2>
                            </div>
                            <span id="motivation-short" class="ml-2 md:ml-3 text-xs md:text-sm text-gray-500 hidden md:inline-block"></span>
                        </div>
                    </div>
                    
                    <div class="flex items-center space-x-2">
                        <button id="tutorial-btn" class="icon-btn" title="Êñ∞ÊâãÊïôÁ®ã" data-i18n-title="nav.tutorial">
                            <i class="fa fa-graduation-cap text-gray-600"></i>
                        </button>
                        <button id="stats-btn" class="icon-btn relative" data-i18n-title="nav.stats">
                        <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                        </svg>
                    </button>
                    <button id="suggestions-btn" class="icon-btn hidden" data-i18n-title="nav.suggestions">
                            <i class="fa fa-lightbulb-o text-gray-600"></i>
                        </button>
                    <button id="settings-btn" class="icon-btn" data-i18n-title="nav.settings">
                            <i class="fa fa-cog text-gray-600"></i>
                        </button>
                        <div class="relative">
                            <button id="user-menu-btn" class="icon-btn">
                                <div class="w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center">
                                    <span id="user-initial" class="font-medium">U</span>
                                </div>
                            </button>
                            <!-- Áî®Êà∑ËèúÂçï‰∏ãÊãâÊ°Ü -->
                            <div id="user-dropdown" class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-50 hidden">
                                <div class="p-3 border-b">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-10 h-10 rounded-full bg-primary text-white flex items-center justify-center">
                                            <span id="dropdown-user-initial" class="font-medium">U</span>
                                        </div>
                                        <div>
                                            <p id="display-username" class="font-medium text-gray-800" data-i18n="nav.user">Áî®Êà∑</p>
                                            <p class="text-xs text-gray-500" data-i18n="nav.editProfile">ÁÇπÂáªÁºñËæëÂßìÂêç</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="p-2">
                                    <button id="edit-username-btn" class="w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md flex items-center">
                                        <i class="fa fa-edit mr-2"></i><span data-i18n="nav.editName">ÁºñËæëÂßìÂêç</span>
                                    </button>
                                    <button id="logout-btn" class="w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md flex items-center">
                                        <i class="fa fa-sign-out mr-2"></i><span data-i18n="nav.logout">ÈÄÄÂá∫</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <p class="text-gray-500 text-sm mt-1" id="current-date"></p>
            </header>

            <!-- ÂÜÖÂÆπÂå∫Âüü -->
            <div class="flex-1 p-4 md:p-6">
                <!-- ÂæÖÂäûÊ∏ÖÂçïÂ∞èÂàó - ÈöêËóèÔºåÈÅøÂÖç‰∏éÈ¶ñÈ°µÈáçÂ§ç -->
                <div class="glass-card p-4 mb-6 fade-in-up glass-hover hidden">
                    <div class="mb-4">
                        <h3 class="text-base font-semibold text-gray-800 flex items-center">
                            <i class="fa fa-tasks text-primary mr-2"></i><span data-i18n="quickTodo.title">Âø´ÈÄüÂæÖÂäû</span>
                        </h3>
                    </div>
                    <div id="quick-todo-list" class="space-y-2">
                        <!-- Âø´ÈÄüÂæÖÂäûÈ°πÁõÆÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
                        <div class="text-center text-gray-400 text-sm py-4">
                            <i class="fa fa-clipboard-list mb-2"></i>
                            <p>ÊöÇÊó†ÂæÖÂäû‰ªªÂä°</p>
                        </div>
                    </div>
                </div>

                <!-- ‰∏ªË¶ÅÂÜÖÂÆπÂå∫Âüü -->
                <div class="max-w-3xl mx-auto">
                    <!-- Âø´ÈÄüÂæÖÂäûÂàóË°® - Êúâ‰ªªÂä°Êó∂ÊòæÁ§∫Âú®È°∂ÈÉ® -->
                    <div id="quick-todo-top" class="glass-card p-4 mb-6 fade-in-up glass-hover hidden rounded-2xl">
                        <div class="mb-4">
                            <h3 class="text-base font-semibold text-gray-800 flex items-center">
                                <i class="fa fa-tasks text-primary mr-2"></i><span data-i18n="quickTodo.title">Âø´ÈÄüÂæÖÂäû</span>
                            </h3>
                        </div>
                        <div id="quick-todo-list-top" class="space-y-2">
                            <!-- Âø´ÈÄüÂæÖÂäûÈ°πÁõÆÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
                        </div>
                    </div>
                    
                    <!-- Â∞èÁÅ´ÁÆ≠ÊøÄÂä±ÂõæÊ†á - ÁßªÂä®Âà∞Ê∑ªÂä†‰ªªÂä°Ê®°Âùó‰∏äÊñπ -->
                    <div id="rocket-motivator" class="flex flex-col items-center justify-center py-8 fade-in-up">
                        <div class="w-24 h-24 rounded-full bg-primary/10 flex items-center justify-center mb-4 float-animation heartbeat">
                            <i class="fa fa-rocket text-4xl text-primary"></i>
                        </div>
                        <h3 class="text-xl font-semibold text-gray-700 mb-2" data-i18n="rocket.title">ÊûÅÈÄüÂºÄÂßã‰Ω†ÁöÑ‰ªªÂä°ÁÆ°ÁêÜÔºÅ</h3>
                        <p class="text-gray-500 text-center max-w-md" data-i18n="rocket.subtitle">‚ö°Á®ãÂ∫è‰ºöÊô∫ËÉΩËØÜÂà´‰ªªÂä°‰∏≠ÁöÑÊó∂Èó¥Âπ∂ÂÆâÊéí‚ö°</p>
                    </div>
                    
                    <!-- Êó†‰ªªÂä°Áä∂ÊÄÅ -->
                    <div id="empty-state" class="flex flex-col items-center justify-center py-8 fade-in-up">
                        <!-- Êô∫ËÉΩËæìÂÖ•Âå∫Âüü (Êó†‰ªªÂä°Êó∂Á™ÅÂá∫ÊòæÁ§∫) -->
                        <div class="w-full glass-card p-5 w-full max-w-md glass-hover bounce-in rounded-xl">
                            <label for="task-input" class="block text-sm font-medium text-gray-700 mb-2" data-i18n="task.addNew">Ê∑ªÂä†Êñ∞‰ªªÂä°</label>
                            <div class="relative">
                                <input type="text" id="task-input" placeholder="‰æãÂ¶ÇÔºöÂêéÂ§©‰∏≠ÂçàËÄÉËØï" 
                                    class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-primary focus:border-transparent transition-smooth focus-ring">
                                <div class="absolute right-3 top-3 text-gray-400">
                                    <i class="fa fa-magic"></i>
                                </div>
                            </div>
                            <p class="text-xs text-gray-500 mt-1" data-i18n="task.hint">ÊèêÁ§∫ÔºöÂ∞ùËØïËæìÂÖ•"ÊòéÂ§©‰∏ãÂçà2ÁÇπÂÆåÊàêÊä•Âëä"Êàñ"ÂáÜÂ§á‰ºöËÆÆÊùêÊñôÔºå‰ºòÂÖàÁ∫ßÈ´ò"</p>
                            <button id="add-task-btn" class="mt-4 w-full bg-primary hover:bg-primary/90 text-white font-medium py-3 px-4 rounded-xl transition-bounce flex items-center justify-center">
                                <i class="fa fa-rocket mr-2"></i><span data-i18n="task.quickAdd">ÊûÅÈÄüÊ∑ªÂä†</span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Êúâ‰ªªÂä°Áä∂ÊÄÅ -->
                    <div id="tasks-state" class="hidden">
                        <!-- ‰∏ã‰∏Ä‰∏™‰ªªÂä° -->
                        <div id="next-task-container" class="glass-card p-5 mb-8 slide-in-right border-l-4 border-primary glass-hover">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-800 mb-1" data-i18n="task.nextTask">Âç≥Â∞ÜÂºÄÂßãÁöÑ‰ªªÂä°</h3>
                                    <p id="next-task-time" class="text-sm text-gray-500"></p>
                                </div>
                                <span id="next-task-priority" class="px-2 py-1 rounded-full text-xs font-medium"></span>
                            </div>
                            <h4 id="next-task-title" class="text-xl font-bold mt-3 mb-2"></h4>
                            <p id="next-task-description" class="text-gray-600 text-sm mb-4"></p>
                            <div class="flex justify-end space-x-2">
                                <button id="complete-next-task-btn" class="btn px-4 py-2 bg-success text-white text-sm flex items-center micro-interaction rounded-xl">
                                    <i class="fa fa-check mr-1"></i> <span data-i18n="task.complete">ÂÆåÊàê</span>
                                </button>
                                <button id="detail-next-task-btn" class="btn px-4 py-2 bg-gray-100 text-gray-700 text-sm flex items-center micro-interaction rounded-xl">
                                    <i class="fa fa-edit mr-1"></i> <span data-i18n="task.detail">ËØ¶ÊÉÖ</span>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Êô∫ËÉΩËæìÂÖ•Âå∫Âüü (Êúâ‰ªªÂä°Êó∂) -->
                        <div class="glass-card p-4 mb-8 scale-in glass-hover rounded-2xl">
                            <div class="flex">
                                <input type="text" id="task-input-with-tasks" placeholder="Ê∑ªÂä†Êñ∞‰ªªÂä°Ôºå‰æãÂ¶ÇÔºöÂêéÂ§©‰∏≠ÂçàËÄÉËØï" 
                                    class="flex-1 px-4 py-2.5 rounded-xl border border-gray-300 focus:ring-2 focus:ring-primary focus:border-transparent transition-smooth focus-ring mr-2">
                                <button id="add-task-btn-with-tasks" class="btn bg-primary hover:bg-primary/90 text-white font-medium py-2.5 px-4 rounded-xl flex items-center micro-interaction">
                                    <i class="fa fa-rocket"></i>
                                </button>
                            </div>
                        </div>
                        
                        <!-- ‰ªªÂä°ÂàóË°® -->
                        <div class="mb-6">
                            <h3 class="text-lg font-semibold mb-4 flex items-center fade-in-up">
                                <i class="fa fa-list-ul text-primary mr-2"></i><span data-i18n="task.allTasks">ÊâÄÊúâ‰ªªÂä°</span>
                            </h3>
                            <div id="tasks-container" class="space-y-3">
                                <!-- ‰ªªÂä°È°πÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÊ∑ªÂä† -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Êñ∞ÊâãÊïôÁ®ãÊ®°ÊÄÅÊ°Ü -->
        <div id="tutorial-modal" class="fixed inset-0 bg-black/50 z-[60] hidden">
            <div class="flex items-center justify-center min-h-screen p-4">
                <div class="glass-card max-w-2xl w-full max-h-[80vh] overflow-y-auto rounded-2xl shadow-2xl transform transition-all duration-500 scale-95 opacity-0 relative z-[61]" id="tutorial-content">
                    <!-- ÊïôÁ®ãÂ§¥ÈÉ® -->
                    <div class="sticky top-0 glass-card p-6 border-b border-gray-100 rounded-t-2xl">
                        <div class="flex justify-between items-center">
                            <h2 class="text-2xl font-bold text-gray-800 flex items-center">
                                <i class="fa fa-graduation-cap text-primary mr-3"></i>
                                <span data-i18n="tutorial.title">ÈÄüÂ∫¶Ê∏ÖÂçïÊñ∞ÊâãÊïôÁ®ã</span>
                            </h2>
                            <div class="flex items-center space-x-3">
                                <button id="tutorial-skip" class="text-gray-500 hover:text-gray-700 text-sm transition-colors" data-i18n="tutorial.skip">
                                    Ë∑≥ËøáÊïôÁ®ã
                                </button>
                                <button id="tutorial-close" class="icon-btn micro-interaction">
                                    <i class="fa fa-times text-gray-600"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ÊïôÁ®ãÂÜÖÂÆπ -->
                    <div class="p-6 space-y-8">
                        <!-- Ê¨¢ËøéÈ°µ -->
                        <div id="tutorial-step-0" class="tutorial-step">
                            <div class="text-center py-8">
                                <div class="w-24 h-24 mx-auto mb-6 rounded-full bg-gradient-to-r from-primary to-purple-500 flex items-center justify-center float-animation">
                                    <i class="fa fa-rocket text-4xl text-white"></i>
                                </div>
                                <h3 class="text-2xl font-bold text-gray-800 mb-4" data-i18n="tutorialTitle">Ê¨¢Ëøé‰ΩøÁî®ÈÄüÂ∫¶Ê∏ÖÂçïÔºÅ</h3>
                                <p class="text-gray-600 text-lg mb-6" data-i18n="appSubtitle">ÊûÅÈÄü‰ªªÂä°ÁÆ°ÁêÜÔºåËÆ©ÊïàÁéáÁøªÂÄç üöÄ</p>
                                
                                <!-- ËØ≠Ë®ÄÈÄâÊã©Âå∫Âüü -->
                                <div class="mb-8 p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl border border-blue-200">
                                    <p class="text-sm text-gray-700 mb-3 font-medium">
                                        <i class="fa fa-globe mr-2 text-blue-500"></i>
                                        <span data-i18n="language">ËØ≠Ë®Ä</span> / Language
                                    </p>
                                    <div class="flex justify-center space-x-3">
                                        <button onclick="switchLanguageInTutorial('zh')" 
                                                class="language-btn px-4 py-2 rounded-lg border-2 transition-all duration-300 hover:scale-105"
                                                id="lang-zh-tutorial-btn">
                                            <div class="flex items-center space-x-2">
                                                <span class="text-xl">üá®üá≥</span>
                                                <span class="font-medium">‰∏≠Êñá</span>
                                            </div>
                                        </button>
                                        <button onclick="switchLanguageInTutorial('en')" 
                                                class="language-btn px-4 py-2 rounded-lg border-2 transition-all duration-300 hover:scale-105"
                                                id="lang-en-tutorial-btn">
                                            <div class="flex items-center space-x-2">
                                                <span class="text-xl">üá∫üá∏</span>
                                                <span class="font-medium">English</span>
                                            </div>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                                    <div class="glass-card p-4 rounded-xl group hover:scale-105 transition-transform">
                                        <div class="relative overflow-hidden">
                                            <div class="w-12 h-12 mx-auto mb-3 rounded-xl bg-gradient-to-r from-yellow-400 to-orange-500 flex items-center justify-center group-hover:rotate-12 transition-transform">
                                                <i class="fa fa-bolt text-white text-xl"></i>
                                            </div>
                                            <div class="absolute inset-0 bg-gradient-to-r from-yellow-100 to-orange-100 opacity-0 group-hover:opacity-20 transition-opacity rounded-xl"></div>
                                        </div>
                                        <p class="text-sm font-medium" data-i18n="tutorialStep1">ÊûÅÈÄüÊ∑ªÂä†</p>
                                        <p class="text-xs text-gray-500 mt-1">Êô∫ËÉΩËØÜÂà´Êó∂Èó¥</p>
                                    </div>
                                    <div class="glass-card p-4 rounded-xl group hover:scale-105 transition-transform">
                                        <div class="relative overflow-hidden">
                                            <div class="w-12 h-12 mx-auto mb-3 rounded-xl bg-gradient-to-r from-purple-400 to-indigo-500 flex items-center justify-center group-hover:rotate-12 transition-transform">
                                                <i class="fa fa-magic text-white text-xl"></i>
                                            </div>
                                            <div class="absolute inset-0 bg-gradient-to-r from-purple-100 to-indigo-100 opacity-0 group-hover:opacity-20 transition-opacity rounded-xl"></div>
                                        </div>
                                        <p class="text-sm font-medium" data-i18n="tutorialStep2">Êô∫ËÉΩËØÜÂà´</p>
                                        <p class="text-xs text-gray-500 mt-1">Ëá™ÁÑ∂ËØ≠Ë®ÄËß£Êûê</p>
                                    </div>
                                    <div class="glass-card p-4 rounded-xl group hover:scale-105 transition-transform">
                                        <div class="relative overflow-hidden">
                                            <div class="w-12 h-12 mx-auto mb-3 rounded-xl bg-gradient-to-r from-blue-400 to-cyan-500 flex items-center justify-center group-hover:rotate-12 transition-transform">
                                                <i class="fa fa-bar-chart text-white text-xl"></i>
                                            </div>
                                            <div class="absolute inset-0 bg-gradient-to-r from-blue-100 to-cyan-100 opacity-0 group-hover:opacity-20 transition-opacity rounded-xl"></div>
                                        </div>
                                        <p class="text-sm font-medium" data-i18n="tutorialStep3">Êü•ÁúãÁªüËÆ°</p>
                                        <p class="text-xs text-gray-500 mt-1">Êï∞ÊçÆÂàÜÊûêÊ¥ûÂØü</p>
                                    </div>
                                    <div class="glass-card p-4 rounded-xl group hover:scale-105 transition-transform">
                                        <div class="relative overflow-hidden">
                                            <div class="w-12 h-12 mx-auto mb-3 rounded-xl bg-gradient-to-r from-purple-400 to-pink-500 flex items-center justify-center group-hover:rotate-12 transition-transform">
                                                <i class="fa fa-paint-brush text-white text-xl"></i>
                                            </div>
                                            <div class="absolute inset-0 bg-gradient-to-r from-purple-100 to-pink-100 opacity-0 group-hover:opacity-20 transition-opacity rounded-xl"></div>
                                        </div>
                                        <p class="text-sm font-medium" data-i18n="tutorialStep4">‰∏™ÊÄßÂåñËÆæÁΩÆ</p>
                                        <p class="text-xs text-gray-500 mt-1">‰∏ªÈ¢ò¬∑ËØ≠Ë®Ä¬∑ÈÄöÁü•</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ÂäüËÉΩ1ÔºöÊô∫ËÉΩÊó∂Èó¥ËØÜÂà´ -->
                        <div id="tutorial-step-1" class="tutorial-step hidden">
                            <div class="flex items-start space-x-4">
                                <div class="w-16 h-16 rounded-full bg-purple-100 flex items-center justify-center flex-shrink-0">
                                    <i class="fa fa-magic text-2xl text-purple-600"></i>
                                </div>
                                <div class="flex-1">
                                    <h3 class="text-xl font-bold text-gray-800 mb-3" data-i18n="tutorialSmartTimeTitle">üß† Êô∫ËÉΩÊó∂Èó¥ËØÜÂà´</h3>
                                    <p class="text-gray-600 mb-4" data-i18n="tutorialSmartTimeDesc">ËæìÂÖ•Ëá™ÁÑ∂ËØ≠Ë®ÄÔºåÁ≥ªÁªüËá™Âä®ËØÜÂà´Êó∂Èó¥ÔºÅËØïËØïËøô‰∫õÁ•ûÂ•áÁöÑËæìÂÖ•Ôºö</p>
                                    <div class="space-y-3">
                                        <div class="glass-card p-3 rounded-lg border-l-4 border-purple-500">
                                            <code class="text-sm bg-purple-50 px-2 py-1 rounded" data-i18n="tutorialExample1">ÊòéÂ§©‰∏ãÂçà2ÁÇπÂºÄ‰ºö</code>
                                            <span class="text-gray-500 ml-2" data-i18n="tutorialExample1Result">‚Üí Ëá™Âä®ËØÜÂà´‰∏∫ÊòéÂ§©14:00</span>
                                        </div>
                                        <div class="glass-card p-3 rounded-lg border-l-4 border-purple-500">
                                            <code class="text-sm bg-purple-50 px-2 py-1 rounded" data-i18n="tutorialExample2">ÂêéÂ§©‰∏äÂçàËÄÉËØï</code>
                                            <span class="text-gray-500 ml-2" data-i18n="tutorialExample2Result">‚Üí Ëá™Âä®ËØÜÂà´‰∏∫ÂêéÂ§©09:00</span>
                                        </div>
                                        <div class="glass-card p-3 rounded-lg border-l-4 border-purple-500">
                                            <code class="text-sm bg-purple-50 px-2 py-1 rounded" data-i18n="tutorialExample3">‰∏ãÂë®‰∏ÄÂÆåÊàêÊä•Âëä</code>
                                            <span class="text-gray-500 ml-2" data-i18n="tutorialExample3Result">‚Üí Ëá™Âä®ËØÜÂà´‰∏∫‰∏ãÂë®‰∏ÄÊåáÂÆöÊó∂Èó¥</span>
                                        </div>
                                    </div>
                                    <div class="mt-4 p-4 bg-purple-50 rounded-xl">
                                        <p class="text-sm text-purple-700" data-i18n="tutorialTimeSupport">
                                            <i class="fa fa-lightbulb mr-2"></i>
                                            ÊîØÊåÅÁõ∏ÂØπÊó∂Èó¥ÔºàÊòéÂ§©„ÄÅÂêéÂ§©„ÄÅ‰∏ãÂë®ÔºâÂíåÁªùÂØπÊó∂Èó¥ÔºàÂÖ∑‰ΩìÊó•ÊúüÔºâ
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ÂäüËÉΩ2ÔºöÊûÅÈÄü‰ªªÂä°ÁÆ°ÁêÜ -->
                        <div id="tutorial-step-2" class="tutorial-step hidden">
                            <div class="flex items-start space-x-4">
                                <div class="w-16 h-16 rounded-full bg-yellow-100 flex items-center justify-center flex-shrink-0">
                                    <i class="fa fa-bolt text-2xl text-yellow-600"></i>
                                </div>
                                <div class="flex-1">
                                    <h3 class="text-xl font-bold text-gray-800 mb-3" data-i18n="tutorialQuickTaskTitle">‚ö° ÊûÅÈÄü‰ªªÂä°ÁÆ°ÁêÜ</h3>
                                    <p class="text-gray-600 mb-4" data-i18n="tutorialQuickTaskDesc">Èó™ÁîµËà¨ÁöÑ‰ªªÂä°Êìç‰Ωú‰ΩìÈ™åÔºåËÆ©ÊïàÁéáÂÄçÂ¢ûÔºÅ</p>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div class="glass-card p-4 rounded-xl">
                                            <h4 class="font-semibold text-gray-800 mb-2 flex items-center">
                                                <i class="fa fa-plus-circle text-green-500 mr-2"></i>
                                                <span data-i18n="tutorialQuickAdd">Âø´ÈÄüÊ∑ªÂä†</span>
                                            </h4>
                                            <p class="text-sm text-gray-600" data-i18n="tutorialQuickAddDesc">ËæìÂÖ•‰ªªÂä°ÂÜÖÂÆπÔºåÂõûËΩ¶ÊàñÁÇπÂáªÊåâÈíÆÂç≥ÂèØÊ∑ªÂä†</p>
                                        </div>
                                        <div class="glass-card p-4 rounded-xl">
                                            <h4 class="font-semibold text-gray-800 mb-2 flex items-center">
                                                <i class="fa fa-check-circle text-blue-500 mr-2"></i>
                                                <span data-i18n="tutorialOneClickComplete">‰∏ÄÈîÆÂÆåÊàê</span>
                                            </h4>
                                            <p class="text-sm text-gray-600" data-i18n="tutorialOneClickCompleteDesc">ÁÇπÂáªÊâìÂãæÊåâÈíÆÔºå‰ªªÂä°Áû¨Èó¥ÂÆåÊàêÔºåËøòÊúâÁ≤æÁæéÂä®Áîª</p>
                                        </div>
                                        <div class="glass-card p-4 rounded-xl">
                                            <h4 class="font-semibold text-gray-800 mb-2 flex items-center">
                                                <i class="fa fa-flag text-red-500 mr-2"></i>
                                                <span data-i18n="tutorialPrioritySetting">‰ºòÂÖàÁ∫ßËÆæÁΩÆ</span>
                                            </h4>
                                            <p class="text-sm text-gray-600" data-i18n="tutorialPrioritySettingDesc">È´ò‰∏≠‰Ωé‰∏âÁ∫ß‰ºòÂÖàÁ∫ßÔºåÈáçË¶Å‰ªªÂä°‰ºòÂÖàÂ§ÑÁêÜ</p>
                                        </div>
                                        <div class="glass-card p-4 rounded-xl">
                                            <h4 class="font-semibold text-gray-800 mb-2 flex items-center">
                                                <i class="fa fa-edit text-purple-500 mr-2"></i>
                                                <span data-i18n="tutorialFlexibleEdit">ÁÅµÊ¥ªÁºñËæë</span>
                                            </h4>
                                            <p class="text-sm text-gray-600" data-i18n="tutorialFlexibleEditDesc">ÈöèÊó∂‰øÆÊîπ‰ªªÂä°ÂÜÖÂÆπ„ÄÅÊó∂Èó¥Âíå‰ºòÂÖàÁ∫ß</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ÂäüËÉΩ3ÔºöÊô∫ËÉΩÁªüËÆ°ÂàÜÊûê -->
                        <div id="tutorial-step-3" class="tutorial-step hidden">
                            <div class="flex items-start space-x-4">
                                <div class="w-16 h-16 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0">
                                    <i class="fa fa-bar-chart text-2xl text-blue-600"></i>
                                </div>
                                <div class="flex-1">
                                    <h3 class="text-xl font-bold text-gray-800 mb-3" data-i18n="tutorialStatsTitle">üìä Êô∫ËÉΩÁªüËÆ°ÂàÜÊûê</h3>
                                    <p class="text-gray-600 mb-4" data-i18n="tutorialStatsDesc">Ê∑±Â∫¶ÂàÜÊûê‰Ω†ÁöÑ‰ªªÂä°Êï∞ÊçÆÔºåÊèê‰æõ‰∏ì‰∏öÊ¥ûÂØüÔºÅ</p>
                                    <div class="space-y-4">
                                        <div class="glass-card p-4 rounded-xl">
                                            <h4 class="font-semibold text-gray-800 mb-3" data-i18n="tutorialVisualizationTitle">üìà ÂèØËßÜÂåñÂõæË°®</h4>
                                            <ul class="space-y-2 text-sm text-gray-600">
                                                <li class="flex items-center">
                                                    <i class="fa fa-check text-green-500 mr-2"></i>
                                                    <span data-i18n="tutorialTrendChart">ÂÆåÊàêÊÉÖÂÜµË∂ãÂäøÂõæ</span>
                                                </li>
                                                <li class="flex items-center">
                                                    <i class="fa fa-check text-green-500 mr-2"></i>
                                                    <span data-i18n="tutorialPriorityChart">‰ºòÂÖàÁ∫ßÂàÜÂ∏ÉÈ•ºÂõæ</span>
                                                </li>
                                                <li class="flex items-center">
                                                    <i class="fa fa-check text-green-500 mr-2"></i>
                                                    <span data-i18n="tutorialTimeAnalysis">‰ªªÂä°Êó∂Èó¥ÂàÜÂ∏ÉÂàÜÊûê</span>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="glass-card p-4 rounded-xl">
                                            <h4 class="font-semibold text-gray-800 mb-3" data-i18n="tutorialAISummaryTitle">üß† AIÊô∫ËÉΩÊÄªÁªì</h4>
                                            <ul class="space-y-2 text-sm text-gray-600">
                                                <li class="flex items-center">
                                                    <i class="fa fa-check text-green-500 mr-2"></i>
                                                    <span data-i18n="tutorialTodayOverview">‰ªäÊó•‰ªªÂä°Ê¶ÇËßà</span>
                                                </li>
                                                <li class="flex items-center">
                                                    <i class="fa fa-check text-green-500 mr-2"></i>
                                                    <span data-i18n="tutorialTaskCategories">‰ªªÂä°ÂàÜÁ±ªÁªüËÆ°</span>
                                                </li>
                                                <li class="flex items-center">
                                                    <i class="fa fa-check text-green-500 mr-2"></i>
                                                    <span data-i18n="tutorialEfficiencyTips">ÊïàÁéáÊèêÂçáÂª∫ËÆÆ</span>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ÂäüËÉΩ4ÔºöÁ≤æÁæéÁïåÈù¢ËÆæËÆ° -->
                        <div id="tutorial-step-4" class="tutorial-step hidden">
                            <div class="flex items-start space-x-4">
                                <div class="w-16 h-16 rounded-full bg-pink-100 flex items-center justify-center flex-shrink-0">
                                    <i class="fa fa-paint-brush text-2xl text-pink-600"></i>
                                </div>
                                <div class="flex-1">
                                    <h3 class="text-xl font-bold text-gray-800 mb-3" data-i18n="tutorialUITitle">üé® Á≤æÁæéÁïåÈù¢ËÆæËÆ°</h3>
                                    <p class="text-gray-600 mb-4" data-i18n="tutorialUIDesc">Áé∞‰ª£ÂåñÁéªÁíÉÊÄÅËÆæËÆ°ÔºåËÆ©‰ªªÂä°ÁÆ°ÁêÜÊàê‰∏∫‰∏ÄÁßç‰∫´ÂèóÔºÅ</p>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div class="glass-card p-4 rounded-xl">
                                            <h4 class="font-semibold text-gray-800 mb-2" data-i18n="tutorialGlassEffect">‚ú® ÁéªÁíÉÊÄÅÊïàÊûú</h4>
                                            <p class="text-sm text-gray-600" data-i18n="tutorialGlassEffectDesc">ÂçäÈÄèÊòéÊØõÁéªÁíÉË¥®ÊÑüÔºåÁé∞‰ª£ÊÑüÂçÅË∂≥</p>
                                        </div>
                                        <div class="glass-card p-4 rounded-xl">
                                            <h4 class="font-semibold text-gray-800 mb-2" data-i18n="tutorialSmoothAnimation">üåà ÊµÅÁïÖÂä®Áîª</h4>
                                            <p class="text-sm text-gray-600" data-i18n="tutorialSmoothAnimationDesc">Á≤æÂøÉËÆæËÆ°ÁöÑËøáÊ∏°Âä®ÁîªÔºåÊìç‰ΩúÂ¶Ç‰∏ùËà¨È°∫Êªë</p>
                                        </div>
                                        <div class="glass-card p-4 rounded-xl">
                                            <h4 class="font-semibold text-gray-800 mb-2" data-i18n="tutorialResponsiveDesign">üì± ÂìçÂ∫îÂºèËÆæËÆ°</h4>
                                            <p class="text-sm text-gray-600" data-i18n="tutorialResponsiveDesignDesc">ÂÆåÁæéÈÄÇÈÖçÂêÑÁßçËÆæÂ§áÔºåÈöèÊó∂ÈöèÂú∞ÁÆ°ÁêÜ‰ªªÂä°</p>
                                        </div>
                                        <div class="glass-card p-4 rounded-xl">
                                            <h4 class="font-semibold text-gray-800 mb-2" data-i18n="tutorialMicroInteraction">üéØ ÁÅµÂä®‰∫§‰∫í</h4>
                                            <p class="text-sm text-gray-600" data-i18n="tutorialMicroInteractionDesc">ÂæÆ‰∫§‰∫íËÆæËÆ°ÔºåÊØè‰∏™Êìç‰ΩúÈÉΩÊúâÂèçÈ¶à</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ÂäüËÉΩ5Ôºö‰∏™ÊÄßÂåñËÆæÁΩÆ -->
                        <div id="tutorial-step-5" class="tutorial-step hidden">
                            <div class="flex items-start space-x-4">
                                <div class="w-16 h-16 rounded-full bg-gradient-to-r from-purple-100 to-pink-100 flex items-center justify-center flex-shrink-0">
                                    <i class="fa fa-cog text-2xl text-purple-600"></i>
                                </div>
                                <div class="flex-1">
                                    <h3 class="text-xl font-bold text-gray-800 mb-3" data-i18n="tutorialPersonalizationTitle">‚öôÔ∏è ‰∏™ÊÄßÂåñËÆæÁΩÆ</h3>
                                    <p class="text-gray-600 mb-4" data-i18n="tutorialPersonalizationDesc">ÊâìÈÄ†‰∏ìÂ±û‰∫é‰Ω†ÁöÑ‰ªªÂä°ÁÆ°ÁêÜ‰ΩìÈ™åÔºÅ</p>
                                    
                                    <!-- ‰∏™ÊÄßÂåñËÆæÁΩÆÈÖçÂõæÂå∫Âüü -->
                                    <div class="mb-6 p-6 bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl border border-purple-200">
                                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                            <!-- ËØ≠Ë®ÄËÆæÁΩÆÈÖçÂõæ -->
                                            <div class="text-center">
                                                <div class="w-20 h-20 mx-auto mb-3 rounded-2xl bg-white shadow-lg flex items-center justify-center border-2 border-purple-200">
                                                    <div class="text-2xl">
                                                        üá®üá≥üá∫üá∏
                                                    </div>
                                                </div>
                                                <h4 class="font-semibold text-gray-800 mb-2" data-i18n="tutorialLanguageSetting">ËØ≠Ë®ÄÂàáÊç¢</h4>
                                                <p class="text-sm text-gray-600" data-i18n="tutorialLanguageSettingDesc">‰∏≠Ëã±ÊñáËá™Áî±ÂàáÊç¢</p>
                                            </div>
                                            
                                            <!-- ‰∏ªÈ¢òËÆæÁΩÆÈÖçÂõæ -->
                                            <div class="text-center">
                                                <div class="w-20 h-20 mx-auto mb-3 rounded-2xl bg-gradient-to-r from-blue-400 to-purple-500 shadow-lg flex items-center justify-center">
                                                    <i class="fa fa-paint-brush text-white text-2xl"></i>
                                                </div>
                                                <h4 class="font-semibold text-gray-800 mb-2" data-i18n="tutorialThemeSetting">‰∏ªÈ¢òÈ£éÊ†º</h4>
                                                <p class="text-sm text-gray-600" data-i18n="tutorialThemeSettingDesc">Â§öÁßç‰∏ªÈ¢òÈöèÂøÉÈÄâ</p>
                                            </div>
                                            
                                            <!-- ÈÄöÁü•ËÆæÁΩÆÈÖçÂõæ -->
                                            <div class="text-center">
                                                <div class="w-20 h-20 mx-auto mb-3 rounded-2xl bg-gradient-to-r from-green-400 to-blue-500 shadow-lg flex items-center justify-center">
                                                    <i class="fa fa-bell text-white text-2xl"></i>
                                                </div>
                                                <h4 class="font-semibold text-gray-800 mb-2" data-i18n="tutorialNotificationSetting">ÈÄöÁü•ÊèêÈÜí</h4>
                                                <p class="text-sm text-gray-600" data-i18n="tutorialNotificationSettingDesc">Êô∫ËÉΩÊèêÈÜí‰∏çÈîôËøá</p>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div class="glass-card p-4 rounded-xl">
                                            <h4 class="font-semibold text-gray-800 mb-2 flex items-center">
                                                <i class="fa fa-user-circle text-purple-500 mr-2"></i>
                                                <span data-i18n="tutorialProfileSetting">‰∏™‰∫∫ËµÑÊñô</span>
                                            </h4>
                                            <p class="text-sm text-gray-600" data-i18n="tutorialProfileSettingDesc">Ëá™ÂÆö‰πâÂßìÂêçÂíåÂ§¥ÂÉè</p>
                                        </div>
                                        <div class="glass-card p-4 rounded-xl">
                                            <h4 class="font-semibold text-gray-800 mb-2 flex items-center">
                                                <i class="fa fa-clock text-blue-500 mr-2"></i>
                                                <span data-i18n="tutorialWorkTimeSetting">Â∑•‰ΩúÊó∂Èó¥</span>
                                            </h4>
                                            <p class="text-sm text-gray-600" data-i18n="tutorialWorkTimeSettingDesc">ËÆæÁΩÆ‰Ω†ÁöÑÂ∑•‰ΩúÊó∂ÊÆµ</p>
                                        </div>
                                        <div class="glass-card p-4 rounded-xl">
                                            <h4 class="font-semibold text-gray-800 mb-2 flex items-center">
                                                <i class="fa fa-key text-green-500 mr-2"></i>
                                                <span data-i18n="tutorialKeywordSetting">ÂÖ≥ÈîÆËØçËØÜÂà´</span>
                                            </h4>
                                            <p class="text-sm text-gray-600" data-i18n="tutorialKeywordSettingDesc">Ëá™ÂÆö‰πâÊó∂Èó¥ÂÖ≥ÈîÆËØç</p>
                                        </div>
                                        <div class="glass-card p-4 rounded-xl">
                                            <h4 class="font-semibold text-gray-800 mb-2 flex items-center">
                                                <i class="fa fa-download text-orange-500 mr-2"></i>
                                                <span data-i18n="tutorialDataSetting">Êï∞ÊçÆÁÆ°ÁêÜ</span>
                                            </h4>
                                            <p class="text-sm text-gray-600" data-i18n="tutorialDataSettingDesc">ÂØºÂÖ•ÂØºÂá∫‰ªªÂä°Êï∞ÊçÆ</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ‰ΩøÁî®ÊäÄÂ∑ß -->
                        <div id="tutorial-step-6" class="tutorial-step hidden">
                            <div class="flex items-start space-x-4">
                                <div class="w-16 h-16 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0">
                                    <i class="fa fa-lightbulb text-2xl text-green-600"></i>
                                </div>
                                <div class="flex-1">
                                    <h3 class="text-xl font-bold text-gray-800 mb-3" data-i18n="tutorialTipsTitle">üí° ‰ΩøÁî®ÊäÄÂ∑ß</h3>
                                    <p class="text-gray-600 mb-4" data-i18n="tutorialTipsDesc">ÊéåÊè°Ëøô‰∫õÊäÄÂ∑ßÔºåËÆ©‰Ω†ÁöÑÊïàÁéáÁøªÂÄçÔºÅ</p>
                                    <div class="space-y-3">
                                        <div class="flex items-start space-x-3">
                                            <span class="w-8 h-8 bg-green-500 text-white rounded-full flex items-center justify-center text-sm font-bold">1</span>
                                            <div>
                                                <p class="font-medium text-gray-800" data-i18n="tutorialTip1Title">‰ºòÂÖàÁ∫ßÂÖ≥ÈîÆËØç</p>
                                                <p class="text-sm text-gray-600" data-i18n="tutorialTip1Desc">Âú®‰ªªÂä°ÊèèËø∞‰∏≠Âä†ÂÖ•"‰ºòÂÖàÁ∫ßÈ´ò"„ÄÅ"ÈáçË¶Å"Á≠âËØçËá™Âä®ËÆæÁΩÆ‰ºòÂÖàÁ∫ß</p>
                                            </div>
                                        </div>
                                        <div class="flex items-start space-x-3">
                                            <span class="w-8 h-8 bg-green-500 text-white rounded-full flex items-center justify-center text-sm font-bold">2</span>
                                            <div>
                                                <p class="font-medium text-gray-800" data-i18n="tutorialTip2Title">Âø´Êç∑ÈîÆÊîØÊåÅ</p>
                                                <p class="text-sm text-gray-600" data-i18n="tutorialTip2Desc">ËæìÂÖ•Ê°Ü‰∏≠ÊåâEnterÂø´ÈÄüÊ∑ªÂä†ÔºåEscÂèñÊ∂àËæìÂÖ•</p>
                                            </div>
                                        </div>
                                        <div class="flex items-start space-x-3">
                                            <span class="w-8 h-8 bg-green-500 text-white rounded-full flex items-center justify-center text-sm font-bold">3</span>
                                            <div>
                                                <p class="font-medium text-gray-800" data-i18n="tutorialTip3Title">Êï∞ÊçÆÂØºÂá∫</p>
                                                <p class="text-sm text-gray-600" data-i18n="tutorialTip3Desc">ÊîØÊåÅÂØºÂá∫‰ªªÂä°Êï∞ÊçÆÔºåÊñπ‰æøÂ§á‰ªΩÂíåÂàÜ‰∫´</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ÊïôÁ®ãÂ∫ïÈÉ®ÂØºËà™ -->
                    <div class="sticky bottom-0 glass-card p-4 border-t border-gray-100 rounded-b-2xl">
                        <div class="flex justify-between items-center">
                            <div class="flex space-x-2">
                                <div class="w-2 h-2 rounded-full bg-primary transition-all duration-300" data-step="0"></div>
                                <div class="w-2 h-2 rounded-full bg-gray-300 transition-all duration-300" data-step="1"></div>
                                <div class="w-2 h-2 rounded-full bg-gray-300 transition-all duration-300" data-step="2"></div>
                                <div class="w-2 h-2 rounded-full bg-gray-300 transition-all duration-300" data-step="3"></div>
                                <div class="w-2 h-2 rounded-full bg-gray-300 transition-all duration-300" data-step="4"></div>
                                <div class="w-2 h-2 rounded-full bg-gray-300 transition-all duration-300" data-step="5"></div>
                            </div>
                            <div class="flex space-x-3">
                                <button id="tutorial-prev" class="px-4 py-2 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                                    <i class="fa fa-arrow-left mr-2"></i><span data-i18n="previous">‰∏ä‰∏ÄÊ≠•</span>
                                </button>
                                <button id="tutorial-next" class="px-4 py-2 bg-primary text-white rounded-xl hover:bg-primary/90 transition-colors">
                                    <span data-i18n="next">‰∏ã‰∏ÄÊ≠•</span><i class="fa fa-arrow-right ml-2"></i>
                                </button>
                                <button id="tutorial-finish" class="px-4 py-2 bg-success text-white rounded-xl hover:bg-success/90 transition-colors hidden">
                                    <span data-i18n="start">ÂºÄÂßã‰ΩøÁî®</span><i class="fa fa-check ml-2"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ‰æßËæπÂäüËÉΩÈù¢Êùø (ÈªòËÆ§ÈöêËóè) - Êîπ‰∏∫ÂÖ®Â±èÊ®°ÊÄÅÊ°Ü -->
        <aside id="feature-panel" class="fixed inset-0 w-full h-full glass-morphism shadow-2xl z-[60] transform translate-x-full transition-smooth ease-in-out overflow-y-auto">
            <div class="min-h-full p-5 md:p-8">
                <!-- Èù¢ÊùøÂ§¥ÈÉ® -->
                <div class="flex justify-between items-center mb-6 sticky top-0 glass-card p-4 rounded-xl z-10">
                    <h2 id="panel-title" class="text-2xl font-bold text-gray-800" data-i18n="taskStats">‰ªªÂä°ÁªüËÆ°</h2>
                    <button id="close-panel-btn" class="icon-btn micro-interaction text-xl p-3">
                        <i class="fa fa-times text-gray-600"></i>
                    </button>
                </div>
                <!-- ÁªüËÆ°Èù¢Êùø -->
                <div id="stats-panel" class="max-w-6xl mx-auto space-y-8 hidden">
                    <!-- Á¨¨‰∏ÄË°åÔºöÂõæË°®ÂíåÁªüËÆ° -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div class="glass-card p-6 glass-hover">
                            <h3 class="text-lg font-medium text-gray-700 mb-4" data-i18n="completionStatus">ÂÆåÊàêÊÉÖÂÜµ</h3>
                            <div class="h-80">
                                <canvas id="completion-chart"></canvas>
                            </div>
                        </div>
                        
                        <div class="glass-card p-6 glass-hover">
                            <h3 class="text-lg font-medium text-gray-700 mb-4" data-i18n="taskDistribution">‰ªªÂä°ÂàÜÂ∏É</h3>
                            <div class="space-y-4">
                                <div>
                                    <div class="flex justify-between text-sm mb-2">
                                        <span data-i18n="highPriority">È´ò‰ºòÂÖàÁ∫ß</span>
                                        <span id="high-priority-percent">0%</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-3">
                                        <div id="high-priority-bar" class="bg-danger h-3 rounded-full transition-smooth" style="width: 0%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between text-sm mb-2">
                                        <span data-i18n="mediumPriority">‰∏≠‰ºòÂÖàÁ∫ß</span>
                                        <span id="medium-priority-percent">0%</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-3">
                                        <div id="medium-priority-bar" class="bg-primary h-3 rounded-full transition-smooth" style="width: 0%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between text-sm mb-2">
                                        <span data-i18n="lowPriority">‰Ωé‰ºòÂÖàÁ∫ß</span>
                                        <span id="low-priority-percent">0%</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-3">
                                        <div id="low-priority-bar" class="bg-success h-3 rounded-full transition-smooth" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Á¨¨‰∫åË°åÔºöÊô∫ËÉΩÊÄªÁªì -->
                    <div class="glass-card p-6 glass-hover">
                        <h3 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
                            <i class="fa fa-brain text-purple-500 mr-2"></i><span data-i18n="smartSummary">Êô∫ËÉΩ‰ªªÂä°ÊÄªÁªì</span>
                        </h3>
                        <div id="smart-summary" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                            <div class="bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl p-4 border border-purple-100 glass-hover micro-interaction">
                                <h4 class="font-medium text-gray-800 mb-2 flex items-center">
                                    <i class="fa fa-bar-chart text-purple-500 mr-2"></i><span data-i18n="todayOverview">‰ªäÊó•Ê¶ÇËßà</span>
                                </h4>
                                <div id="today-overview" class="text-sm text-gray-700">
                                    <p>Ê≠£Âú®ÂàÜÊûê‰ªäÊó•‰ªªÂä°...</p>
                                </div>
                            </div>
                            
                            <div class="bg-gradient-to-r from-blue-50 to-cyan-50 rounded-xl p-4 border border-blue-100 glass-hover micro-interaction">
                                <h4 class="font-medium text-gray-800 mb-2 flex items-center">
                                    <i class="fa fa-tasks text-blue-500 mr-2"></i><span data-i18n="taskCategories">‰ªªÂä°ÂàÜÁ±ª</span>
                                </h4>
                                <div id="task-categories" class="text-sm text-gray-700">
                                    <p>Ê≠£Âú®ÂàÜÊûê‰ªªÂä°Á±ªÂûã...</p>
                                </div>
                            </div>
                            
                            <div class="bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-4 border border-green-100 glass-hover micro-interaction">
                                <h4 class="font-medium text-gray-800 mb-2 flex items-center">
                                    <i class="fa fa-clock-o text-green-500 mr-2"></i><span data-i18n="timeAllocation">Êó∂Èó¥ÂàÜÈÖç</span>
                                </h4>
                                <div id="time-allocation" class="text-sm text-gray-700">
                                    <p>Ê≠£Âú®ÂàÜÊûêÊó∂Èó¥ÂàÜÈÖç...</p>
                                </div>
                            </div>
                            
                            <div class="bg-gradient-to-r from-orange-50 to-red-50 rounded-xl p-4 border border-orange-100 glass-hover micro-interaction">
                                <h4 class="font-medium text-gray-800 mb-2 flex items-center">
                                    <i class="fa fa-lightbulb text-orange-500 mr-2"></i><span data-i18n="smartSuggestions">Êô∫ËÉΩÂª∫ËÆÆ</span>
                                </h4>
                                <div id="ai-suggestions" class="text-sm text-gray-700">
                                    <p>Âü∫‰∫éÊÇ®ÁöÑ‰ªªÂä°ÂíåÊó∂Èó¥ÂÆâÊéíÔºåÁ≥ªÁªüÂ∞ÜÊèê‰æõ‰∏™ÊÄßÂåñÂª∫ËÆÆ</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Á¨¨‰∏âË°åÔºöÂ∑≤ÂÆåÊàê‰ªªÂä°ÂéÜÂè≤ -->
                    <div class="glass-card p-6 glass-hover">
                        <h3 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
                            <i class="fa fa-history text-green-500 mr-2"></i><span data-i18n="completedTaskHistory">Â∑≤ÂÆåÊàê‰ªªÂä°ÂéÜÂè≤</span>
                        </h3>
                        <div class="mb-4">
                            <div class="flex gap-2 items-center">
                                <button id="show-all-completed" class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-blue-600 transition-smooth" data-i18n="all">
                                    ÂÖ®ÈÉ®
                                </button>
                                <button id="show-today-completed" class="px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-smooth" data-i18n="todayFilter">
                                    ‰ªäÂ§©
                                </button>
                                <button id="show-yesterday-completed" class="px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-smooth" data-i18n="yesterday">
                                    Êò®Â§©
                                </button>
                                <button id="show-week-completed" class="px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-smooth" data-i18n="thisWeek">
                                    Êú¨Âë®
                                </button>
                            </div>
                        </div>
                        <div id="completed-tasks-history" class="space-y-4 max-h-96 overflow-y-auto">
                            <p class="text-gray-500 text-center py-8" data-i18n="noCompletedTasks">ÊöÇÊó†Â∑≤ÂÆåÊàêÁöÑ‰ªªÂä°</p>
                        </div>
                    </div>
                    
                    <!-- Á¨¨ÂõõË°åÔºöÊï∞ÊçÆÁÆ°ÁêÜ -->
                    <div class="glass-card p-6 glass-hover">
                        <h3 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
                            <i class="fa fa-download text-blue-500 mr-2"></i><span data-i18n="dataManagement">Êï∞ÊçÆÁÆ°ÁêÜ</span>
                        </h3>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <button id="export-json-btn" class="btn bg-blue-500 text-white py-3 rounded-lg hover:bg-blue-600 transition-smooth micro-interaction flex items-center justify-center">
                                <i class="fa fa-file-code-o mr-2"></i><span data-i18n="exportJSON">ÂØºÂá∫ JSON</span>
                            </button>
                            <button id="export-csv-btn" class="btn bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition-smooth micro-interaction flex items-center justify-center">
                                <i class="fa fa-file-excel-o mr-2"></i><span data-i18n="exportCSV">ÂØºÂá∫ CSV</span>
                            </button>
                            <button id="backup-data-btn" class="btn bg-purple-500 text-white py-3 rounded-lg hover:bg-purple-600 transition-smooth micro-interaction flex items-center justify-center">
                                <i class="fa fa-cloud-upload mr-2"></i><span data-i18n="backupData">Â§á‰ªΩÊï∞ÊçÆ</span>
                            </button>
                            <button id="restore-data-btn" class="btn border border-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-50 transition-smooth micro-interaction flex items-center justify-center">
                                <i class="fa fa-cloud-download mr-2"></i><span data-i18n="restoreData">ÊÅ¢Â§çÊï∞ÊçÆ</span>
                            </button>
                            <input type="file" id="restore-file-input" accept=".json" class="hidden">
                        </div>
                        <div id="backup-status" class="mt-4 text-sm text-gray-600 hidden">
                            <!-- Â§á‰ªΩÁä∂ÊÄÅ‰ø°ÊÅØÂ∞ÜÂú®ËøôÈáåÊòæÁ§∫ -->
                        </div>
                    </div>
                </div>
                            
                            <div class="bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl p-4 border border-orange-100">
                                <h4 class="font-medium text-gray-800 mb-2 flex items-center">
                                    <i class="fa fa-lightbulb-o text-orange-500 mr-2"></i><span data-i18n="smartSuggestions">Êô∫ËÉΩÂª∫ËÆÆ</span>
                                </h4>
                                <div id="ai-suggestions" class="text-sm text-gray-700">
                                    <p data-i18n="smartSuggestionsDesc">Âü∫‰∫éÊÇ®ÁöÑ‰ªªÂä°ÂíåÊó∂Èó¥ÂÆâÊéíÔºåÁ≥ªÁªüÂ∞ÜÊèê‰æõ‰∏™ÊÄßÂåñÂª∫ËÆÆ</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Âª∫ËÆÆÈù¢Êùø -->
                <div id="suggestions-panel" class="max-w-4xl mx-auto space-y-8 hidden">
                    <div class="glass-card p-6 glass-hover">
                        <h3 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
                            <i class="fa fa-lightbulb-o text-warning mr-2"></i><span data-i18n="timeManagementSuggestions">Êó∂Èó¥ÁÆ°ÁêÜÂª∫ËÆÆ</span>
                        </h3>
                        <div id="smart-suggestion" class="bg-gradient-to-r from-blue-50 to-cyan-50 rounded-xl p-6 border border-blue-100">
                            <div class="flex items-start">
                                <i class="fa fa-info-circle text-blue-500 text-xl mr-3 mt-1"></i>
                                <div>
                                    <p class="text-gray-700 leading-relaxed"></p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="glass-card p-6 glass-hover">
                        <h3 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
                            <i class="fa fa-chart-bar text-purple-500 mr-2"></i><span data-i18n="taskAnalysis">‰ªªÂä°ÂàÜÊûê</span>
                        </h3>
                        <div id="task-analysis" class="space-y-4">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-4 border border-purple-100">
                                    <h4 class="font-medium text-gray-800 mb-2" data-i18n="taskCompletionRate">‰ªªÂä°ÂÆåÊàêÁéá</h4>
                                    <div class="text-2xl font-bold text-purple-600" id="completion-rate">0%</div>
                                </div>
                                <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-4 border border-blue-100">
                                    <h4 class="font-medium text-gray-800 mb-2" data-i18n="avgCompletionTime">Âπ≥ÂùáÂÆåÊàêÊó∂Èó¥</h4>
                                    <div class="text-2xl font-bold text-blue-600" id="avg-completion-time">0Â∞èÊó∂</div>
                                </div>
                            </div>
                            <div class="bg-gray-50 rounded-xl p-4">
                                <p id="task-analysis-text" class="text-gray-600 text-sm leading-relaxed"></p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ÂæÖÂäûÊ∏ÖÂçïÈù¢Êùø -->
                <div id="todo-panel" class="max-w-4xl mx-auto hidden">
                    <div class="glass-card p-6 glass-hover">
                        <div class="mb-6">
                            <div class="flex gap-3 items-center">
                                <input type="text" id="todo-input" placeholder="Ê∑ªÂä†Êñ∞‰ªªÂä°..." 
                                    class="flex-1 px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" data-i18n-placeholder="addTask">
                                
                                <!-- ‰ºòÂÖàÁ∫ßÂàáÊç¢ÂºÄÂÖ≥ -->
                                <div class="flex items-center bg-gray-50 rounded-xl p-1 border border-gray-200">
                                    <button class="priority-btn px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200" data-priority="low">
                                        <span class="flex items-center">
                                            <span class="w-2 h-2 bg-green-400 rounded-full mr-2"></span>
                                            <span data-i18n="lowPriority">‰Ωé</span>
                                        </span>
                                    </button>
                                    <button class="priority-btn px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 bg-primary text-white" data-priority="medium">
                                        <span class="flex items-center">
                                            <span class="w-2 h-2 bg-yellow-400 rounded-full mr-2"></span>
                                            <span data-i18n="mediumPriority">‰∏≠</span>
                                        </span>
                                    </button>
                                    <button class="priority-btn px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200" data-priority="high">
                                        <span class="flex items-center">
                                            <span class="w-2 h-2 bg-red-400 rounded-full mr-2"></span>
                                            <span data-i18n="highPriority">È´ò</span>
                                        </span>
                                    </button>
                                </div>
                                
                                <!-- ÈöêËóèÁöÑ‰º†ÁªüÈÄâÊã©Âô®Ôºå‰øùÊåÅÂÖºÂÆπÊÄß -->
                                <select id="todo-priority" class="hidden">
                                    <option value="low">‰Ωé‰ºòÂÖàÁ∫ß</option>
                                    <option value="medium" selected>‰∏≠‰ºòÂÖàÁ∫ß</option>
                                    <option value="high">È´ò‰ºòÂÖàÁ∫ß</option>
                                </select>
                                
                                <button id="add-todo-btn" class="px-6 py-3 bg-primary text-white rounded-xl hover:bg-primary-dark transition-smooth micro-interaction">
                                    <i class="fa fa-plus mr-2"></i><span data-i18n="addTodo">Ê∑ªÂä†</span>
                                </button>
                            </div>
                        </div>
                        
                        <div id="todo-list-container" class="space-y-3 mb-6 max-h-96 overflow-y-auto">
                            <!-- ÂæÖÂäû‰∫ãÈ°πÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÊ∑ªÂä† -->
                        </div>
                        
                        <div id="todo-empty-state" class="text-center py-12 text-gray-400 hidden">
                            <i class="fa fa-clipboard text-6xl mb-4"></i>
                            <p data-i18n="noTodos">ÊöÇÊó†ÂæÖÂäû‰∫ãÈ°π</p>
                            <p class="text-sm mt-2" data-i18n="addFirstTask">Ê∑ªÂä†ÊÇ®ÁöÑÁ¨¨‰∏Ä‰∏™‰ªªÂä°ÂºÄÂßãÂêßÔºÅ</p>
                        </div>
                        
                        <div class="flex justify-between items-center pt-4 border-t border-gray-100">
                            <div class="text-sm text-gray-500">
                                <span id="todo-count">0</span> <span data-i18n="taskCount">‰∏™‰ªªÂä°</span>
                            </div>
                            <div class="flex gap-2">
                                <button id="clear-completed-todos-btn" class="px-4 py-2 text-sm text-gray-600 hover:text-gray-800 transition-colors">
                                    <span data-i18n="clearCompleted">Ê∏ÖÈô§Â∑≤ÂÆåÊàê</span>
                                </button>
                                <button id="clear-all-todos-btn" class="px-4 py-2 text-sm text-red-600 hover:text-red-800 transition-colors">
                                    <span data-i18n="clearAll">Ê∏ÖÈô§ÂÖ®ÈÉ®</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ËÆæÁΩÆÈù¢Êùø -->
                <div id="settings-panel" class="max-w-4xl mx-auto space-y-8 hidden settings-performance-mode">
                    <!-- ÈÄöÁü•ËÆæÁΩÆ -->
                    <div class="glass-card p-6 glass-hover">
                        <h3 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
                            <i class="fa fa-bell text-blue-500 mr-2"></i><span data-i18n="notificationSettings">ÈÄöÁü•ËÆæÁΩÆ</span>
                        </h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                <div>
                                    <label class="text-sm font-medium text-gray-700" data-i18n="browserNotifications">ÊµèËßàÂô®ÈÄöÁü•</label>
                                    <p class="text-xs text-gray-500" data-i18n="browserNotificationsDesc">ÂêØÁî®Ê°åÈù¢ÈÄöÁü•ÊèêÈÜí</p>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <button id="request-notification-permission" class="px-3 py-1 text-xs bg-primary text-white rounded-lg hover:bg-primary/90 transition-smooth" data-i18n="requestPermission">
                                        ËØ∑Ê±ÇÊùÉÈôê
                                    </button>
                                    <div class="w-2 h-2 rounded-full" id="notification-status"></div>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                <div>
                                    <label class="text-sm font-medium text-gray-700" data-i18n="taskReminder">‰ªªÂä°ÊèêÈÜí</label>
                                    <p class="text-xs text-gray-500" data-i18n="taskReminderDesc">‰ªªÂä°Âà∞ÊúüÂâçËá™Âä®ÊèêÈÜí</p>
                                </div>
                                <input type="checkbox" class="sr-only peer" checked id="notification-reminder">
                                <label for="notification-reminder" class="relative inline-flex h-6 w-11 items-center rounded-full peer bg-gray-200 peer-checked:bg-primary transition-colors cursor-pointer">
                                    <span class="inline-block h-4 w-4 transform rounded-full bg-white transition-transform peer-checked:translate-x-6"></span>
                                </label>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                <div>
                                    <label class="text-sm font-medium text-gray-700" data-i18n="soundReminder">Â£∞Èü≥ÊèêÈÜí</label>
                                    <p class="text-xs text-gray-500" data-i18n="soundReminderDesc">Êí≠ÊîæÊèêÈÜíÂ£∞Èü≥</p>
                                </div>
                                <input type="checkbox" class="sr-only peer" checked id="notification-sound">
                                <label for="notification-sound" class="relative inline-flex h-6 w-11 items-center rounded-full peer bg-gray-200 peer-checked:bg-primary transition-colors cursor-pointer">
                                    <span class="inline-block h-4 w-4 transform rounded-full bg-white transition-transform peer-checked:translate-x-6"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ‰ªªÂä°ÁÆ°ÁêÜ -->
                    <div class="glass-card p-6 glass-hover">
                        <h3 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
                            <i class="fa fa-tasks text-green-500 mr-2"></i>‰ªªÂä°ÁÆ°ÁêÜ
                        </h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                <div>
                                    <label class="text-sm font-medium text-gray-700">Ëá™Âä®ÂøΩÁï•Êó∂Èó¥ÂÜ≤Á™Å</label>
                                    <p class="text-xs text-gray-500">Ê∑ªÂä†‰ªªÂä°Êó∂Â¶ÇÊûúÊ£ÄÊµãÂà∞Êó∂Èó¥ÂÜ≤Á™ÅÔºåËá™Âä®ÂøΩÁï•ÂÜ≤Á™ÅÁªßÁª≠ÂàõÂª∫</p>
                                </div>
                                <input type="checkbox" class="sr-only peer" id="auto-ignore-conflicts">
                                <label for="auto-ignore-conflicts" class="relative inline-flex h-6 w-11 items-center rounded-full peer bg-gray-200 peer-checked:bg-primary transition-colors cursor-pointer">
                                    <span class="inline-block h-4 w-4 transform rounded-full bg-white transition-transform peer-checked:translate-x-6"></span>
                                </label>
                            </div>
                            <p class="text-sm text-gray-600">Ê∏ÖÁêÜÈÄæÊúüÂíåÂ∑≤ÂÆåÊàêÁöÑ‰ªªÂä°Ôºå‰øùÊåÅ‰ªªÂä°ÂàóË°®Êï¥Ê¥Å</p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <button id="delete-overdue-tasks-btn" class="px-4 py-3 bg-orange-100 text-orange-700 rounded-xl hover:bg-orange-200 transition-smooth font-medium flex items-center justify-center">
                                    <i class="fa fa-trash-o mr-2"></i>Âà†Èô§ÈÄæÊúü‰ªªÂä°
                                </button>
                                <button id="clear-completed-tasks-btn" class="px-4 py-3 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-smooth font-medium flex items-center justify-center">
                                    <i class="fa fa-broom mr-2"></i>Ê∏ÖÁêÜÂ∑≤ÂÆåÊàê
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Â∑•‰ΩúÊó∂Èó¥ -->
                    <div class="glass-card p-6 glass-hover">
                        <h3 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
                            <i class="fa fa-clock-o text-purple-500 mr-2"></i>Â∑•‰ΩúÊó∂Èó¥
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label for="work-hours-start" class="block text-sm font-medium text-gray-700 mb-2">Â∑•‰ΩúÊó∂Èó¥ÂºÄÂßã</label>
                                <input type="time" id="work-hours-start" value="09:00" class="w-full px-4 py-3 rounded-xl border border-gray-300 transition-smooth focus-ring">
                            </div>
                            <div>
                                <label for="work-hours-end" class="block text-sm font-medium text-gray-700 mb-2">Â∑•‰ΩúÊó∂Èó¥ÁªìÊùü</label>
                                <input type="time" id="work-hours-end" value="18:00" class="w-full px-4 py-3 rounded-xl border border-gray-300 transition-smooth focus-ring">
                            </div>
                        </div>
                    </div>
                    
                    <!-- ÁπÅÂøôÊó∂Èó¥ÊÆµ -->
                    <div class="glass-card p-6 glass-hover">
                        <h3 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
                            <i class="fa fa-calendar-times text-red-500 mr-2"></i>ÁπÅÂøôÊó∂Èó¥ÊÆµ
                        </h3>
                        <div class="space-y-4">
                            <p class="text-sm text-gray-600">ËÆæÁΩÆÊÇ®ÁπÅÂøôÁöÑÊó∂Èó¥ÊÆµÔºåÁ≥ªÁªüÂ∞Ü‰∏ç‰ºöÂú®Ëøô‰∫õÊó∂Èó¥ÊÆµÂÜÖËá™Âä®ÂÆâÊéíÊñ∞‰ªªÂä°</p>
                            <div id="busy-time-slots" class="space-y-2">
                                <!-- ÁπÅÂøôÊó∂Èó¥ÊÆµÂ∞ÜÂä®ÊÄÅÊ∑ªÂä†Âà∞ËøôÈáå -->
                            </div>
                            <button id="add-busy-time-btn" class="w-full px-4 py-3 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-smooth">
                                <i class="fa fa-plus mr-2"></i>Ê∑ªÂä†ÁπÅÂøôÊó∂Èó¥ÊÆµ
                            </button>
                        </div>
                    </div>
                    
                    <!-- Êó∂Èó¥ÂÖ≥ÈîÆËØçËÆæÁΩÆ -->
                    <div class="glass-card p-6 glass-hover">
                        <h3 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
                            <i class="fa fa-keyboard text-indigo-500 mr-2"></i>Êó∂Èó¥ÂÖ≥ÈîÆËØçËÆæÁΩÆ
                        </h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Êó©Êô®Êó∂Èó¥ÊÆµ</label>
                                <div class="flex space-x-3">
                                    <input type="text" id="morning-keywords" placeholder="Â¶ÇÔºöÊó©‰∏ä„ÄÅ‰∏äÂçà„ÄÅÊ∏ÖÊô®" 
                                        class="flex-1 px-4 py-3 rounded-xl border border-gray-300 transition-smooth focus-ring">
                                    <input type="time" id="morning-default-time" value="09:00" 
                                        class="px-4 py-3 rounded-xl border border-gray-300 transition-smooth focus-ring">
                                </div>
                                <p class="text-xs text-gray-500 mt-2">ÂÖ≥ÈîÆËØçÁî®ÈÄóÂè∑ÂàÜÈöîÔºåÂè≥‰æß‰∏∫ÈªòËÆ§Êó∂Èó¥</p>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">‰∏ãÂçàÊó∂Èó¥ÊÆµ</label>
                                <div class="flex space-x-3">
                                    <input type="text" id="afternoon-keywords" placeholder="Â¶ÇÔºö‰∏ãÂçà„ÄÅÂçàÂêé" 
                                        class="flex-1 px-4 py-3 rounded-xl border border-gray-300 transition-smooth focus-ring">
                                    <input type="time" id="afternoon-default-time" value="14:00" 
                                        class="px-4 py-3 rounded-xl border border-gray-300 transition-smooth focus-ring">
                                </div>
                                <p class="text-xs text-gray-500 mt-2">ÂÖ≥ÈîÆËØçÁî®ÈÄóÂè∑ÂàÜÈöîÔºåÂè≥‰æß‰∏∫ÈªòËÆ§Êó∂Èó¥</p>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Êôö‰∏äÊó∂Èó¥ÊÆµ</label>
                                <div class="flex space-x-3">
                                    <input type="text" id="evening-keywords" placeholder="Â¶ÇÔºöÊôö‰∏ä„ÄÅ‰ªäÊôö„ÄÅÂ§úÈó¥" 
                                        class="flex-1 px-4 py-3 rounded-xl border border-gray-300 transition-smooth focus-ring">
                                    <input type="time" id="evening-default-time" value="19:00" 
                                        class="px-4 py-3 rounded-xl border border-gray-300 transition-smooth focus-ring">
                                </div>
                                <p class="text-xs text-gray-500 mt-2">ÂÖ≥ÈîÆËØçÁî®ÈÄóÂè∑ÂàÜÈöîÔºåÂè≥‰æß‰∏∫ÈªòËÆ§Êó∂Èó¥</p>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Ëá™ÂÆö‰πâÂÖ≥ÈîÆËØç</label>
                                <textarea id="custom-keywords" rows="4" placeholder="Ê∑ªÂä†Ëá™ÂÆö‰πâÊó∂Èó¥ÂÖ≥ÈîÆËØçÔºåÊØèË°å‰∏Ä‰∏™ÔºåÊ†ºÂºèÔºöÂÖ≥ÈîÆËØç=Êó∂Èó¥&#10;‰æãÂ¶ÇÔºö&#10;ÂçàÈ•≠=12:00&#10;ÊôöÈ•≠=18:30&#10;Êô®ÁªÉ=07:00" 
                                    class="w-full px-4 py-3 rounded-xl border border-gray-300 transition-smooth focus-ring"></textarea>
                                <p class="text-xs text-gray-500 mt-2">ÊØèË°å‰∏Ä‰∏™ÂÖ≥ÈîÆËØçÔºåÊ†ºÂºèÔºöÂÖ≥ÈîÆËØç=Êó∂Èó¥</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ‰øùÂ≠òÊåâÈíÆ -->
                    <div class="flex justify-center">
                        <button id="save-settings-btn" class="px-8 py-3 bg-primary text-white rounded-xl hover:bg-primary/90 micro-interaction transition-bounce text-lg font-medium">
                            <i class="fa fa-save mr-2"></i>‰øùÂ≠òËÆæÁΩÆ
                        </button>
                    </div>
                </div>
            </div>
        </aside>

    <!-- ËÆæÁΩÆÂºπÁ™ó -->
    <div id="settingsModal" class="fixed inset-0 z-50 flex items-center justify-center hidden settings-performance-mode">
        <div class="absolute inset-0 bg-black bg-opacity-30 backdrop-blur-sm" onclick="closeSettingsModal()"></div>
        <div class="relative glass-card rounded-2xl shadow-lg w-full max-w-4xl mx-4 max-h-[90vh] overflow-hidden fade-in-up transform transition-smooth scale-95 opacity-0" id="settingsModalContent">
            <div class="sticky top-0 bg-white/95 backdrop-blur-sm border-b border-gray-200 p-6 z-10">
                <div class="flex justify-between items-center">
                    <h2 class="text-2xl font-bold text-gray-800 flex items-center">
                        <i class="fas fa-cog mr-3 text-blue-500"></i>
                        <span data-i18n="settingsTitle">ËÆæÁΩÆ</span>
                    </h2>
                    <button onclick="closeSettingsModal()" class="text-gray-500 hover:text-gray-700 transition-colors">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            
            <div class="p-6 overflow-y-auto max-h-[calc(90vh-120px)]">
                <!-- ËØ≠Ë®ÄËÆæÁΩÆ -->
                <div class="glass-card p-6 glass-hover mb-6">
                    <h3 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
                        <i class="fa fa-globe text-indigo-500 mr-2"></i>
                        <span data-i18n="settings.language.title">ËØ≠Ë®ÄËÆæÁΩÆ</span>
                    </h3>
                    <div class="space-y-4">
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                            <div>
                                <label class="text-sm font-medium text-gray-700" data-i18n="settings.language.interface">ÁïåÈù¢ËØ≠Ë®Ä</label>
                                <p class="text-xs text-gray-500" data-i18n="settings.language.description">ÈÄâÊã©Â∫îÁî®Á®ãÂ∫èÁöÑÊòæÁ§∫ËØ≠Ë®Ä</p>
                                <div class="mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded-lg">
                                    <p class="text-xs text-yellow-800 font-medium">‚ö†Ô∏è Ë≠¶ÂëäÔºöËØ≠Ë®ÄÂàáÊç¢ÂÆπÊòìËß¶ÂèëbugÔºåËØ∑Ë∞®ÊÖéÁÇπÂáªÔºÅ</p>
                                    <p class="text-xs text-yellow-600">Warning: Language switching may cause bugs, click with caution!</p>
                                </div>
                            </div>
                            <div class="flex space-x-2">
                                <button id="lang-zh-btn" class="px-4 py-2 text-sm bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition-smooth font-medium">
                                    <span data-i18n="settings.language.chinese">‰∏≠Êñáüá®üá≥</span>
                                </button>
                                <button id="lang-en-btn" class="px-4 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-smooth font-medium">
                                    <span data-i18n="settings.language.english">Englishüá∫üá∏</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ÈÄöÁü•ËÆæÁΩÆ -->
                <div class="glass-card p-6 glass-hover mb-6">
                    <h3 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
                        <i class="fa fa-bell text-blue-500 mr-2"></i>
                        <span data-i18n="settings.notifications.title">ÈÄöÁü•ËÆæÁΩÆ</span>
                    </h3>
                    <div class="space-y-4">
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                            <div>
                                <label class="text-sm font-medium text-gray-700" data-i18n="settings.notifications.browser">ÊµèËßàÂô®ÈÄöÁü•</label>
                                <p class="text-xs text-gray-500" data-i18n="settings.notifications.browserDesc">ÂêØÁî®Ê°åÈù¢ÈÄöÁü•ÊèêÈÜí</p>
                            </div>
                            <div class="flex items-center space-x-2">
                                <button id="request-notification-permission-modal" class="px-3 py-1 text-xs bg-primary text-white rounded-lg hover:bg-primary/90 transition-smooth" data-i18n="settings.notifications.requestPermission">
                                    ËØ∑Ê±ÇÊùÉÈôê
                                </button>
                                <div class="w-2 h-2 rounded-full" id="notification-status-modal"></div>
                            </div>
                        </div>
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                            <div>
                                <label class="text-sm font-medium text-gray-700" data-i18n="settings.notifications.taskReminder">‰ªªÂä°ÊèêÈÜí</label>
                                <p class="text-xs text-gray-500" data-i18n="settings.notifications.taskReminderDesc">‰ªªÂä°Âà∞ÊúüÂâçËá™Âä®ÊèêÈÜí</p>
                            </div>
                            <input type="checkbox" class="sr-only peer" checked id="notification-reminder-modal">
                            <label for="notification-reminder-modal" class="relative inline-flex h-6 w-11 items-center rounded-full peer bg-gray-200 peer-checked:bg-primary transition-colors cursor-pointer">
                                <span class="inline-block h-4 w-4 transform rounded-full bg-white transition-transform peer-checked:translate-x-6"></span>
                            </label>
                        </div>
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                            <div>
                                <label class="text-sm font-medium text-gray-700" data-i18n="settings.notifications.sound">Â£∞Èü≥ÊèêÈÜí</label>
                                <p class="text-xs text-gray-500" data-i18n="settings.notifications.soundDesc">Êí≠ÊîæÊèêÈÜíÂ£∞Èü≥</p>
                            </div>
                            <input type="checkbox" class="sr-only peer" checked id="notification-sound-modal">
                            <label for="notification-sound-modal" class="relative inline-flex h-6 w-11 items-center rounded-full peer bg-gray-200 peer-checked:bg-primary transition-colors cursor-pointer">
                                <span class="inline-block h-4 w-4 transform rounded-full bg-white transition-transform peer-checked:translate-x-6"></span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- ‰ªªÂä°ÁÆ°ÁêÜ -->
                <div class="glass-card p-6 glass-hover mb-6">
                    <h3 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
                        <i class="fa fa-tasks text-green-500 mr-2"></i>
                        <span data-i18n="settings.taskManagement.title">‰ªªÂä°ÁÆ°ÁêÜ</span>
                    </h3>
                    <div class="space-y-4">
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                            <div>
                                <label class="text-sm font-medium text-gray-700">Ëá™Âä®ÂøΩÁï•Êó∂Èó¥ÂÜ≤Á™Å</label>
                                <p class="text-xs text-gray-500">Ê∑ªÂä†‰ªªÂä°Êó∂Â¶ÇÊûúÊ£ÄÊµãÂà∞Êó∂Èó¥ÂÜ≤Á™ÅÔºåËá™Âä®ÂøΩÁï•ÂÜ≤Á™ÅÁªßÁª≠ÂàõÂª∫</p>
                            </div>
                            <input type="checkbox" class="sr-only peer" id="auto-ignore-conflicts-modal">
                            <label for="auto-ignore-conflicts-modal" class="relative inline-flex h-6 w-11 items-center rounded-full peer bg-gray-200 peer-checked:bg-primary transition-colors cursor-pointer">
                                <span class="inline-block h-4 w-4 transform rounded-full bg-white transition-transform peer-checked:translate-x-6"></span>
                            </label>
                        </div>
                        <p class="text-sm text-gray-600" data-i18n="settings.taskManagement.description">Ê∏ÖÁêÜÈÄæÊúüÂíåÂ∑≤ÂÆåÊàêÁöÑ‰ªªÂä°Ôºå‰øùÊåÅ‰ªªÂä°ÂàóË°®Êï¥Ê¥Å</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <button id="delete-overdue-tasks-btn-modal" class="px-4 py-3 bg-orange-100 text-orange-700 rounded-xl hover:bg-orange-200 transition-smooth font-medium flex items-center justify-center">
                                <i class="fa fa-trash-o mr-2"></i>
                                <span data-i18n="settings.taskManagement.deleteOverdue">Âà†Èô§ÈÄæÊúü‰ªªÂä°</span>
                            </button>
                            <button id="clear-completed-tasks-btn-modal" class="px-4 py-3 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-smooth font-medium flex items-center justify-center">
                                <i class="fa fa-broom mr-2"></i>
                                <span data-i18n="settings.taskManagement.clearCompleted">Ê∏ÖÁêÜÂ∑≤ÂÆåÊàê</span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Â∑•‰ΩúÊó∂Èó¥ -->
                <div class="glass-card p-6 glass-hover mb-6">
                    <h3 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
                        <i class="fa fa-clock-o text-purple-500 mr-2"></i>
                        <span data-i18n="settings.workHours.title">Â∑•‰ΩúÊó∂Èó¥</span>
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="work-hours-start-modal" class="block text-sm font-medium text-gray-700 mb-2" data-i18n="settings.workHours.start">Â∑•‰ΩúÊó∂Èó¥ÂºÄÂßã</label>
                            <input type="time" id="work-hours-start-modal" value="09:00" class="w-full px-4 py-3 rounded-xl border border-gray-300 transition-smooth focus-ring">
                        </div>
                        <div>
                            <label for="work-hours-end-modal" class="block text-sm font-medium text-gray-700 mb-2" data-i18n="settings.workHours.end">Â∑•‰ΩúÊó∂Èó¥ÁªìÊùü</label>
                            <input type="time" id="work-hours-end-modal" value="18:00" class="w-full px-4 py-3 rounded-xl border border-gray-300 transition-smooth focus-ring">
                        </div>
                    </div>
                </div>
                
                <!-- ÁπÅÂøôÊó∂Èó¥ÊÆµ -->
                <div class="glass-card p-6 glass-hover mb-6">
                    <h3 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
                        <i class="fa fa-calendar-times text-red-500 mr-2"></i>
                        <span data-i18n="settings.busyTime.title">ÁπÅÂøôÊó∂Èó¥ÊÆµ</span>
                    </h3>
                    <div class="space-y-4">
                        <p class="text-sm text-gray-600" data-i18n="settings.busyTime.description">ËÆæÁΩÆÊÇ®ÁπÅÂøôÁöÑÊó∂Èó¥ÊÆµÔºåÁ≥ªÁªüÂ∞Ü‰∏ç‰ºöÂú®Ëøô‰∫õÊó∂Èó¥ÊÆµÂÜÖËá™Âä®ÂÆâÊéíÊñ∞‰ªªÂä°</p>
                        <div id="busy-time-slots-modal" class="space-y-2">
                            <!-- ÁπÅÂøôÊó∂Èó¥ÊÆµÂ∞ÜÂä®ÊÄÅÊ∑ªÂä†Âà∞ËøôÈáå -->
                        </div>
                        <button id="add-busy-time-btn-modal" class="w-full px-4 py-3 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-smooth">
                            <i class="fa fa-plus mr-2"></i>
                            <span data-i18n="settings.busyTime.add">Ê∑ªÂä†ÁπÅÂøôÊó∂Èó¥ÊÆµ</span>
                        </button>
                    </div>
                </div>
                
                <!-- Êó∂Èó¥ÂÖ≥ÈîÆËØçËÆæÁΩÆ -->
                <div class="glass-card p-6 glass-hover mb-6">
                    <h3 class="text-lg font-medium text-gray-700 mb-4 flex items-center">
                        <i class="fa fa-keyboard text-indigo-500 mr-2"></i>
                        <span data-i18n="settings.timeKeywords.title">Êó∂Èó¥ÂÖ≥ÈîÆËØçËÆæÁΩÆ</span>
                    </h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2" data-i18n="settings.timeKeywords.morning">Êó©Êô®Êó∂Èó¥ÊÆµ</label>
                            <div class="flex space-x-3">
                                <input type="text" id="morning-keywords-modal" placeholder="Â¶ÇÔºöÊó©‰∏ä„ÄÅ‰∏äÂçà„ÄÅÊ∏ÖÊô®" 
                                    class="flex-1 px-4 py-3 rounded-xl border border-gray-300 transition-smooth focus-ring">
                                <input type="time" id="morning-default-time-modal" value="09:00" 
                                    class="px-4 py-3 rounded-xl border border-gray-300 transition-smooth focus-ring">
                            </div>
                            <p class="text-xs text-gray-500 mt-2" data-i18n="settings.timeKeywords.keywordDesc">ÂÖ≥ÈîÆËØçÁî®ÈÄóÂè∑ÂàÜÈöîÔºåÂè≥‰æß‰∏∫ÈªòËÆ§Êó∂Èó¥</p>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2" data-i18n="settings.timeKeywords.afternoon">‰∏ãÂçàÊó∂Èó¥ÊÆµ</label>
                            <div class="flex space-x-3">
                                <input type="text" id="afternoon-keywords-modal" placeholder="Â¶ÇÔºö‰∏ãÂçà„ÄÅÂçàÂêé" 
                                    class="flex-1 px-4 py-3 rounded-xl border border-gray-300 transition-smooth focus-ring">
                                <input type="time" id="afternoon-default-time-modal" value="14:00" 
                                    class="px-4 py-3 rounded-xl border border-gray-300 transition-smooth focus-ring">
                            </div>
                            <p class="text-xs text-gray-500 mt-2" data-i18n="settings.timeKeywords.keywordDesc">ÂÖ≥ÈîÆËØçÁî®ÈÄóÂè∑ÂàÜÈöîÔºåÂè≥‰æß‰∏∫ÈªòËÆ§Êó∂Èó¥</p>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2" data-i18n="settings.timeKeywords.evening">Êôö‰∏äÊó∂Èó¥ÊÆµ</label>
                            <div class="flex space-x-3">
                                <input type="text" id="evening-keywords-modal" placeholder="Â¶ÇÔºöÊôö‰∏ä„ÄÅ‰ªäÊôö„ÄÅÂ§úÈó¥" 
                                    class="flex-1 px-4 py-3 rounded-xl border border-gray-300 transition-smooth focus-ring">
                                <input type="time" id="evening-default-time-modal" value="19:00" 
                                    class="px-4 py-3 rounded-xl border border-gray-300 transition-smooth focus-ring">
                            </div>
                            <p class="text-xs text-gray-500 mt-2" data-i18n="settings.timeKeywords.keywordDesc">ÂÖ≥ÈîÆËØçÁî®ÈÄóÂè∑ÂàÜÈöîÔºåÂè≥‰æß‰∏∫ÈªòËÆ§Êó∂Èó¥</p>
                        </div>
                        
                        <!-- Â§çÂêàÂÖ≥ÈîÆËØçËØ¥Êòé -->
                        <div class="bg-indigo-50 rounded-xl p-4 border border-indigo-200">
                            <h4 class="text-sm font-medium text-indigo-800 mb-2 flex items-center">
                                <i class="fa fa-lightbulb text-indigo-600 mr-2"></i>
                                Êô∫ËÉΩÂ§çÂêàÂÖ≥ÈîÆËØçËØÜÂà´
                            </h4>
                            <p class="text-xs text-indigo-700 mb-3">Á≥ªÁªüËá™Âä®ËØÜÂà´‰ª•‰∏ãÊòéÂ§©Áõ∏ÂÖ≥ÁöÑÂ§çÂêàÂÖ≥ÈîÆËØçÔºåÊó†ÈúÄÊâãÂä®ÈÖçÁΩÆÔºö</p>
                            <div class="grid grid-cols-2 gap-2 text-xs">
                                <div class="bg-white rounded-lg p-2 border border-indigo-100">
                                    <span class="font-medium text-indigo-600">Êó©Êô®Êó∂ÊÆµÔºö</span>
                                    <span class="text-gray-600">ÊòéÊó©„ÄÅÊòéÊô®„ÄÅÊòé‰∏äÂçà</span>
                                </div>
                                <div class="bg-white rounded-lg p-2 border border-indigo-100">
                                    <span class="font-medium text-indigo-600">‰∏≠ÂçàÊó∂ÊÆµÔºö</span>
                                    <span class="text-gray-600">ÊòéÂçà„ÄÅÊòé‰∏≠Âçà</span>
                                </div>
                                <div class="bg-white rounded-lg p-2 border border-indigo-100">
                                    <span class="font-medium text-indigo-600">‰∏ãÂçàÊó∂ÊÆµÔºö</span>
                                    <span class="text-gray-600">Êòé‰∏ãÂçà„ÄÅÊòéÂçàÂêé</span>
                                </div>
                                <div class="bg-white rounded-lg p-2 border border-indigo-100">
                                    <span class="font-medium text-indigo-600">Êôö‰∏äÊó∂ÊÆµÔºö</span>
                                    <span class="text-gray-600">ÊòéÊôö„ÄÅÊòéÂ§úÊôö„ÄÅÊòéÂ§úÈó¥</span>
                                </div>
                                <div class="bg-white rounded-lg p-2 border border-indigo-100">
                                    <span class="font-medium text-indigo-600">Ê∑±Â§úÊó∂ÊÆµÔºö</span>
                                    <span class="text-gray-600">ÊòéÂ§ú„ÄÅÊòéÂáåÊô®„ÄÅÊòéÊ∑±Â§ú</span>
                                </div>
                                <div class="bg-white rounded-lg p-2 border border-indigo-100">
                                    <span class="font-medium text-indigo-600">‰ΩøÁî®Á§∫‰æãÔºö</span>
                                    <span class="text-gray-600">"ÊòéÊó©ÂºÄ‰ºö"„ÄÅ"ÊòéÊôöËÅöÈ§ê"</span>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2" data-i18n="settings.timeKeywords.custom">Ëá™ÂÆö‰πâÂÖ≥ÈîÆËØç</label>
                            <textarea id="custom-keywords-modal" rows="4" placeholder="Ê∑ªÂä†Ëá™ÂÆö‰πâÊó∂Èó¥ÂÖ≥ÈîÆËØçÔºåÊØèË°å‰∏Ä‰∏™ÔºåÊ†ºÂºèÔºöÂÖ≥ÈîÆËØç=Êó∂Èó¥&#10;‰æãÂ¶ÇÔºö&#10;ÂçàÈ•≠=12:00&#10;ÊôöÈ•≠=18:30&#10;Êô®ÁªÉ=07:00" 
                                class="w-full px-4 py-3 rounded-xl border border-gray-300 transition-smooth focus-ring"></textarea>
                            <p class="text-xs text-gray-500 mt-2" data-i18n="settings.timeKeywords.customDesc">ÊØèË°å‰∏Ä‰∏™ÂÖ≥ÈîÆËØçÔºåÊ†ºÂºèÔºöÂÖ≥ÈîÆËØç=Êó∂Èó¥</p>
                        </div>
                    </div>
                </div>
                
                <!-- GitHub ‰∏ªÈ°µÈìæÊé• -->
                <div class="glass-card p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                        <i class="fa fa-github text-primary mr-2"></i>
                        <span data-i18n="settings.github.title">GitHub ‰∏ªÈ°µ</span>
                    </h3>
                    <div class="space-y-4">
                        <p class="text-gray-600" data-i18n="settings.github.description">ËÆøÈóÆÊàë‰ª¨ÁöÑ GitHub ‰∏ªÈ°µÔºåËé∑ÂèñÊúÄÊñ∞ÁâàÊú¨„ÄÅÊèê‰∫§ÈóÆÈ¢òÊàñÂèÇ‰∏éÂºÄÂèë</p>
                        <div class="flex justify-center">
                            <a href="https://github.com/suducat/sudulist" target="_blank" rel="noopener noreferrer" 
                               class="inline-flex items-center px-6 py-3 bg-gray-900 text-white rounded-xl hover:bg-gray-800 micro-interaction transition-bounce font-medium">
                                <i class="fa fa-github mr-2"></i>
                                <span data-i18n="settings.github.visit">ËÆøÈóÆ GitHub</span>
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- ‰øùÂ≠òÊåâÈíÆ -->
                <div class="flex justify-center">
                    <button id="save-settings-btn-modal" class="px-8 py-3 bg-primary text-white rounded-xl hover:bg-primary/90 micro-interaction transition-bounce text-lg font-medium">
                        <i class="fa fa-save mr-2"></i>
                        <span data-i18n="settings.save">‰øùÂ≠òËÆæÁΩÆ</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ‰ªªÂä°ËØ¶ÊÉÖÊ®°ÊÄÅÊ°Ü -->
    <div id="task-detail-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden">
        <div class="absolute inset-0 bg-black bg-opacity-30 backdrop-blur-sm"></div>
        <div class="relative glass-card rounded-2xl shadow-lg w-full max-w-md mx-4 fade-in-up transform transition-smooth scale-95 opacity-0" id="modal-content">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold">‰ªªÂä°ËØ¶ÊÉÖ</h3>
                    <button id="close-modal-btn" class="icon-btn micro-interaction">
                        <i class="fa fa-times text-gray-600"></i>
                    </button>
                </div>
                <form id="task-detail-form">
                    <div class="space-y-4">
                        <div>
                            <label for="task-title" class="block text-sm font-medium text-gray-700">‰ªªÂä°ÂêçÁß∞</label>
                            <input type="text" id="task-title" class="w-full px-4 py-2.5 rounded-xl border border-gray-300 transition-smooth focus-ring">
                        </div>
                        <div>
                            <label for="task-description" class="block text-sm font-medium text-gray-700">‰ªªÂä°ÊèèËø∞</label>
                            <textarea id="task-description" rows="3" class="w-full px-4 py-2.5 rounded-xl border border-gray-300 transition-smooth focus-ring"></textarea>
                        </div>
                        <div>
                            <label for="task-start-time" class="block text-sm font-medium text-gray-700">ÂºÄÂßãÊó∂Èó¥</label>
                            <input type="datetime-local" id="task-start-time" class="w-full px-4 py-2.5 rounded-xl border border-gray-300 transition-smooth focus-ring">
                        </div>
                        <div>
                            <label for="task-priority" class="block text-sm font-medium text-gray-700">‰ºòÂÖàÁ∫ß</label>
                            <select id="task-priority" class="w-full px-4 py-2.5 rounded-xl border border-gray-300 transition-smooth focus-ring">
                                <option value="low">‰Ωé</option>
                                <option value="medium" selected>‰∏≠</option>
                                <option value="high">È´ò</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‰ªªÂä°ÊèêÈÜí</label>
                            <div class="space-y-2">
                                <div class="flex items-center">
                                    <input type="checkbox" id="task-reminder-enabled" class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded transition-smooth">
                                    <label for="task-reminder-enabled" class="ml-2 block text-sm text-gray-700">ÂêØÁî®ÊèêÈÜí</label>
                                </div>
                                <div id="reminder-settings" class="hidden space-y-2 pl-6">
                                    <div>
                                        <label for="reminder-time" class="block text-xs font-medium text-gray-600">ÊèêÈÜíÊó∂Èó¥</label>
                                        <input type="datetime-local" id="reminder-time" class="w-full px-3 py-2 rounded-lg border border-gray-300 transition-smooth focus-ring text-sm">
                                    </div>
                                    <div>
                                        <label for="reminder-advance" class="block text-xs font-medium text-gray-600">ÊèêÂâçÊèêÈÜí</label>
                                        <select id="reminder-advance" class="w-full px-3 py-2 rounded-lg border border-gray-300 transition-smooth focus-ring text-sm">
                                            <option value="0">ÂáÜÊó∂ÊèêÈÜí</option>
                                            <option value="5" selected>ÊèêÂâç5ÂàÜÈíü</option>
                                            <option value="15">ÊèêÂâç15ÂàÜÈíü</option>
                                            <option value="30">ÊèêÂâç30ÂàÜÈíü</option>
                                            <option value="60">ÊèêÂâç1Â∞èÊó∂</option>
                                            <option value="1440">ÊèêÂâç1Â§©</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center">
                            <input type="checkbox" id="task-completed" class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded transition-smooth">
                            <label for="task-completed" class="ml-2 block text-sm text-gray-700">‰ªªÂä°Â∑≤ÂÆåÊàê</label>
                        </div>
                    </div>
                    <div class="mt-6 flex justify-end space-x-3">
                        <button type="button" id="delete-task-btn" class="btn px-4 py-2 border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition-smooth micro-interaction">
                            Âà†Èô§
                        </button>
                        <button type="submit" class="btn px-4 py-2 bg-primary text-white rounded-xl hover:bg-primary/90 transition-bounce micro-interaction">
                            ‰øùÂ≠ò
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Á°ÆËÆ§Âà†Èô§Ê®°ÊÄÅÊ°Ü -->
    <div id="delete-confirm-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden">
        <div class="absolute inset-0 bg-black bg-opacity-30 backdrop-blur-sm"></div>
        <div class="relative glass-card rounded-2xl shadow-lg w-full max-w-md mx-4 fade-in-up transform transition-smooth scale-95 opacity-0" id="delete-modal-content">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold flex items-center text-danger">
                        <i class="fa fa-exclamation-circle mr-2"></i><span data-i18n="modal.deleteConfirm.title">Á°ÆËÆ§Âà†Èô§</span>
                    </h3>
                    <button id="close-delete-modal-btn" class="icon-btn micro-interaction">
                        <i class="fa fa-times text-gray-600"></i>
                    </button>
                </div>
                <div>
                    <p class="text-gray-700 mb-6" data-i18n="modal.deleteConfirm.message">Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™‰ªªÂä°ÂêóÔºüÊ≠§Êìç‰ΩúÊó†Ê≥ïÊí§ÈîÄ„ÄÇ</p>
                    <div class="flex space-x-3">
                        <button id="cancel-delete-btn" class="flex-1 btn px-4 py-2 border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition-smooth micro-interaction" data-i18n="modal.deleteConfirm.cancel">
                            ÂèñÊ∂à
                        </button>
                        <button id="confirm-delete-btn" class="flex-1 btn px-4 py-2 bg-danger text-white rounded-xl hover:bg-danger/90 transition-bounce micro-interaction" data-i18n="modal.deleteConfirm.confirm">
                            Á°ÆËÆ§Âà†Èô§
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Êó∂Èó¥ÂÜ≤Á™ÅÊèêÁ§∫Ê®°ÊÄÅÊ°Ü -->
    <div id="conflict-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden">
        <div class="absolute inset-0 bg-black bg-opacity-30 backdrop-blur-sm"></div>
        <div class="relative glass-card rounded-2xl shadow-lg w-full max-w-md mx-4 fade-in-up transform transition-smooth scale-95 opacity-0" id="conflict-modal-content">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold flex items-center">
                        <i class="fa fa-exclamation-triangle text-warning mr-2"></i>Êó∂Èó¥ÂÜ≤Á™Å
                    </h3>
                    <button id="close-conflict-modal-btn" class="icon-btn micro-interaction">
                        <i class="fa fa-times text-gray-600"></i>
                    </button>
                </div>
                <div>
                    <p class="text-gray-700 mb-4">Ê£ÄÊµãÂà∞‰ª•‰∏ã‰ªªÂä°‰∏éÊñ∞‰ªªÂä°Êó∂Èó¥ÂÜ≤Á™ÅÔºö</p>
                    <div id="conflicting-tasks-list" class="space-y-3 mb-6 max-h-60 overflow-y-auto pr-2">
                        <!-- ÂÜ≤Á™Å‰ªªÂä°Â∞ÜÂú®ËøôÈáåÊòæÁ§∫ -->
                    </div>
                    <div class="flex space-x-3">
                        <button id="resolve-conflict-btn" class="flex-1 btn px-4 py-2 bg-primary text-white rounded-xl hover:bg-primary/90 transition-bounce micro-interaction">
                            Ëá™Âä®Ë∞ÉÊï¥Êó∂Èó¥
                        </button>
                        <button id="ignore-conflict-btn" class="flex-1 btn px-4 py-2 border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition-smooth micro-interaction">
                            ÂøΩÁï•ÂÜ≤Á™Å
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ÁºñËæëÂßìÂêçÊ®°ÊÄÅÊ°Ü -->
    <div id="edit-username-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden">
        <div class="absolute inset-0 bg-black bg-opacity-30 backdrop-blur-sm"></div>
        <div class="relative glass-card rounded-2xl shadow-lg w-full max-w-md mx-4 fade-in-up transform transition-smooth scale-95 opacity-0" id="edit-username-modal-content">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold flex items-center">
                        <i class="fa fa-user-edit text-primary mr-2"></i><span data-i18n="modal.editUsername.title">ÁºñËæëÂßìÂêç</span>
                    </h3>
                    <button id="close-edit-username-btn" class="icon-btn micro-interaction">
                        <i class="fa fa-times text-gray-600"></i>
                    </button>
                </div>
                <form id="edit-username-form">
                    <div class="mb-6">
                        <label for="username-input" class="block text-sm font-medium text-gray-700 mb-2" data-i18n="modal.editUsername.yourName">ÊÇ®ÁöÑÂßìÂêç</label>
                        <input type="text" id="username-input" data-i18n-placeholder="modal.editUsername.placeholder" placeholder="ËØ∑ËæìÂÖ•ÊÇ®ÁöÑÂßìÂêç" 
                            class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-primary focus:border-transparent transition-all-300"
                            maxlength="20">
                        <p class="text-xs text-gray-500 mt-1" data-i18n="modal.editUsername.description">ÂßìÂêçÂ∞ÜÊòæÁ§∫Âú®Áî®Êà∑Â§¥ÂÉè‰∏≠</p>
                    </div>
                    <div class="flex space-x-3">
                        <button type="button" id="cancel-edit-username-btn" class="flex-1 btn px-4 py-2 border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition-all-300" data-i18n="modal.editUsername.cancel">
                            ÂèñÊ∂à
                        </button>
                        <button type="submit" class="flex-1 btn px-4 py-2 bg-primary text-white rounded-xl hover:bg-primary/90 transition-all-300" data-i18n="modal.editUsername.save">
                            ‰øùÂ≠ò
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Ëá™ÂÆö‰πâÁ°ÆËÆ§ÂØπËØùÊ°Ü -->
    <div id="custom-confirm-dialog" class="fixed inset-0 z-50 flex items-center justify-center hidden">
        <div class="absolute inset-0 bg-black bg-opacity-30 backdrop-blur-sm" onclick="hideCustomConfirm()"></div>
        <div class="relative glass-card rounded-2xl shadow-lg w-full max-w-md mx-4 fade-in-up transform transition-smooth scale-95 opacity-0" id="custom-confirm-content">
            <div class="p-6">
                <div class="flex items-center mb-4">
                    <div id="custom-confirm-icon" class="flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center mr-4">
                        <i id="custom-confirm-icon-i" class="fa fa-question text-white text-xl"></i>
                    </div>
                    <div>
                        <h3 id="custom-confirm-title" class="text-lg font-bold text-gray-900">Á°ÆËÆ§Êìç‰Ωú</h3>
                        <p id="custom-confirm-message" class="text-sm text-gray-600 mt-1">ÊÇ®Á°ÆÂÆöË¶ÅÊâßË°åÊ≠§Êìç‰ΩúÂêóÔºü</p>
                    </div>
                </div>
                <div id="custom-confirm-details" class="mb-6 text-sm text-gray-700 bg-gray-50 rounded-lg p-3 hidden">
                    <!-- ËØ¶ÁªÜ‰ø°ÊÅØÂ∞ÜÂú®ËøôÈáåÊòæÁ§∫ -->
                </div>
                <div class="flex space-x-3">
                    <button id="custom-confirm-cancel" class="flex-1 px-4 py-2 border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition-all-300 font-medium">
                        ÂèñÊ∂à
                    </button>
                    <button id="custom-confirm-ok" class="flex-1 px-4 py-2 bg-primary text-white rounded-xl hover:bg-primary/90 transition-all-300 font-medium">
                        Á°ÆÂÆö
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Ëá™ÂÆö‰πâÊèêÁ§∫ÂØπËØùÊ°Ü -->
    <div id="custom-alert-dialog" class="fixed inset-0 z-50 flex items-center justify-center hidden">
        <div class="absolute inset-0 bg-black bg-opacity-30 backdrop-blur-sm" onclick="hideCustomAlert()"></div>
        <div class="relative glass-card rounded-2xl shadow-lg w-full max-w-md mx-4 fade-in-up transform transition-smooth scale-95 opacity-0" id="custom-alert-content">
            <div class="p-6">
                <div class="flex items-center mb-4">
                    <div id="custom-alert-icon" class="flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center mr-4">
                        <i id="custom-alert-icon-i" class="fa fa-info text-white text-xl"></i>
                    </div>
                    <div>
                        <h3 id="custom-alert-title" class="text-lg font-bold text-gray-900">ÊèêÁ§∫</h3>
                        <p id="custom-alert-message" class="text-sm text-gray-600 mt-1">Êìç‰ΩúÊèêÁ§∫‰ø°ÊÅØ</p>
                    </div>
                </div>
                <div class="flex justify-center">
                    <button id="custom-alert-ok" class="px-6 py-2 bg-primary text-white rounded-xl hover:bg-primary/90 transition-all-300 font-medium">
                        ÊàëÁü•ÈÅì‰∫Ü
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ÈÄöÁü•ÊèêÁ§∫ -->
    <div id="notification" class="fixed bottom-4 right-4 z-50 bg-white rounded-xl shadow-lg p-4 max-w-sm transform translate-y-20 opacity-0 transition-all duration-300 flex items-start">
        <div id="notification-icon" class="flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center mr-3">
            <i id="notification-icon-i" class="fa fa-check text-white"></i>
        </div>
        <div class="flex-grow">
            <h4 id="notification-title" class="text-sm font-medium text-gray-900">ÊàêÂäü</h4>
            <p id="notification-message" class="text-sm text-gray-500 mt-1">Êìç‰ΩúÂ∑≤ÂÆåÊàê</p>
        </div>
        <button id="close-notification" class="ml-4 text-gray-400 hover:text-gray-600">
            <i class="fa fa-times"></i>
        </button>
    </div>

    <script>
        // ËÆæÁΩÆÈ°µÈù¢ÊÄßËÉΩ‰ºòÂåñ - Âä®ÊÄÅÂêØÁî®ÊÄßËÉΩÊ®°Âºè
        function enableSettingsPerformanceMode() {
            // Ê£ÄÊµãÊòØÂê¶‰∏∫ÁßªÂä®ËÆæÂ§áÊàñ‰ΩéÊÄßËÉΩËÆæÂ§á
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            const isLowPerformance = navigator.hardwareConcurrency && navigator.hardwareConcurrency <= 2;
            
            // Â¶ÇÊûúÊòØÁßªÂä®ËÆæÂ§áÊàñ‰ΩéÊÄßËÉΩËÆæÂ§áÔºåËá™Âä®ÂêØÁî®ÊÄßËÉΩÊ®°Âºè
            if (isMobile || isLowPerformance) {
                const settingsModal = document.getElementById('settingsModal');
                const settingsPanel = document.getElementById('settings-panel');
                
                if (settingsModal) {
                    settingsModal.classList.add('settings-performance-mode');
                }
                
                if (settingsPanel) {
                    settingsPanel.classList.add('settings-performance-mode');
                }
                
                console.log('Â∑≤ÂêØÁî®ËÆæÁΩÆÈ°µÈù¢ÊÄßËÉΩÊ®°ÂºèÔºàÁßªÂä®ËÆæÂ§á/‰ΩéÊÄßËÉΩËÆæÂ§áÔºâ');
            }
        }
        
        // ÁõëÂê¨ËÆæÁΩÆÂºπÁ™óÁöÑÊâìÂºÄ/ÂÖ≥Èó≠ÔºåÂä®ÊÄÅÂàáÊç¢ÊÄßËÉΩÊ®°Âºè
        function observeSettingsModal() {
            const settingsModal = document.getElementById('settingsModal');
            if (!settingsModal) return;
            
            // ÂàõÂª∫ËßÇÂØüÂô®Êù•ÁõëÂê¨classÂèòÂåñ
            const observer = new MutationObserver((mutations) => {
                mutations.forEach((mutation) => {
                    if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                        const isOpen = !settingsModal.classList.contains('hidden');
                        
                        if (isOpen) {
                            // ËÆæÁΩÆÂºπÁ™óÊâìÂºÄÊó∂ÔºåÊ£ÄÊµãÊòØÂê¶ÈúÄË¶ÅÂêØÁî®ÊÄßËÉΩÊ®°Âºè
                            enableSettingsPerformanceMode();
                        }
                    }
                });
            });
            
            // ÂºÄÂßãËßÇÂØü
            observer.observe(settingsModal, {
                attributes: true,
                attributeFilter: ['class']
            });
        }
        
        // È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÂàùÂßãÂåñÊÄßËÉΩ‰ºòÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            // Âª∂ËøüÊâßË°åÔºåÁ°Æ‰øùDOMÂÆåÂÖ®Âä†ËΩΩ
            setTimeout(() => {
                observeSettingsModal();
                enableSettingsPerformanceMode();
            }, 100);
        });
        
        // Â§öËØ≠Ë®ÄÈÖçÁΩÆÁ≥ªÁªü
        const i18n = {
            // ÂΩìÂâçËØ≠Ë®Ä
            currentLanguage: 'zh',
            
            // ËØ≠Ë®ÄÈÖçÁΩÆ
            languages: {
                'zh': '‰∏≠Êñá',
                'en': 'English'
            },
            
            // ÊñáÊú¨Êò†Â∞Ñ
            texts: {
                zh: {
                    // Â∫îÁî®Âü∫Á°Ä‰ø°ÊÅØ
                    appName: 'ÈÄüÂ∫¶Ê∏ÖÂçï',
                    appTitle: 'ÈÄüÂ∫¶Ê∏ÖÂçï',
                    appSubtitle: 'ÊûÅÈÄü‰ªªÂä°ÁÆ°ÁêÜ',
                    
                    // Êñ∞ÊâãÊïôÁ®ã
                    tutorialTitle: 'Ê¨¢Ëøé‰ΩøÁî®ÈÄüÂ∫¶Ê∏ÖÂçïÔºÅ',
                    
                    // ÁÅ´ÁÆ≠Ê¨¢Ëøé‰ø°ÊÅØ
                    rocket: {
                        title: 'ÊûÅÈÄüÂºÄÂßã‰Ω†ÁöÑ‰ªªÂä°ÁÆ°ÁêÜÔºÅ',
                        subtitle: '‚ö°Á®ãÂ∫è‰ºöÊô∫ËÉΩËØÜÂà´‰ªªÂä°‰∏≠ÁöÑÊó∂Èó¥Âπ∂ÂÆâÊéí‚ö°'
                    },
                    
                    // Ê¨¢Ëøé‰ø°ÊÅØÂíåÊøÄÂä±ËØ≠Âè•
                    welcomeMessages: {
                        morning: 'Êó©‰∏äÂ•ΩÔºåÂáÜÂ§áÊûÅÈÄüÂÆåÊàê‰ªªÂä°ÔºÅ',
                        afternoon: '‰∏ãÂçàÂ•ΩÔºå‰øùÊåÅ‰∏ìÊ≥®ÔºåÈ´òÊïàÂ∑•‰ΩúÔºÅ',
                        evening: 'Êôö‰∏äÂ•ΩÔºåÂáÜÂ§áÊûÅÈÄüÂÆåÊàê‰ªªÂä°ÔºÅ'
                    },
                    encouragements: [
                        'üöÄ ‰∏ìÊ≥®ÂΩì‰∏ãÔºåÈó™ÁîµËà¨ÊàêÂ∞±Êú™Êù•',
                        '‚ö° ÊØè‰∏Ä‰∏™‰ªªÂä°ÈÉΩÊòØËøõÊ≠•ÁöÑÈò∂Ê¢Ø',
                        'üåü Áõ∏‰ø°Ëá™Â∑±Ôºå‰Ω†ÊòØÊúÄÊ£íÁöÑÔºÅ',
                        'üí™ ÂùöÊåÅÂ∞±ÊòØËÉúÂà©ÔºåÂä†Ê≤πÔºÅ',
                        'üéØ ÁõÆÊ†áÊòéÁ°ÆÔºåË°åÂä®ÊúâÂäõ',
                        '‚ú® ‰ªäÂ§©ÁöÑÂä™ÂäõÔºåÊòéÂ§©ÁöÑÊî∂Ëé∑'
                    ],
                    
                    // ÂØºËà™ÂíåËèúÂçï
                    nav: {
                        tutorial: 'Êñ∞ÊâãÊïôÁ®ã',
                        stats: 'ÁªüËÆ°ÂàÜÊûê',
                        suggestions: 'Êô∫ËÉΩÂª∫ËÆÆ',
                        settings: 'ËÆæÁΩÆ',
                        user: 'Áî®Êà∑',
                        editProfile: 'ÁÇπÂáªÁºñËæëÂßìÂêç',
                        editName: 'ÁºñËæëÂßìÂêç',
                        logout: 'ÈÄÄÂá∫'
                    },
                    today: '‰ªäÊó•',
                    upcoming: 'Âç≥Â∞ÜÂà∞Êù•',
                    completed: 'Â∑≤ÂÆåÊàê',
                    settings: 'ËÆæÁΩÆ',
                    tutorial: 'Êñ∞ÊâãÊïôÁ®ã',
                    
                    // Êô∫ËÉΩÂàÜÊûêÈù¢Êùø
                    smartSummary: 'Êô∫ËÉΩ‰ªªÂä°ÊÄªÁªì',
                    todayOverview: '‰ªäÊó•Ê¶ÇËßà',
                    taskCategories: '‰ªªÂä°ÂàÜÁ±ª',
                    timeAllocation: 'Êó∂Èó¥ÂàÜÈÖç',
                    smartSuggestions: 'Êô∫ËÉΩÂª∫ËÆÆ',
                    completedTaskHistory: 'Â∑≤ÂÆåÊàê‰ªªÂä°ÂéÜÂè≤',
                    dataManagement: 'Êï∞ÊçÆÁÆ°ÁêÜ',
                    exportJSON: 'ÂØºÂá∫ JSON',
                    exportCSV: 'ÂØºÂá∫ CSV',
                    backupData: 'Â§á‰ªΩÊï∞ÊçÆ',
                    restoreData: 'ÊÅ¢Â§çÊï∞ÊçÆ',
                    
                    // Á≠õÈÄâÊåâÈíÆ
                    all: 'ÂÖ®ÈÉ®',
                    todayFilter: '‰ªäÂ§©',
                    yesterday: 'Êò®Â§©',
                    thisWeek: 'Êú¨Âë®',
                    
                    // ÂæÖÂäû‰∫ãÈ°π
                    addTodo: 'Ê∑ªÂä†',
                    lowPriority: '‰Ωé',
                    mediumPriority: '‰∏≠',
                    highPriority: 'È´ò',
                    noTodos: 'ÊöÇÊó†ÂæÖÂäû‰∫ãÈ°π',
                    addFirstTask: 'Ê∑ªÂä†ÊÇ®ÁöÑÁ¨¨‰∏Ä‰∏™‰ªªÂä°ÂºÄÂßãÂêßÔºÅ',
                    taskCount: '‰∏™‰ªªÂä°',
                    
                    // ‰ªªÂä°Áõ∏ÂÖ≥
                    addTask: 'Ê∑ªÂä†‰ªªÂä°',
                    taskTitle: '‰ªªÂä°Ê†áÈ¢ò',
                    taskDescription: '‰ªªÂä°ÊèèËø∞',
                    taskTime: '‰ªªÂä°Êó∂Èó¥',
                    taskPriority: '‰ªªÂä°‰ºòÂÖàÁ∫ß',
                    high: 'È´ò',
                    medium: '‰∏≠',
                    low: '‰Ωé',
                    save: '‰øùÂ≠ò',
                    cancel: 'ÂèñÊ∂à',
                    delete: 'Âà†Èô§',
                    edit: 'ÁºñËæë',
                    complete: 'ÂÆåÊàê',
                    
                    // ‰ªªÂä°ËæìÂÖ•Áõ∏ÂÖ≥
                    task: {
                        addNew: 'Ê∑ªÂä†Êñ∞‰ªªÂä°',
                        hint: 'ÊèêÁ§∫ÔºöÂ∞ùËØïËæìÂÖ•"ÊòéÂ§©‰∏ãÂçà2ÁÇπÂÆåÊàêÊä•Âëä"Êàñ"ÂáÜÂ§á‰ºöËÆÆÊùêÊñôÔºå‰ºòÂÖàÁ∫ßÈ´ò"',
                        quickAdd: 'ÊûÅÈÄüÊ∑ªÂä†',
                        placeholder: 'ËæìÂÖ•‰ªªÂä°ÂÜÖÂÆπÔºåÊîØÊåÅÊô∫ËÉΩÊó∂Èó¥ËØÜÂà´...',
                        nextTask: 'Âç≥Â∞ÜÂºÄÂßãÁöÑ‰ªªÂä°',
                        allTasks: 'ÊâÄÊúâ‰ªªÂä°',
                        complete: 'ÂÆåÊàê',
                        detail: 'ËØ¶ÊÉÖ'
                    },
                    
                    // ËÆæÁΩÆÈù¢Êùø
                    language: 'ËØ≠Ë®Ä',
                    theme: '‰∏ªÈ¢ò',
                    notifications: 'ÈÄöÁü•',
                    sound: 'Â£∞Èü≥',
                    autoBackup: 'Ëá™Âä®Â§á‰ªΩ',
                    dataExport: 'Êï∞ÊçÆÂØºÂá∫',
                    dataImport: 'Êï∞ÊçÆÂØºÂÖ•',
                    settingsTitle: 'ËÆæÁΩÆ',
                    languageSaved: 'ËØ≠Ë®ÄËÆæÁΩÆÂ∑≤‰øùÂ≠ò',
                    
                    settings: {
                        language: {
                            title: 'ËØ≠Ë®ÄËÆæÁΩÆ',
                            interface: 'ÁïåÈù¢ËØ≠Ë®Ä',
                            description: 'ÈÄâÊã©Â∫îÁî®Á®ãÂ∫èÁöÑÊòæÁ§∫ËØ≠Ë®Ä',
                            chinese: '‰∏≠Êñáüá®üá≥',
                            english: 'Englishüá∫üá∏'
                        },
                        notifications: {
                            title: 'ÈÄöÁü•ËÆæÁΩÆ',
                            browser: 'ÊµèËßàÂô®ÈÄöÁü•',
                            browserDesc: 'ÂêØÁî®Ê°åÈù¢ÈÄöÁü•ÊèêÈÜí',
                            requestPermission: 'ËØ∑Ê±ÇÊùÉÈôê',
                            taskReminder: '‰ªªÂä°ÊèêÈÜí',
                            taskReminderDesc: '‰ªªÂä°Âà∞ÊúüÂâçËá™Âä®ÊèêÈÜí',
                            sound: 'Â£∞Èü≥ÊèêÈÜí',
                            soundDesc: 'Êí≠ÊîæÊèêÈÜíÂ£∞Èü≥'
                        },
                        taskManagement: {
                            title: '‰ªªÂä°ÁÆ°ÁêÜ',
                            description: 'Ê∏ÖÁêÜÈÄæÊúüÂíåÂ∑≤ÂÆåÊàê‰ªªÂä°Ôºå‰øùÊåÅ‰ªªÂä°ÂàóË°®Êï¥Ê¥Å',
                            deleteOverdue: 'Âà†Èô§ÈÄæÊúü‰ªªÂä°',
                            clearCompleted: 'Ê∏ÖÁêÜÂ∑≤ÂÆåÊàê'
                        },
                        workHours: {
                            title: 'Â∑•‰ΩúÊó∂Èó¥',
                            start: 'Â∑•‰ΩúÂºÄÂßãÊó∂Èó¥',
                            end: 'Â∑•‰ΩúÁªìÊùüÊó∂Èó¥'
                        },
                        busyTime: {
                            title: 'ÁπÅÂøôÊó∂Èó¥ÊÆµ',
                            description: 'ËÆæÁΩÆÊÇ®ÁöÑÁπÅÂøôÊó∂Èó¥ÊÆµÔºåÈÅøÂÖçÂú®Ëøô‰∫õÊó∂Èó¥ÂÆâÊéíÈáçË¶Å‰ªªÂä°',
                            add: 'Ê∑ªÂä†ÁπÅÂøôÊó∂Èó¥'
                        },
                        timeKeywords: {
                            title: 'Êó∂Èó¥ÂÖ≥ÈîÆËØçËÆæÁΩÆ',
                            morning: '‰∏äÂçà',
                            afternoon: '‰∏ãÂçà',
                            evening: 'Êôö‰∏ä',
                            keywordDesc: '‰∏∫‰∏çÂêåÊó∂Èó¥ÊÆµËÆæÁΩÆÂÖ≥ÈîÆËØçÔºåÁ≥ªÁªüÂ∞ÜËá™Âä®ËØÜÂà´',
                            custom: 'Ëá™ÂÆö‰πâÂÖ≥ÈîÆËØç',
                            customDesc: 'Ê∑ªÂä†ÊÇ®Ëá™Â∑±ÁöÑÊó∂Èó¥ÂÖ≥ÈîÆËØç'
                        },

                        about: {
                            title: 'ÂÖ≥‰∫éËΩØ‰ª∂',
                            description: 'ÈÄüÂ∫¶Ê∏ÖÂçï - Êô∫ËÉΩ‰ªªÂä°ÁÆ°ÁêÜÂä©Êâã',
                            version: 'ÁâàÊú¨Ôºöv1.0',
                            githubText: 'ËÆøÈóÆGitHub‰∏ªÈ°µ',
                            github: 'GitHub'
                        },
                        github: {
                            title: 'GitHub ‰∏ªÈ°µ',
                            description: 'ËÆøÈóÆÊàë‰ª¨ÁöÑ GitHub ‰∏ªÈ°µÔºåËé∑ÂèñÊúÄÊñ∞ÁâàÊú¨„ÄÅÊèê‰∫§ÈóÆÈ¢òÊàñÂèÇ‰∏éÂºÄÂèë',
                            visit: 'ËÆøÈóÆ GitHub'
                        },
                        modal: {
                            deleteConfirm: {
                                title: 'Á°ÆËÆ§Âà†Èô§',
                                message: 'Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™‰ªªÂä°ÂêóÔºüÊ≠§Êìç‰ΩúÊó†Ê≥ïÊí§ÈîÄ„ÄÇ',
                                cancel: 'ÂèñÊ∂à',
                                confirm: 'Á°ÆËÆ§Âà†Èô§'
                            },
                            editUsername: {
                                title: 'ÁºñËæëÂßìÂêç',
                                yourName: 'ÊÇ®ÁöÑÂßìÂêç',
                                placeholder: 'ËØ∑ËæìÂÖ•ÊÇ®ÁöÑÂßìÂêç',
                                description: 'ÂßìÂêçÂ∞ÜÊòæÁ§∫Âú®Áî®Êà∑Â§¥ÂÉè‰∏≠',
                                cancel: 'ÂèñÊ∂à',
                                save: '‰øùÂ≠ò'
                            }
                        },
                        save: '‰øùÂ≠òËÆæÁΩÆ'
                    },
                    
                    // ÊïôÁ®ãÁõ∏ÂÖ≥
                    tutorial: {
                        title: 'ÈÄüÂ∫¶Ê∏ÖÂçïÊñ∞ÊâãÊïôÁ®ã',
                        skip: 'Ë∑≥ËøáÊïôÁ®ã',
                        welcome: {
                            title: 'Ê¨¢Ëøé‰ΩøÁî®ÈÄüÂ∫¶Ê∏ÖÂçï',
                            desc: 'ÊÇ®ÁöÑÊô∫ËÉΩ‰ªªÂä°ÁÆ°ÁêÜÂä©Êâã'
                        },
                        smartTime: {
                            title: 'üß† Êô∫ËÉΩÊó∂Èó¥ËØÜÂà´',
                            desc: 'ËæìÂÖ•Ëá™ÁÑ∂ËØ≠Ë®ÄÔºåÁ≥ªÁªüËá™Âä®ËØÜÂà´Êó∂Èó¥ÔºÅËØïËØïËøô‰∫õÁ•ûÂ•áÁöÑËæìÂÖ•Ôºö'
                        },
                        quickTask: {
                            title: '‚ö° ÊûÅÈÄü‰ªªÂä°ÁÆ°ÁêÜ',
                            desc: 'Èó™ÁîµËà¨ÁöÑ‰ªªÂä°Êìç‰Ωú‰ΩìÈ™åÔºåÊïàÁéáÁøªÂÄçÔºÅ'
                        },
                        stats: {
                            title: 'üìä Êô∫ËÉΩÁªüËÆ°ÂàÜÊûê',
                            desc: 'Ê∑±Â∫¶ÂàÜÊûêÊÇ®ÁöÑ‰ªªÂä°Êï∞ÊçÆÔºåÊèê‰æõ‰∏ì‰∏öÊ¥ûÂØüÔºÅ'
                        },
                        ui: {
                            title: 'üé® ÁæéËßÇÁïåÈù¢ËÆæËÆ°',
                            desc: 'Áé∞‰ª£ÁéªÁíÉÊãüÊÄÅËÆæËÆ°ÔºåËÆ©‰ªªÂä°ÁÆ°ÁêÜÊàê‰∏∫‰∫´ÂèóÔºÅ'
                        },
                        tips: {
                            title: 'üí° ‰ΩøÁî®ÊäÄÂ∑ß',
                            desc: 'ÊéåÊè°Ëøô‰∫õÊäÄÂ∑ßÔºåÊïàÁéáÁøªÂÄçÔºÅ'
                        }
                    },
                    
                    // ‰ªªÂä°ÁªüËÆ°Áõ∏ÂÖ≥
                    taskStats: '‰ªªÂä°ÁªüËÆ°',
                    todayTasks: '‰ªäÊó•‰ªªÂä°',
                    items: 'È°π',
                    completionRate: 'ÂÆåÊàêÁéá',
                    noTasksToday: '‰ªäÂ§©ËøòÊ≤°ÊúâÂÆâÊéí‰ªªÂä°',
                    totalTasks: 'ÊÄª‰ªªÂä°',
                    completed: 'Â∑≤ÂÆåÊàê',
                    incomplete: 'Êú™ÂÆåÊàê',
                    noTaskData: 'ÊöÇÊó†‰ªªÂä°Êï∞ÊçÆ',
                    noTimeSchedule: 'ÊöÇÊó†Êó∂Èó¥ÂÆâÊéí',
                    noTaskSchedule: 'üìù ‰ªäÂ§©ËøòÊ≤°Êúâ‰ªªÂä°ÂÆâÊéíÔºåÂª∫ËÆÆËßÑÂàí‰∏Ä‰∏ãÊòéÂ§©ÁöÑÂ∑•‰ΩúÈáçÁÇπ',
                    noCompletedTasks: 'ÊöÇÊó†Â∑≤ÂÆåÊàêÁöÑ‰ªªÂä°',
                    today: '‰ªäÂ§©',
                    yesterday: 'Êò®Â§©',
                    tasksCount: '‰∏™‰ªªÂä°',
                    completedTime: 'ÂÆåÊàêÊó∂Èó¥',
                    byPriority: 'Êåâ‰ºòÂÖàÁ∫ßÔºö',
                    byStatus: 'ÊåâÁä∂ÊÄÅÔºö',
                    byTimeSlot: 'ÊåâÊó∂ÊÆµÔºö',
                    high: 'È´ò',
                    medium: '‰∏≠',
                    low: '‰Ωé',
                    pending: 'ÂæÖÂäû',
                    morning: '‰∏äÂçà',
                    afternoon: '‰∏ãÂçà',
                    evening: 'Êôö‰∏ä',
                    highPriorityTasks: '‰∏™È´ò‰ºòÂÖàÁ∫ß‰ªªÂä°ÂæÖÂ§ÑÁêÜ',
                    excellentPerformance: 'üéâ Ë°®Áé∞‰ºòÁßÄÔºÅ',
                    keepGoing: 'üí™ ÁªßÁª≠Âä†Ê≤πÔºÅ',
                    needSpeedUp: '‚ö° ÈúÄË¶ÅÂä†Âø´ËøõÂ∫¶',
                    completionStatus: 'ÂÆåÊàêÊÉÖÂÜµ',
                    taskDistribution: '‰ªªÂä°ÂàÜÂ∏É',
                    avgCompletionTime: 'Âπ≥ÂùáÂÆåÊàêÊó∂Èó¥',
                    taskAnalysis: '‰ªªÂä°ÂàÜÊûê',
                    timeManagementSuggestions: 'Êó∂Èó¥ÁÆ°ÁêÜÂª∫ËÆÆ',
                    smartSuggestionsDesc: 'Âü∫‰∫éÊÇ®ÁöÑ‰ªªÂä°ÂíåÊó∂Èó¥ÂÆâÊéíÔºåÁ≥ªÁªüÂ∞ÜÊèê‰æõ‰∏™ÊÄßÂåñÂª∫ËÆÆ',
                    taskCompletionRate: '‰ªªÂä°ÂÆåÊàêÁéá',
                    
                    // ÊøÄÂä±Ê∂àÊÅØÁõ∏ÂÖ≥
                    encouragement: {
                        morning: {
                            high: ['Êó©ÂÆâÔºÅÊñ∞ÁöÑ‰∏ÄÂ§©ÔºåÊñ∞ÁöÑÂºÄÂßãÔºÅ‚òÄÔ∏è', 'Êó©‰∏äÂ•ΩÔºÅ‰ªäÂ§©‰πüË¶ÅÂä†Ê≤πÂì¶ÔºÅüí™', 'Êô®ÂÖâÊ≠£Â•ΩÔºåËÆ©Êàë‰ª¨‰∏ÄËµ∑Âä™ÂäõÔºÅüåÖ'],
                            medium: ['Êó©ÂÆâÔºÅÁ®≥Ê≠•ÂâçËøõÔºåÁßØÂ∞ëÊàêÂ§öÔºÅüìà', 'Êó©‰∏äÂ•ΩÔºÅÊØè‰∏ÄÊ≠•ÈÉΩÁÆóÊï∞ÔºÅüë£', 'Êñ∞ÁöÑ‰∏ÄÂ§©ÔºåÊñ∞ÁöÑÂèØËÉΩÔºÅ‚ú®'],
                            low: ['Êó©ÂÆâÔºÅÂà´ÁùÄÊÄ•ÔºåÊÖ¢ÊÖ¢Êù•ÔºÅüå±', 'Êó©‰∏äÂ•ΩÔºÅ‰ªäÂ§©ÂèØ‰ª•ÂÅöÂæóÊõ¥Â•ΩÔºÅüí°', 'Êñ∞ÁöÑÂºÄÂßãÔºåÊñ∞ÁöÑÊú∫‰ºöÔºÅüéØ']
                        },
                        afternoon: {
                            high: ['‰∏ãÂçàÂ•ΩÔºÅÁªßÁª≠‰øùÊåÅËøô‰∏™ÂäøÂ§¥ÔºÅüöÄ', 'Â§™Ê£í‰∫ÜÔºÅÊïàÁéáÁúüÈ´òÔºÅ‚≠ê', '‰ºòÁßÄÔºÅ‰Ω†ÊòØÊàëÁöÑÊ¶úÊ†∑ÔºÅüèÜ'],
                            medium: ['‰∏ãÂçàÂ•ΩÔºÅÂä≥ÈÄ∏ÁªìÂêàÂæàÈáçË¶ÅÔºÅ‚è∞', 'Âä†Ê≤πÔºÅËÉúÂà©Â∞±Âú®ÂâçÊñπÔºÅüéñÔ∏è', 'Á®≥‰ΩèÔºÅ‰Ω†ËÉΩË°åÁöÑÔºÅüí™'],
                            low: ['‰∏ãÂçàÂ•ΩÔºÅ‰ºëÊÅØ‰∏Ä‰∏ãÂÜçÁªßÁª≠ÔºÅ‚òï', 'Âà´ÁÅ∞ÂøÉÔºåÈáçÊñ∞ÂºÄÂßãÔºÅüîÑ', 'ÊÖ¢ÊÖ¢Êù•ÔºåÊØîËæÉÂø´ÔºÅüê¢']
                        },
                        evening: {
                            high: ['Êôö‰∏äÂ•ΩÔºÅ‰ªäÂ§©Ë°®Áé∞ÁúüÊ£íÔºÅüåü', 'Â§™ÂéâÂÆ≥‰∫ÜÔºÅ‰∏∫‰Ω†È™ÑÂÇ≤ÔºÅüéâ', 'ÂÆåÁæéÁöÑ‰∏ÄÂ§©ÔºÅÂ•ΩÂ•Ω‰ºëÊÅØÔºÅüò¥'],
                            medium: ['Êôö‰∏äÂ•ΩÔºÅ‰ªäÂ§©‰πüÂæàÂä™Âäõ‰∫ÜÔºÅüëç', '‰∏çÈîôÔºÅÊòéÂ§©ÁªßÁª≠Âä†Ê≤πÔºÅüåô', '‰ªäÂ§©ËæõËã¶‰∫ÜÔºÅÊîæÊùæ‰∏Ä‰∏ãÂêßÔºÅüå∫'],
                            low: ['Êôö‰∏äÂ•ΩÔºÅÊòéÂ§©‰ºöÊõ¥Â•ΩÁöÑÔºÅüåà', 'Ê≤°ÂÖ≥Á≥ªÔºå‰ºëÊÅØÊòØ‰∏∫‰∫ÜËµ∞Êõ¥ËøúÁöÑË∑ØÔºÅüõ§Ô∏è', '‰ªäÂ§©‰πüË∞¢Ë∞¢‰Ω†ÔºÅÊôöÂÆâÔºÅüí§']
                        }
                    },
                    catMood: {
                        happy: ' Áå´Âí™‰∏∫‰Ω†ÊÑüÂà∞ÂºÄÂøÉÔºÅüê±',
                        hungry: ' Áå´Âí™ËØ¥ÈúÄË¶ÅË°•ÂÖÖËÉΩÈáèÔºÅüêü',
                        sleepy: ' Áå´Âí™ÊèêÈÜí‰Ω†Ê≥®ÊÑè‰ºëÊÅØÔºÅüò¥'
                    },
                    taskAdvice: {
                        tooMany: ' ‰ªªÂä°ËæÉÂ§öÔºåÂª∫ËÆÆ‰ºòÂÖàÂ§ÑÁêÜÈáçË¶Å‰∫ãÈ°π„ÄÇ',
                        overdue: ' ÊúâÈÄæÊúü‰ªªÂä°ÔºåÈúÄË¶ÅÁâπÂà´ÂÖ≥Ê≥®„ÄÇ',
                        allDone: ' ‰ªäÊó•‰ªªÂä°ÂÖ®ÈÉ®ÂÆåÊàêÔºåÂ§™Ê£í‰∫ÜÔºÅ'
                    },
                    
                    // ÂÖ∂‰ªñÊïôÁ®ãÁõ∏ÂÖ≥ÁøªËØëÔºà‰øùÊåÅÂéüÊúâÁöÑËØ¶ÁªÜÁøªËØëÔºâ
                    tutorialStep1: 'ÊûÅÈÄüÊ∑ªÂä†',
                    tutorialStep1Desc: 'Êô∫ËÉΩËØÜÂà´Êó∂Èó¥Ôºå‰∏ÄÈîÆÂàõÂª∫‰ªªÂä°',
                    tutorialStep2: 'Êô∫ËÉΩÂàÜÊûê',
                    tutorialStep2Desc: 'ÂÆûÊó∂ÁªüËÆ°Ôºå‰∫ÜËß£‰Ω†ÁöÑÊïàÁéá',
                    tutorialStep3: '‰∏™ÊÄßÂåñËÆæÁΩÆ',
                    tutorialStep3Desc: 'ÂÆöÂà∂‰Ω†ÁöÑ‰∏ìÂ±û‰ΩìÈ™å',
                    tutorialStep4: 'Êü•ÁúãÁªüËÆ°',
                    next: '‰∏ã‰∏ÄÊ≠•',
                    previous: '‰∏ä‰∏ÄÊ≠•',
                    finish: 'ÂÆåÊàê',
                    close: 'ÂÖ≥Èó≠',
                    start: 'ÂºÄÂßã‰ΩøÁî®',
                    tutorialWelcomeTitle: 'Ê¨¢Ëøé‰ΩøÁî®ÈÄüÂ∫¶Ê∏ÖÂçï',
                    tutorialWelcomeDesc: 'ÊÇ®ÁöÑÊô∫ËÉΩ‰ªªÂä°ÁÆ°ÁêÜÂä©Êâã',
                    tutorialSmartTimeTitle: 'üß† Êô∫ËÉΩÊó∂Èó¥ËØÜÂà´',
                    tutorialSmartTimeDesc: 'ËæìÂÖ•Ëá™ÁÑ∂ËØ≠Ë®ÄÔºåÁ≥ªÁªüËá™Âä®ËØÜÂà´Êó∂Èó¥ÔºÅËØïËØïËøô‰∫õÁ•ûÂ•áÁöÑËæìÂÖ•Ôºö',
                    tutorialQuickTaskTitle: '‚ö° ÊûÅÈÄü‰ªªÂä°ÁÆ°ÁêÜ',
                    tutorialQuickTaskDesc: 'Èó™ÁîµËà¨ÁöÑ‰ªªÂä°Êìç‰Ωú‰ΩìÈ™åÔºåËÆ©ÊïàÁéáÂÄçÂ¢ûÔºÅ',
                    tutorialStatsTitle: 'üìä Êô∫ËÉΩÁªüËÆ°ÂàÜÊûê',
                    tutorialStatsDesc: 'Ê∑±Â∫¶ÂàÜÊûê‰Ω†ÁöÑ‰ªªÂä°Êï∞ÊçÆÔºåÊèê‰æõ‰∏ì‰∏öÊ¥ûÂØüÔºÅ',
                    tutorialPersonalizationTitle: '‚öôÔ∏è ‰∏™ÊÄßÂåñËÆæÁΩÆ',
                    tutorialPersonalizationDesc: 'ÊâìÈÄ†‰∏ìÂ±û‰∫é‰Ω†ÁöÑ‰ªªÂä°ÁÆ°ÁêÜ‰ΩìÈ™åÔºÅ',
                    tutorialLanguageSetting: 'ËØ≠Ë®ÄÂàáÊç¢',
                    tutorialLanguageSettingDesc: '‰∏≠Ëã±ÊñáËá™Áî±ÂàáÊç¢',
                    tutorialThemeSetting: '‰∏ªÈ¢òÈ£éÊ†º',
                    tutorialThemeSettingDesc: 'Â§öÁßç‰∏ªÈ¢òÈöèÂøÉÈÄâ',
                    tutorialNotificationSetting: 'ÈÄöÁü•ÊèêÈÜí',
                    tutorialNotificationSettingDesc: 'Êô∫ËÉΩÊèêÈÜí‰∏çÈîôËøá',
                    tutorialProfileSetting: '‰∏™‰∫∫ËµÑÊñô',
                    tutorialProfileSettingDesc: 'Ëá™ÂÆö‰πâÂßìÂêçÂíåÂ§¥ÂÉè',
                    tutorialWorkTimeSetting: 'Â∑•‰ΩúÊó∂Èó¥',
                    tutorialWorkTimeSettingDesc: 'ËÆæÁΩÆ‰Ω†ÁöÑÂ∑•‰ΩúÊó∂ÊÆµ',
                    tutorialKeywordSetting: 'ÂÖ≥ÈîÆËØçËØÜÂà´',
                    tutorialKeywordSettingDesc: 'Ëá™ÂÆö‰πâÊó∂Èó¥ÂÖ≥ÈîÆËØç',
                    tutorialDataSetting: 'Êï∞ÊçÆÁÆ°ÁêÜ',
                    tutorialDataSettingDesc: 'ÂØºÂÖ•ÂØºÂá∫‰ªªÂä°Êï∞ÊçÆ',
                    tutorialUITitle: 'üé® Á≤æÁæéÁïåÈù¢ËÆæËÆ°',
                    tutorialUIDesc: 'Áé∞‰ª£ÂåñÁéªÁíÉÊÄÅËÆæËÆ°ÔºåËÆ©‰ªªÂä°ÁÆ°ÁêÜÊàê‰∏∫‰∏ÄÁßç‰∫´ÂèóÔºÅ',
                    tutorialTipsTitle: 'üí° ‰ΩøÁî®ÊäÄÂ∑ß',
                    tutorialTipsDesc: 'ÊéåÊè°Ëøô‰∫õÊäÄÂ∑ßÔºåËÆ©‰Ω†ÁöÑÊïàÁéáÁøªÂÄçÔºÅ',
                    
                    // ÁïåÈù¢ËÆæËÆ°Â≠êÈ°π
                    tutorialGlassEffect: '‚ú® ÁéªÁíÉÊÄÅÊïàÊûú',
                    tutorialGlassEffectDesc: 'ÂçäÈÄèÊòéÊØõÁéªÁíÉË¥®ÊÑüÔºåÁé∞‰ª£ÊÑüÂçÅË∂≥',
                    tutorialSmoothAnimation: 'üåà ÊµÅÁïÖÂä®Áîª',
                    tutorialSmoothAnimationDesc: 'Á≤æÂøÉËÆæËÆ°ÁöÑËøáÊ∏°Âä®ÁîªÔºåÊìç‰ΩúÂ¶Ç‰∏ùËà¨È°∫Êªë',
                    tutorialResponsiveDesign: 'üì± ÂìçÂ∫îÂºèËÆæËÆ°',
                    tutorialResponsiveDesignDesc: 'ÂÆåÁæéÈÄÇÈÖçÂêÑÁßçËÆæÂ§áÔºåÈöèÊó∂ÈöèÂú∞ÁÆ°ÁêÜ‰ªªÂä°',
                    tutorialMicroInteraction: 'üéØ ÁÅµÂä®‰∫§‰∫í',
                    tutorialMicroInteractionDesc: 'ÂæÆ‰∫§‰∫íËÆæËÆ°ÔºåÊØè‰∏™Êìç‰ΩúÈÉΩÊúâÂèçÈ¶à',
                    
                    // ÊûÅÈÄü‰ªªÂä°ÁÆ°ÁêÜÂ≠êÈ°π
                    tutorialQuickAdd: 'Âø´ÈÄüÊ∑ªÂä†',
                    tutorialQuickAddDesc: 'ËæìÂÖ•‰ªªÂä°ÂÜÖÂÆπÔºåÂõûËΩ¶ÊàñÁÇπÂáªÊåâÈíÆÂç≥ÂèØÊ∑ªÂä†',
                    tutorialOneClickComplete: '‰∏ÄÈîÆÂÆåÊàê',
                    tutorialOneClickCompleteDesc: 'ÁÇπÂáªÊâìÂãæÊåâÈíÆÔºå‰ªªÂä°Áû¨Èó¥ÂÆåÊàêÔºåËøòÊúâÁ≤æÁæéÂä®Áîª',
                    tutorialPrioritySetting: '‰ºòÂÖàÁ∫ßËÆæÁΩÆ',
                    tutorialPrioritySettingDesc: 'È´ò‰∏≠‰Ωé‰∏âÁ∫ß‰ºòÂÖàÁ∫ßÔºåÈáçË¶Å‰ªªÂä°‰ºòÂÖàÂ§ÑÁêÜ',
                    tutorialFlexibleEdit: 'ÁÅµÊ¥ªÁºñËæë',
                    tutorialFlexibleEditDesc: 'ÈöèÊó∂‰øÆÊîπ‰ªªÂä°ÂÜÖÂÆπ„ÄÅÊó∂Èó¥Âíå‰ºòÂÖàÁ∫ß',
                    
                    tutorialVisualizationTitle: 'üìà ÂèØËßÜÂåñÂõæË°®',
                    tutorialTrendChart: 'ÂÆåÊàêÊÉÖÂÜµË∂ãÂäøÂõæ',
                    tutorialPriorityChart: '‰ºòÂÖàÁ∫ßÂàÜÂ∏ÉÈ•ºÂõæ',
                    tutorialTimeAnalysis: '‰ªªÂä°Êó∂Èó¥ÂàÜÂ∏ÉÂàÜÊûê',
                    tutorialAISummaryTitle: 'üß† AIÊô∫ËÉΩÊÄªÁªì',
                    tutorialTodayOverview: '‰ªäÊó•‰ªªÂä°Ê¶ÇËßà',
                    tutorialTaskCategories: '‰ªªÂä°ÂàÜÁ±ªÁªüËÆ°',
                    tutorialEfficiencyTips: 'ÊïàÁéáÊèêÂçáÂª∫ËÆÆ',
                    
                    // ‰ΩøÁî®ÊäÄÂ∑ßÂ≠êÈ°π
                    tutorialTip1Title: '‰ºòÂÖàÁ∫ßÂÖ≥ÈîÆËØç',
                    tutorialTip1Desc: 'Âú®‰ªªÂä°ÊèèËø∞‰∏≠Âä†ÂÖ•"‰ºòÂÖàÁ∫ßÈ´ò"„ÄÅ"ÈáçË¶Å"Á≠âËØçËá™Âä®ËÆæÁΩÆ‰ºòÂÖàÁ∫ß',
                    tutorialTip2Title: 'Âø´Êç∑ÈîÆÊîØÊåÅ',
                    tutorialTip2Desc: 'ËæìÂÖ•Ê°Ü‰∏≠ÊåâEnterÂø´ÈÄüÊ∑ªÂä†ÔºåEscÂèñÊ∂àËæìÂÖ•',
                    tutorialTip3Title: 'Êï∞ÊçÆÂØºÂá∫',
                    tutorialTip3Desc: 'ÊîØÊåÅÂØºÂá∫‰ªªÂä°Êï∞ÊçÆÔºåÊñπ‰æøÂ§á‰ªΩÂíåÂàÜ‰∫´',
                    
                    // Êô∫ËÉΩÊó∂Èó¥ËØÜÂà´
                    tutorialTimeSupport: 'ÊîØÊåÅÁõ∏ÂØπÊó∂Èó¥ÔºàÊòéÂ§©„ÄÅÂêéÂ§©„ÄÅ‰∏ãÂë®ÔºâÂíåÁªùÂØπÊó∂Èó¥ÔºàÂÖ∑‰ΩìÊó•ÊúüÔºâ',
                    tutorialSmartTime: 'Êô∫ËÉΩÊó∂Èó¥ËØÜÂà´',
                    tutorialQuickAdd: 'ÊûÅÈÄü‰ªªÂä°ÁÆ°ÁêÜ',
                    tutorialAutoSave: 'Ëá™Âä®‰øùÂ≠ò',
                    tutorialRealTimeStats: 'ÂÆûÊó∂ÁªüËÆ°',
                    tutorialEfficiencyAnalysis: 'ÊïàÁéáÂàÜÊûê',
                    tutorialSmartSuggestions: 'Êô∫ËÉΩÂª∫ËÆÆ',
                    tutorialCustomSettings: 'Ëá™ÂÆö‰πâËÆæÁΩÆ',
                    tutorialWorkHours: 'Â∑•‰ΩúÊó∂Èó¥',
                    tutorialKeywords: 'ÂÖ≥ÈîÆËØç',
                    
                    // Êô∫ËÉΩÊó∂Èó¥ËØÜÂà´Á§∫‰æã
                    tutorialExample1: 'ÊòéÂ§©‰∏ãÂçà2ÁÇπÂºÄ‰ºö',
                    tutorialExample1Result: '‚Üí Ëá™Âä®ËØÜÂà´‰∏∫ÊòéÂ§©14:00',
                    tutorialExample2: 'ÂêéÂ§©‰∏äÂçàËÄÉËØï',
                    tutorialExample2Result: '‚Üí Ëá™Âä®ËØÜÂà´‰∏∫ÂêéÂ§©09:00',
                    tutorialExample3: '‰∏ãÂë®‰∏ÄÂÆåÊàêÊä•Âëä',
                    tutorialExample3Result: '‚Üí Ëá™Âä®ËØÜÂà´‰∏∫‰∏ãÂë®‰∏ÄÊåáÂÆöÊó∂Èó¥',
                    
                    // ÈÄöÁü•Ê∂àÊÅØ
                    success: 'ÊàêÂäü',
                    error: 'ÈîôËØØ',
                    warning: 'Ë≠¶Âëä',
                    info: '‰ø°ÊÅØ',
                    taskAdded: '‰ªªÂä°Ê∑ªÂä†ÊàêÂäü',
                    taskDeleted: '‰ªªÂä°Âà†Èô§ÊàêÂäü',
                    taskCompleted: '‰ªªÂä°Â∑≤ÂÆåÊàê',
                    settingsSaved: 'ËÆæÁΩÆÂ∑≤‰øùÂ≠ò',
                    languageChanged: 'ËØ≠Ë®ÄÂ∑≤ÂàáÊç¢',
                    tutorialCompleted: 'ÊïôÁ®ãÂ∑≤ÂÆåÊàê',
                    tutorialSkipped: 'ÊïôÁ®ãÂ∑≤Ë∑≥Ëøá',
                    
                    // Áå´Âí™Âä©Êâã
                catAssistant: 'Êô∫ËÉΩÁå´Âí™Âä©Êâã',
                petCat: 'ÊäöÊë∏',
                encouragementTitle: 'Êô∫ËÉΩÈºìÂä±',
                suggestions: 'Êô∫ËÉΩÂª∫ËÆÆ',
                    
                    // Âàõ‰ΩúËÄÖ‰ø°ÊÅØ
                    createdWith: 'Created with',
                    developer: 'ÂºÄÂèëËÄÖ',
                    
                    // ÂÖ∂‰ªñ
                    confirm: 'Á°ÆËÆ§',
                    ok: 'Á°ÆÂÆö',
                    yes: 'ÊòØ',
                    no: 'Âê¶',
                    close: 'ÂÖ≥Èó≠',
                    loading: 'Âä†ËΩΩ‰∏≠...',
                    noData: 'ÊöÇÊó†Êï∞ÊçÆ',
                    search: 'ÊêúÁ¥¢',
                    filter: 'Á≠õÈÄâ',
                    sort: 'ÊéíÂ∫è',
                    
                    // Êô∫ËÉΩÂª∫ËÆÆÂíåÂàÜÊûê
                    smartSuggestions: 'Êô∫ËÉΩÂª∫ËÆÆ',
                    smartSuggestionsDesc: 'Âü∫‰∫éÊÇ®ÁöÑ‰ªªÂä°ÂíåÊó∂Èó¥ÂÆâÊéíÔºåÁ≥ªÁªüÂ∞ÜÊèê‰æõ‰∏™ÊÄßÂåñÂª∫ËÆÆ',
                    timeManagementSuggestions: 'Êó∂Èó¥ÁÆ°ÁêÜÂª∫ËÆÆ',
                    taskAnalysis: '‰ªªÂä°ÂàÜÊûê',
                    taskCompletionRate: '‰ªªÂä°ÂÆåÊàêÁéá',
                    avgCompletionTime: 'Âπ≥ÂùáÂÆåÊàêÊó∂Èó¥',
                    
                    // Êï∞ÊçÆÁÆ°ÁêÜÁõ∏ÂÖ≥
                    all: 'ÂÖ®ÈÉ®',
                    todayFilter: '‰ªäÂ§©',
                    yesterday: 'Êò®Â§©',
                    thisWeek: 'Êú¨Âë®',
                    exportJSON: 'ÂØºÂá∫ JSON',
                    exportCSV: 'ÂØºÂá∫ CSV',
                    backupData: 'Â§á‰ªΩÊï∞ÊçÆ',
                    restoreData: 'ÊÅ¢Â§çÊï∞ÊçÆ',
                    
                    // Âø´ÈÄüÂæÖÂäûÁõ∏ÂÖ≥
                    quickTodo: {
                        title: 'Âø´ÈÄüÂæÖÂäû',
                        today: '‰ªäÂ§©',
                        tomorrow: 'ÊòéÂ§©',
                        yesterday: 'Êò®Â§©',
                        thisWeek: 'Êú¨Âë®',
                        all: 'ÂÖ®ÈÉ®',
                        noTasks: 'ÊöÇÊó†‰ªªÂä°',
                        completed: 'Â∑≤ÂÆåÊàê',
                        pending: 'ÂæÖÂäû'
                    },
                    
                    // Áå´Âí™Âä©ÊâãÁõ∏ÂÖ≥
                    smartAnalysis: 'üìä Êô∫ËÉΩÂàÜÊûê',
                    todayCompleted: '‰ªäÊó•ÂÆåÊàê',
                    pendingTasks: 'ÂæÖÂäû‰ªªÂä°',
                    completionRate: 'ÂÆåÊàêÊïàÁéá',
                    smartEncouragement: 'üí™ Êô∫ËÉΩÈºìÂä±',
                    smartSuggestions: 'üí° Êô∫ËÉΩÂª∫ËÆÆ',
                    catEncouragement: {
                        noTasks: 'ÂºÄÂßã‰Ω†ÁöÑ‰ªªÂä°ÁÆ°ÁêÜ‰πãÊóÖÂêßÔºÅ',
                        allCompleted: 'Â§™Ê£í‰∫ÜÔºÅÊâÄÊúâ‰ªªÂä°ÈÉΩÂÆåÊàê‰∫ÜÔºÅ',
                        halfway: 'Âä†Ê≤πÔºÅÂ∑≤ÁªèÂÆåÊàê‰∏ÄÂçä‰∫ÜÔºÅ',
                        start: 'ÁªßÁª≠Âä™ÂäõÔºå‰Ω†ÂèØ‰ª•ÁöÑÔºÅ'
                    },
                    catSuggestions: {
                        noTasks1: 'Ê∑ªÂä†‰Ω†ÁöÑÁ¨¨‰∏Ä‰∏™‰ªªÂä°ÂºÄÂßãÂêßÔºÅ',
                        noTasks2: '‰ΩøÁî®Êô∫ËÉΩÊó∂Èó¥ËØÜÂà´ÂäüËÉΩÂø´ÈÄüÊ∑ªÂä†‰ªªÂä°ÔºÅ',
                        hasTasks1: 'ÂêàÁêÜÂÆâÊéíÊó∂Èó¥ÔºåÊèêÈ´òÊïàÁéáÂì¶ÔºÅ',
                        hasTasks2: 'ËÆ∞Âæó‰ºëÊÅØÔºå‰øùÊåÅ‰∏ìÊ≥®ÂäõÔºÅ'
                    },
                    
                    // Êô∫ËÉΩÊÄªÁªìÁõ∏ÂÖ≥
                    todayOverview: '‰ªäÊó•Ê¶ÇËßà',
                    taskCategories: '‰ªªÂä°ÂàÜÁ±ª',
                    timeAllocation: 'Êó∂Èó¥ÂàÜÈÖç',
                    smartSuggestions: 'Êô∫ËÉΩÂª∫ËÆÆ',
                    completedTaskHistory: 'Â∑≤ÂÆåÊàê‰ªªÂä°ÂéÜÂè≤',
                    dataManagement: 'Êï∞ÊçÆÁÆ°ÁêÜ',
                    
                    // ÈÄöÁü•ËÆæÁΩÆ
                    notificationSettings: 'ÈÄöÁü•ËÆæÁΩÆ',
                    browserNotifications: 'ÊµèËßàÂô®ÈÄöÁü•',
                    browserNotificationsDesc: 'ÂêØÁî®Ê°åÈù¢ÈÄöÁü•ÊèêÈÜí',
                    requestPermission: 'ËØ∑Ê±ÇÊùÉÈôê',
                    taskReminder: '‰ªªÂä°ÊèêÈÜí',
                    taskReminderDesc: '‰ªªÂä°Âà∞ÊúüÂâçËá™Âä®ÊèêÈÜí',
                    soundReminder: 'Â£∞Èü≥ÊèêÈÜí',
                    soundReminderDesc: 'Êí≠ÊîæÊèêÈÜíÂ£∞Èü≥'
                },
                en: {
                    // Â∫îÁî®Âü∫Á°Ä‰ø°ÊÅØ
                    appName: 'SuduList',
                    appTitle: 'SuduList',
                    appSubtitle: 'Fast Task Management',
                    
                    // ÁÅ´ÁÆ≠Ê¨¢Ëøé‰ø°ÊÅØ
                    rocket: {
                        title: 'Start Your Task Management at Lightning Speed!',
                        subtitle: '‚ö° Add tasks, complete them in a flash! Smart time recognition makes scheduling easier'
                    },
                    
                    // Ê¨¢Ëøé‰ø°ÊÅØÂíåÊøÄÂä±ËØ≠Âè•
                    welcomeMessages: {
                        morning: 'Good morning, ready to complete tasks at lightning speed!',
                        afternoon: 'Good afternoon, stay focused and work efficiently!',
                        evening: 'Good evening, ready to complete tasks at lightning speed!'
                    },
                    encouragements: [
                        'üöÄ Focus on the present, achieve the future with lightning speed',
                        '‚ö° Every task is a step forward',
                        'üåü Believe in yourself, you are the best!',
                        'üí™ Persistence is victory, keep going!',
                        'üéØ Clear goals, powerful actions',
                        '‚ú® Today\'s efforts, tomorrow\'s rewards'
                    ],
                    
                    // ÂØºËà™ÂíåËèúÂçï
                    nav: {
                        tutorial: 'Tutorial',
                        stats: 'Statistics',
                        suggestions: 'Suggestions',
                        settings: 'Settings',
                        user: 'User',
                        editProfile: 'Click to edit name',
                        editName: 'Edit Name',
                        logout: 'Logout'
                    },
                    today: 'Today',
                    upcoming: 'Upcoming',
                    completed: 'Completed',
                    settings: 'Settings',
                    tutorial: 'Tutorial',
                    
                    // Smart Analysis Panel
                    smartSummary: 'Smart Task Summary',
                    todayOverview: 'Today Overview',
                    taskCategories: 'Task Categories',
                    timeAllocation: 'Time Allocation',
                    smartSuggestions: 'Smart Suggestions',
                    completedTaskHistory: 'Completed Task History',
                    dataManagement: 'Data Management',
                    exportJSON: 'Export JSON',
                    exportCSV: 'Export CSV',
                    backupData: 'Backup Data',
                    restoreData: 'Restore Data',
                    
                    // Filter Buttons
                    all: 'All',
                    todayFilter: 'Today',
                    yesterday: 'Yesterday',
                    thisWeek: 'This Week',
                    
                    // Completed Task History
                    tasksCount: 'items',
                    completedTime: 'Completed Time',
                    
                    // Todo Items
                    addTodo: 'Add',
                    lowPriority: 'Low',
                    mediumPriority: 'Medium',
                    highPriority: 'High',
                    noTodos: 'No todos yet',
                    addFirstTask: 'Add your first task to get started!',
                    taskCount: 'tasks',
                    clearCompleted: 'Clear Completed',
                    clearAll: 'Clear All',
                    
                    // ‰ªªÂä°Áõ∏ÂÖ≥
                    addTask: 'Add Task',
                    taskTitle: 'Task Title',
                    taskDescription: 'Task Description',
                    taskTime: 'Task Time',
                    taskPriority: 'Task Priority',
                    high: 'High',
                    medium: 'Medium',
                    low: 'Low',
                    save: 'Save',
                    cancel: 'Cancel',
                    delete: 'Delete',
                    edit: 'Edit',
                    complete: 'Complete',
                    
                    // Task related
                    task: {
                        addNew: 'Add New Task',
                        hint: 'Hint: Try inputting "Meeting at 3pm tomorrow" and see the magic!',
                        quickAdd: 'Quick Add',
                        placeholder: 'Enter task content, e.g., "Meeting at 3pm tomorrow"...',
                        nextTask: 'Next Task',
                        allTasks: 'All Tasks',
                        complete: 'Complete',
                        detail: 'Details'
                    },
                    
                    // ËÆæÁΩÆÈù¢Êùø
                    language: 'Language',
                    theme: 'Theme',
                    notifications: 'Notifications',
                    sound: 'Sound',
                    autoBackup: 'Auto Backup',
                    dataExport: 'Data Export',
                    dataImport: 'Data Import',
                    settingsTitle: 'Settings',
                    languageSaved: 'Language settings saved',
                    
                    settings: {
                        language: {
                            title: 'Language Settings',
                            interface: 'Interface Language',
                            description: 'Select the display language for the application',
                            chinese: '‰∏≠Êñáüá®üá≥',
                            english: 'Englishüá∫üá∏'
                        },
                        notifications: {
                            title: 'Notification Settings',
                            browser: 'Browser Notifications',
                            browserDesc: 'Enable desktop notification reminders',
                            requestPermission: 'Request Permission',
                            taskReminder: 'Task Reminder',
                            taskReminderDesc: 'Send notifications before tasks expire',
                            sound: 'Sound Reminder',
                            soundDesc: 'Play notification sound'
                        },
                        taskManagement: {
                            title: 'Task Management',
                            description: 'Clean up overdue and completed tasks to keep the task list tidy',
                            deleteOverdue: 'Delete Overdue Tasks',
                            clearCompleted: 'Clear Completed'
                        },
                        workHours: {
                            title: 'Work Hours',
                            start: 'Work Hours Start',
                            end: 'Work Hours End'
                        },
                        busyTime: {
                            title: 'Busy Time',
                            description: 'Set your busy time periods to avoid scheduling important tasks during these times',
                            add: 'Add Busy Time'
                        },
                        timeKeywords: {
                            title: 'Time Keyword Settings',
                            morning: 'Morning',
                            afternoon: 'Afternoon',
                            evening: 'Evening',
                            keywordDesc: 'Set keywords for different time periods, system will automatically recognize',
                            custom: 'Custom Keywords',
                            customDesc: 'Add your own time keywords'
                        },
                        feedback: {
                            title: 'User Feedback',
                            type: 'Feedback Type',
                            bug: 'Bug Report',
                            feature: 'Feature Request',
                            improvement: 'Improvement Suggestion',
                            other: 'Other',
                            content: 'Feedback Content',
                            contact: 'Contact Info (Optional)',
                            submit: 'Submit Feedback'
                        },
                        about: {
                            title: 'About Software',
                            description: 'SuduList - Smart Task Management Assistant',
                            version: 'Version: v1.0',
                            githubText: 'Visit GitHub Homepage',
                            github: 'GitHub'
                        },
                        github: {
                            title: 'GitHub Homepage',
                            description: 'Visit our GitHub homepage for the latest version, submit issues, or contribute to development',
                            visit: 'Visit GitHub'
                        },
                        modal: {
                            deleteConfirm: {
                                title: 'Confirm Delete',
                                message: 'Are you sure you want to delete this task? This action cannot be undone.',
                                cancel: 'Cancel',
                                confirm: 'Confirm Delete'
                            },
                            editUsername: {
                                title: 'Edit Name',
                                yourName: 'Your Name',
                                placeholder: 'Please enter your name',
                                description: 'Name will be displayed in the user avatar',
                                cancel: 'Cancel',
                                save: 'Save'
                            }
                        },
                        save: 'Save Settings'
                },
                
                // ÊïôÁ®ãÁõ∏ÂÖ≥
                tutorial: {
                    title: 'Speed List Tutorial',
                    skip: 'Skip Tutorial',
                    welcome: {
                        title: 'Welcome to Speed List',
                        desc: 'Your Smart Task Management Assistant'
                    },
                    smartTime: {
                        title: 'üß† Smart Time Recognition',
                        desc: 'Input natural language, system automatically recognizes time! Try these magical inputs:'
                    },
                    quickTask: {
                        title: '‚ö° Lightning Task Management',
                        desc: 'Lightning-fast task operation experience, double your efficiency!'
                    },
                    stats: {
                        title: 'üìä Smart Statistical Analysis',
                        desc: 'Deep analysis of your task data, providing professional insights!'
                    },
                    ui: {
                        title: 'üé® Beautiful Interface Design',
                        desc: 'Modern glass morphism design, making task management enjoyable!'
                    },
                    tips: {
                        title: 'üí° Usage Tips',
                        desc: 'Master these tips to double your efficiency!'
                    }
                },
                
                // ‰ªªÂä°ÁªüËÆ°Áõ∏ÂÖ≥
                taskStats: 'Task Statistics',
                todayTasks: 'Today\'s Tasks',
                items: 'items',
                completionRate: 'Completion Rate',
                noTasksToday: 'No tasks scheduled for today',
                totalTasks: 'Total Tasks',
                completed: 'Completed',
                incomplete: 'Incomplete',
                noTaskData: 'No task data available',
                noTimeSchedule: 'No time schedule available',
                noTaskSchedule: 'üìù No tasks scheduled for today, consider planning tomorrow\'s work priorities',
                noCompletedTasks: 'No completed tasks yet',
                byPriority: 'By Priority:',
                byStatus: 'By Status:',
                byTimeSlot: 'By Time Slot:',
                high: 'High',
                medium: 'Medium',
                low: 'Low',
                pending: 'Pending',
                morning: 'Morning',
                afternoon: 'Afternoon',
                evening: 'Evening',
                highPriorityTasks: ' high priority tasks pending',
                excellentPerformance: 'üéâ Excellent performance!',
                keepGoing: 'üí™ Keep going!',
                needSpeedUp: '‚ö° Need to speed up',
                completionStatus: 'Completion Status',
                taskDistribution: 'Task Distribution',
                completionRate: 'Completion Rate',
                avgCompletionTime: 'Average Completion Time',
                taskAnalysis: 'Task Analysis',
                timeManagementSuggestions: 'Time Management Suggestions',
                smartSuggestionsDesc: 'Based on your tasks and schedule, the system will provide personalized suggestions',
                noCompletedTasks: 'No completed tasks yet',
                
                // ÊøÄÂä±Ê∂àÊÅØÁõ∏ÂÖ≥
                encouragement: {
                    morning: {
                        high: ['Good morning! A new day, a new beginning! ‚òÄÔ∏è', 'Good morning! Keep going today! üí™', 'The morning light is perfect, let\'s work together! üåÖ'],
                        medium: ['Good morning! Steady progress, small gains add up! üìà', 'Good morning! Every step counts! üë£', 'A new day, new possibilities! ‚ú®'],
                        low: ['Good morning! Don\'t rush, take it slow! üå±', 'Good morning! You can do better today! üí°', 'New beginning, new opportunities! üéØ']
                    },
                    afternoon: {
                        high: ['Good afternoon! Keep up this momentum! üöÄ', 'Great! Really efficient! ‚≠ê', 'Excellent! You\'re my role model! üèÜ'],
                        medium: ['Good afternoon! Balance work and rest! ‚è∞', 'Come on! Victory is ahead! üéñÔ∏è', 'Hold on! You can do it! üí™'],
                        low: ['Good afternoon! Take a break and continue! ‚òï', 'Don\'t be discouraged, start over! üîÑ', 'Slow and steady wins the race! üê¢']
                    },
                    evening: {
                        high: ['Good evening! Great performance today! üåü', 'Amazing! I\'m proud of you! üéâ', 'Perfect day! Rest well! üò¥'],
                        medium: ['Good evening! You worked hard today too! üëç', 'Nice! Keep going tomorrow! üåô', 'Hard work today! Take a break! üå∫'],
                        low: ['Good evening! Tomorrow will be better! üåà', 'It\'s okay, rest is for the longer journey! üõ§Ô∏è', 'Thank you for today! Good night! üí§']
                    },
                    
                    // Áå´Âí™Âä©ÊâãÁõ∏ÂÖ≥
                    smartAnalysis: 'üìä Smart Analysis',
                     todayCompleted: 'Today Completed',
                     pendingTasks: 'Pending Tasks',
                     completionRate: 'Completion Rate',
                     smartEncouragement: 'üí™ Smart Encouragement',
                     smartSuggestions: 'üí° Smart Suggestions',
                     catEncouragement: {
                         noTasks: 'Start your task management journey!',
                         allCompleted: 'Amazing! All tasks completed!',
                         halfway: 'Keep going! Halfway there!',
                         start: 'Keep trying, you can do it!'
                     },
                     catSuggestions: {
                         noTasks1: 'Add your first task to get started!',
                         noTasks2: 'Use smart time recognition to add tasks quickly!',
                         hasTasks1: 'Manage your time wisely to improve efficiency!',
                         hasTasks2: 'Remember to take breaks and maintain focus!'
                     }
                },
                catMood: {
                    happy: ' The cat is happy for you! üê±',
                    hungry: ' The cat says you need to recharge! üêü',
                    sleepy: ' The cat reminds you to rest! üò¥'
                },
                taskAdvice: {
                    tooMany: ' Too many tasks, prioritize important ones.',
                    overdue: ' There are overdue tasks that need special attention.',
                    allDone: ' All tasks for today completed, awesome!'
                },
                
                // ÊïôÁ®ãÁõ∏ÂÖ≥
                tutorialTitle: 'Welcome to Speed List',
                tutorial: 'Tutorial',
                tutorialStep1: 'Quick Add Tasks',
                tutorialStep2: 'Set Priority',
                tutorialStep3: 'View Statistics',
                tutorialStep4: 'Personalize Settings',
                next: 'Next',
                previous: 'Previous',
                skip: 'Skip Tutorial',
                start: 'Get Started',
                title: 'Speed List Tutorial',
                tutorialWelcomeTitle: 'Welcome to Speed List',
                tutorialWelcomeDesc: 'Your Smart Task Management Assistant',
                tutorialSmartTimeTitle: 'üß† Smart Time Recognition',
                tutorialSmartTimeDesc: 'Input natural language, system automatically recognizes time! Try these magical inputs:',
                tutorialQuickTaskTitle: '‚ö° Lightning Task Management',
                tutorialQuickTaskDesc: 'Lightning-fast task operation experience, double your efficiency!',
                tutorialStatsTitle: 'üìä Smart Statistical Analysis',
                tutorialStatsDesc: 'Deep analysis of your task data, providing professional insights!',
                tutorialPersonalizationTitle: '‚öôÔ∏è Personalization Settings',
                tutorialPersonalizationDesc: 'Create your exclusive task management experience!',
                tutorialLanguageSetting: 'Language Switch',
                tutorialLanguageSettingDesc: 'Switch between Chinese and English freely',
                tutorialThemeSetting: 'Theme Style',
                tutorialThemeSettingDesc: 'Choose from multiple themes at will',
                tutorialNotificationSetting: 'Notification Reminders',
                tutorialNotificationSettingDesc: 'Smart reminders to never miss',
                tutorialProfileSetting: 'Personal Profile',
                tutorialProfileSettingDesc: 'Customize name and avatar',
                tutorialWorkTimeSetting: 'Work Hours',
                tutorialWorkTimeSettingDesc: 'Set your work time periods',
                tutorialKeywordSetting: 'Keyword Recognition',
                tutorialKeywordSettingDesc: 'Customize time keywords',
                tutorialDataSetting: 'Data Management',
                tutorialDataSettingDesc: 'Import and export task data',
                tutorialUITitle: 'üé® Beautiful Interface Design',
                tutorialUIDesc: 'Modern glass morphism design, making task management enjoyable!',
                tutorialTipsTitle: 'üí° Usage Tips',
                tutorialTipsDesc: 'Master these tips to double your efficiency!',
                
                // ÁïåÈù¢ËÆæËÆ°Â≠êÈ°π
                tutorialGlassEffect: '‚ú® Glass Effect',
                tutorialGlassEffectDesc: 'Semi-transparent frosted glass texture, full of modernity',
                tutorialSmoothAnimation: 'üåà Smooth Animations',
                tutorialSmoothAnimationDesc: 'Carefully designed transition animations, silky smooth operations',
                tutorialResponsiveDesign: 'üì± Responsive Design',
                tutorialResponsiveDesignDesc: 'Perfectly adapts to various devices, manage tasks anytime, anywhere',
                tutorialMicroInteraction: 'üéØ Micro-interactions',
                tutorialMicroInteractionDesc: 'Micro-interaction design, every operation has feedback',
                
                // ÊûÅÈÄü‰ªªÂä°ÁÆ°ÁêÜÂ≠êÈ°π
                tutorialQuickAdd: 'Quick Add',
                tutorialQuickAddDesc: 'Enter task content, press Enter or click button to add',
                tutorialOneClickComplete: 'One-click Complete',
                tutorialOneClickCompleteDesc: 'Click the check button, task completed instantly with beautiful animation',
                tutorialPrioritySetting: 'Priority Setting',
                tutorialPrioritySettingDesc: 'Three-level priority system, important tasks handled first',
                tutorialFlexibleEdit: 'Flexible Edit',
                tutorialFlexibleEditDesc: 'Modify task content, time and priority anytime',
                
                // Êô∫ËÉΩÁªüËÆ°ÂàÜÊûêÂ≠êÈ°π
                tutorialVisualizationTitle: 'üìà Visualization Charts',
                tutorialTrendChart: 'Completion trend chart',
                tutorialPriorityChart: 'Priority distribution pie chart',
                tutorialTimeAnalysis: 'Task time distribution analysis',
                tutorialAISummaryTitle: 'üß† AI Smart Summary',
                tutorialTodayOverview: 'Today\'s task overview',
                tutorialTaskCategories: 'Task category statistics',
                tutorialEfficiencyTips: 'Efficiency improvement suggestions',
                
                // ‰ΩøÁî®ÊäÄÂ∑ßÂ≠êÈ°π
                tutorialTip1Title: 'Priority Keywords',
                tutorialTip1Desc: 'Add words like "high priority", "important" in task description to auto-set priority',
                tutorialTip2Title: 'Shortcut Support',
                tutorialTip2Desc: 'Press Enter in input box to quickly add, Esc to cancel input',
                tutorialTip3Title: 'Data Export',
                tutorialTip3Desc: 'Support exporting task data for backup and sharing',
                
                // Êô∫ËÉΩÊó∂Èó¥ËØÜÂà´
                tutorialTimeSupport: 'Supports relative time (tomorrow, day after tomorrow, next week) and absolute time (specific date)',
                
                // Êô∫ËÉΩÊó∂Èó¥ËØÜÂà´Á§∫‰æã
                tutorialExample1: 'Meeting at 2pm tomorrow afternoon',
                tutorialExample1Result: '‚Üí Automatically recognized as tomorrow 14:00',
                tutorialExample2: 'Exam the day after tomorrow morning',
                tutorialExample2Result: '‚Üí Automatically recognized as day after tomorrow 09:00',
                tutorialExample3: 'Complete report next Monday',
                tutorialExample3Result: '‚Üí Automatically recognized as next Monday specified time',
                
                // ÈÄöÁü•Ê∂àÊÅØ
                success: 'Success',
                error: 'Error',
                warning: 'Warning',
                info: 'Info',
                taskAdded: 'Task added successfully',
                taskDeleted: 'Task deleted successfully',
                taskCompleted: 'Task completed',
                settingsSaved: 'Settings saved',
                
                // Áå´Âí™Âä©Êâã
                catAssistant: 'Smart Cat Assistant',
                petCat: 'Pet',
                encouragementTitle: 'Smart Encouragement',
                suggestions: 'Smart Suggestions',
                
                // Âàõ‰ΩúËÄÖ‰ø°ÊÅØ
                createdWith: 'Created with',
                developer: 'suducat',
                
                // ÂÖ∂‰ªñ
                confirm: 'Confirm',
                ok: 'OK',
                yes: 'Yes',
                no: 'No',
                close: 'Close',
                loading: 'Loading...',
                noData: 'No Data',
                search: 'Search',
                filter: 'Filter',
                sort: 'Sort',
                
                // Êô∫ËÉΩÂª∫ËÆÆÂíåÂàÜÊûê
                smartSuggestions: 'Smart Suggestions',
                smartSuggestionsDesc: 'Based on your tasks and schedule, the system will provide personalized suggestions',
                timeManagementSuggestions: 'Time Management Suggestions',
                taskAnalysis: 'Task Analysis',
                taskCompletionRate: 'Task Completion Rate',
                avgCompletionTime: 'Average Completion Time',
                
                // Êï∞ÊçÆÁÆ°ÁêÜÁõ∏ÂÖ≥
                all: 'All',
                todayFilter: 'Today',
                yesterday: 'Yesterday',
                thisWeek: 'This Week',
                exportJSON: 'Export JSON',
                exportCSV: 'Export CSV',
                backupData: 'Backup Data',
                restoreData: 'Restore Data',
                
                // Âø´ÈÄüÂæÖÂäûÁõ∏ÂÖ≥
                quickTodo: {
                    title: 'Quick Todo',
                    today: 'Today',
                    tomorrow: 'Tomorrow',
                    yesterday: 'Yesterday',
                    thisWeek: 'This Week',
                    all: 'All',
                    noTasks: 'No tasks',
                    completed: 'Completed',
                    pending: 'Pending'
                },
                
                // Êô∫ËÉΩÊÄªÁªìÁõ∏ÂÖ≥
                todayOverview: 'Today Overview',
                taskCategories: 'Task Categories',
                timeAllocation: 'Time Allocation',
                smartSuggestions: 'Smart Suggestions',
                completedTaskHistory: 'Completed Task History',
                dataManagement: 'Data Management',
                
                // ÈÄöÁü•ËÆæÁΩÆ
                notificationSettings: 'Notification Settings',
                browserNotifications: 'Browser Notifications',
                browserNotificationsDesc: 'Enable desktop notification reminders',
                requestPermission: 'Request Permission',
                taskReminder: 'Task Reminder',
                taskReminderDesc: 'Automatically remind before tasks expire',
                soundReminder: 'Sound Reminder',
                soundReminderDesc: 'Play reminder sound'
                }
            },
            
            // ÂàùÂßãÂåñËØ≠Ë®ÄÁ≥ªÁªü
            init() {
                // ‰ªélocalStorageËé∑Âèñ‰øùÂ≠òÁöÑËØ≠Ë®ÄËÆæÁΩÆ
                const savedLanguage = Storage.get('language', 'zh');
                this.currentLanguage = savedLanguage;
                
                // ËÆæÁΩÆHTML langÂ±ûÊÄß
                document.documentElement.lang = this.currentLanguage === 'zh' ? 'zh-CN' : 'en';
                
                // Â∫îÁî®ÂΩìÂâçËØ≠Ë®Ä
                this.applyLanguage();
            },
            
            // Ëé∑ÂèñÊñáÊú¨
            t(key) {
                const keys = key.split('.');
                let value = this.texts[this.currentLanguage];
                
                for (const k of keys) {
                    if (value && value[k]) {
                        value = value[k];
                    } else {
                        // Â¶ÇÊûúÂΩìÂâçËØ≠Ë®ÄÊ≤°ÊúâËØ•ÊñáÊú¨ÔºåÂ∞ùËØï‰ΩøÁî®‰∏≠Êñá‰Ωú‰∏∫ÈªòËÆ§
                        value = this.texts.zh;
                        for (const k of keys) {
                            if (value && value[k]) {
                                value = value[k];
                            } else {
                                return key; // Â¶ÇÊûúÈÉΩÊ≤°ÊúâÔºåËøîÂõûkey
                            }
                        }
                        break;
                    }
                }
                
                return value || key;
            },
            
            // ÂàáÊç¢ËØ≠Ë®Ä
            switchLanguage(lang) {
                if (this.languages[lang] && lang !== this.currentLanguage) {
                    this.currentLanguage = lang;
                    Storage.set('language', lang);
                    document.documentElement.lang = lang === 'zh' ? 'zh-CN' : 'en';
                    this.applyLanguage();
                    return true;
                }
                return false;
            },
            
            // Â∫îÁî®ËØ≠Ë®ÄÂà∞ÁïåÈù¢
            applyLanguage() {
                // Êõ¥Êñ∞È°µÈù¢Ê†áÈ¢ò
                document.title = `${this.t('appName')} - ${this.t('appSubtitle')}`;
                
                // Êõ¥Êñ∞Â∏¶Êúâdata-i18nÂ±ûÊÄßÁöÑÂÖÉÁ¥†
                const elements = document.querySelectorAll('[data-i18n]');
                elements.forEach(element => {
                    const key = element.getAttribute('data-i18n');
                    const text = this.t(key);
                    
                    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                        element.placeholder = text;
                    } else {
                        element.textContent = text;
                    }
                });
                
                // Êõ¥Êñ∞Â∏¶Êúâdata-i18n-placeholderÂ±ûÊÄßÁöÑÂÖÉÁ¥†
                const placeholderElements = document.querySelectorAll('[data-i18n-placeholder]');
                placeholderElements.forEach(element => {
                    const key = element.getAttribute('data-i18n-placeholder');
                    element.placeholder = this.t(key);
                });
                
                // Êõ¥Êñ∞Â∏¶Êúâdata-i18n-titleÂ±ûÊÄßÁöÑÂÖÉÁ¥†
                const titleElements = document.querySelectorAll('[data-i18n-title]');
                titleElements.forEach(element => {
                    const key = element.getAttribute('data-i18n-title');
                    element.title = this.t(key);
                });
                
                // Êõ¥Êñ∞Â∏¶Êúâdata-i18n-valueÂ±ûÊÄßÁöÑÂÖÉÁ¥†
                const valueElements = document.querySelectorAll('[data-i18n-value]');
                valueElements.forEach(element => {
                    const key = element.getAttribute('data-i18n-value');
                    element.value = this.t(key);
                });
                
                // Êõ¥Êñ∞Áå´Âí™Âä©ÊâãÁïåÈù¢
                if (typeof updateCatAssistantTexts === 'function') {
                    updateCatAssistantTexts();
                }
                if (typeof updateCatAssistantContent === 'function') {
                    updateCatAssistantContent();
                }
                if (typeof updateCatLanguageButtons === 'function') {
                    updateCatLanguageButtons(this.currentLanguage);
                }
                
                // Êõ¥Êñ∞‰∏ªÈ°µÊ¨¢ËøéÊ∂àÊÅØÂíåÊøÄÂä±ËØ≠Âè•
                if (typeof setWelcomeMessageAndMotivation === 'function') {
                    setWelcomeMessageAndMotivation();
                }
                
                // Ëß¶ÂèëËØ≠Ë®ÄÂàáÊç¢‰∫ã‰ª∂
                window.dispatchEvent(new CustomEvent('languageChanged', {
                    detail: { language: this.currentLanguage }
                }));
            },
            
            // Ëé∑ÂèñÂΩìÂâçËØ≠Ë®Ä
            getCurrentLanguage() {
                return this.currentLanguage;
            },
            
            // Ëé∑ÂèñÂèØÁî®ËØ≠Ë®ÄÂàóË°®
            getAvailableLanguages() {
                return Object.keys(this.languages).map(key => ({
                    code: key,
                    name: this.languages[key]
                }));
            }
        };

        // Áªü‰∏ÄÁöÑStorageÂ∑•ÂÖ∑ÂáΩÊï∞ - ÊÄßËÉΩ‰ºòÂåñÁâà
        const Storage = {
            // ÂÜÖÂ≠òÁºìÂ≠ò
            cache: new Map(),
            
            // ÊâπÈáè‰øùÂ≠òÈòüÂàó
            saveQueue: new Map(),
            
            // Èò≤ÊäñÂÆöÊó∂Âô®
            debounceTimer: null,
            
            // Ëé∑ÂèñÊï∞ÊçÆÔºàÂ∏¶ÁºìÂ≠òÔºâ
            get(key, defaultValue = null) {
                // ÂÖàÊ£ÄÊü•ÂÜÖÂ≠òÁºìÂ≠ò
                if (this.cache.has(key)) {
                    return this.cache.get(key);
                }
                
                try {
                    const value = localStorage.getItem(key);
                    const parsedValue = value !== null ? JSON.parse(value) : defaultValue;
                    // Â≠òÂÖ•ÁºìÂ≠ò
                    this.cache.set(key, parsedValue);
                    return parsedValue;
                } catch (e) {
                    // ÈùôÈªòÂ§ÑÁêÜlocalStorageËß£ÊûêÈîôËØØ
                    return defaultValue;
                }
            },
            
            // ËÆæÁΩÆÊï∞ÊçÆÔºàÊâπÈáè‰øùÂ≠òÔºâ
            set(key, value) {
                // Êõ¥Êñ∞ÂÜÖÂ≠òÁºìÂ≠ò
                this.cache.set(key, value);
                // Âä†ÂÖ•‰øùÂ≠òÈòüÂàó
                this.saveQueue.set(key, value);
                
                // Èò≤Êäñ‰øùÂ≠ò
                this.debouncedSave();
                return true;
            },
            
            // ÊâπÈáè‰øùÂ≠òÂ§ö‰∏™ÈîÆÂÄºÂØπ
            setBatch(items) {
                items.forEach(([key, value]) => {
                    this.cache.set(key, value);
                    this.saveQueue.set(key, value);
                });
                this.debouncedSave();
                return true;
            },
            
            // Èò≤Êäñ‰øùÂ≠òÂà∞localStorage
            debouncedSave() {
                if (this.debounceTimer) {
                    clearTimeout(this.debounceTimer);
                }
                
                this.debounceTimer = setTimeout(() => {
                    this.flushSaveQueue();
                }, 300); // 300msÈò≤ÊäñÂª∂Ëøü
            },
            
            // Á´ãÂç≥Âà∑Êñ∞‰øùÂ≠òÈòüÂàó
            flushSaveQueue() {
                if (this.saveQueue.size === 0) return;
                
                try {
                    // ÊâπÈáè‰øùÂ≠ò
                    this.saveQueue.forEach((value, key) => {
                        localStorage.setItem(key, JSON.stringify(value));
                    });
                    this.saveQueue.clear();
                } catch (e) {
                    // ÈùôÈªòÂ§ÑÁêÜÊâπÈáè‰øùÂ≠òÈîôËØØ
                }
            },
            
            // Âà†Èô§Êï∞ÊçÆ
            remove(key) {
                this.cache.delete(key);
                this.saveQueue.delete(key);
                
                try {
                    localStorage.removeItem(key);
                    return true;
                } catch (e) {
                    // ÈùôÈªòÂ§ÑÁêÜlocalStorageÂà†Èô§ÈîôËØØ
                    return false;
                }
            },
            
            // Ê∏ÖÁ©∫ÊâÄÊúâÊï∞ÊçÆ
            clear() {
                this.cache.clear();
                this.saveQueue.clear();
                
                try {
                    localStorage.clear();
                    return true;
                } catch (e) {
                    // ÈùôÈªòÂ§ÑÁêÜlocalStorageÊ∏ÖÁ©∫ÈîôËØØ
                    return false;
                }
            },
            
            // Ëé∑ÂèñÊâÄÊúâÈîÆÂêç
            keys() {
                try {
                    return Object.keys(localStorage);
                } catch (e) {
                    // ÈùôÈªòÂ§ÑÁêÜlocalStorageËé∑ÂèñÈîÆÂêçÈîôËØØ
                    return [];
                }
            },
            
            // Ê£ÄÊü•ÈîÆÊòØÂê¶Â≠òÂú®
            has(key) {
                // ÂÖàÊ£ÄÊü•ÁºìÂ≠ò
                if (this.cache.has(key)) {
                    return true;
                }
                
                try {
                    return localStorage.getItem(key) !== null;
                } catch (e) {
                    // ÈùôÈªòÂ§ÑÁêÜlocalStorageÊ£ÄÊü•ÈîôËØØ
                    return false;
                }
            },
            
            // Âº∫Âà∂Á´ãÂç≥‰øùÂ≠òÊâÄÊúâÂæÖ‰øùÂ≠òÊï∞ÊçÆ
            forceSave() {
                if (this.debounceTimer) {
                    clearTimeout(this.debounceTimer);
                    this.debounceTimer = null;
                }
                this.flushSaveQueue();
            }
        };

        // Ëá™ÂÆö‰πâÂØπËØùÊ°ÜÁ≥ªÁªü
        const CustomDialog = {
            // ÊòæÁ§∫Á°ÆËÆ§ÂØπËØùÊ°Ü
            confirm: function(options) {
                return new Promise((resolve) => {
                    const dialog = document.getElementById('custom-confirm-dialog');
                    const content = document.getElementById('custom-confirm-content');
                    const icon = document.getElementById('custom-confirm-icon');
                    const iconElement = document.getElementById('custom-confirm-icon-i');
                    const title = document.getElementById('custom-confirm-title');
                    const message = document.getElementById('custom-confirm-message');
                    const details = document.getElementById('custom-confirm-details');
                    const okBtn = document.getElementById('custom-confirm-ok');
                    const cancelBtn = document.getElementById('custom-confirm-cancel');
                    
                    // ËÆæÁΩÆÂÜÖÂÆπ
                    title.textContent = options.title || 'Á°ÆËÆ§Êìç‰Ωú';
                    message.textContent = options.message || 'ÊÇ®Á°ÆÂÆöË¶ÅÊâßË°åÊ≠§Êìç‰ΩúÂêóÔºü';
                    
                    // ËÆæÁΩÆÂõæÊ†áÂíåÈ¢úËâ≤
                    if (options.type === 'danger') {
                        icon.className = 'flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center mr-4 bg-red-100';
                        iconElement.className = 'fa fa-exclamation-triangle text-red-600 text-xl';
                        okBtn.className = 'flex-1 px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all-300 font-medium';
                    } else if (options.type === 'warning') {
                        icon.className = 'flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center mr-4 bg-orange-100';
                        iconElement.className = 'fa fa-exclamation-triangle text-orange-600 text-xl';
                        okBtn.className = 'flex-1 px-4 py-2 bg-orange-500 text-white rounded-xl hover:bg-orange-600 transition-all-300 font-medium';
                    } else {
                        icon.className = 'flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center mr-4 bg-blue-100';
                        iconElement.className = 'fa fa-question text-blue-600 text-xl';
                        okBtn.className = 'flex-1 px-4 py-2 bg-primary text-white rounded-xl hover:bg-primary/90 transition-all-300 font-medium';
                    }
                    
                    // ËÆæÁΩÆËØ¶ÁªÜ‰ø°ÊÅØ
                    if (options.details) {
                        details.textContent = options.details;
                        details.classList.remove('hidden');
                    } else {
                        details.classList.add('hidden');
                    }
                    
                    // ËÆæÁΩÆÊåâÈíÆÊñáÊú¨
                    if (options.okText) okBtn.textContent = options.okText;
                    if (options.cancelText) cancelBtn.textContent = options.cancelText;
                    
                    // ÊòæÁ§∫ÂØπËØùÊ°Ü
                    dialog.classList.remove('hidden');
                    dialog.classList.add('flex');
                    
                    // Âä®ÁîªÊïàÊûú
                    setTimeout(() => {
                        content.classList.remove('scale-95', 'opacity-0');
                        content.classList.add('scale-100', 'opacity-100');
                    }, 10);
                    
                    // ÁªëÂÆö‰∫ã‰ª∂
                    const handleConfirm = () => {
                        hideCustomConfirm();
                        resolve(true);
                    };
                    
                    const handleCancel = () => {
                        hideCustomConfirm();
                        resolve(false);
                    };
                    
                    okBtn.onclick = handleConfirm;
                    cancelBtn.onclick = handleCancel;
                    
                    // ESCÈîÆÂèñÊ∂à
                    const handleEsc = (e) => {
                        if (e.key === 'Escape') {
                            handleCancel();
                            document.removeEventListener('keydown', handleEsc);
                        }
                    };
                    document.addEventListener('keydown', handleEsc);
                });
            },
            
            // ÊòæÁ§∫ÊèêÁ§∫ÂØπËØùÊ°Ü
            alert: function(options) {
                return new Promise((resolve) => {
                    const dialog = document.getElementById('custom-alert-dialog');
                    const content = document.getElementById('custom-alert-content');
                    const icon = document.getElementById('custom-alert-icon');
                    const iconElement = document.getElementById('custom-alert-icon-i');
                    const title = document.getElementById('custom-alert-title');
                    const message = document.getElementById('custom-alert-message');
                    const okBtn = document.getElementById('custom-alert-ok');
                    
                    // ËÆæÁΩÆÂÜÖÂÆπ
                    title.textContent = options.title || 'ÊèêÁ§∫';
                    message.textContent = options.message || 'Êìç‰ΩúÊèêÁ§∫‰ø°ÊÅØ';
                    
                    // ËÆæÁΩÆÂõæÊ†áÂíåÈ¢úËâ≤
                    if (options.type === 'success') {
                        icon.className = 'flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center mr-4 bg-green-100';
                        iconElement.className = 'fa fa-check text-green-600 text-xl';
                    } else if (options.type === 'error') {
                        icon.className = 'flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center mr-4 bg-red-100';
                        iconElement.className = 'fa fa-times text-red-600 text-xl';
                    } else if (options.type === 'warning') {
                        icon.className = 'flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center mr-4 bg-orange-100';
                        iconElement.className = 'fa fa-exclamation-triangle text-orange-600 text-xl';
                    } else {
                        icon.className = 'flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center mr-4 bg-blue-100';
                        iconElement.className = 'fa fa-info text-blue-600 text-xl';
                    }
                    
                    // ËÆæÁΩÆÊåâÈíÆÊñáÊú¨
                    if (options.okText) okBtn.textContent = options.okText;
                    
                    // ÊòæÁ§∫ÂØπËØùÊ°Ü
                    dialog.classList.remove('hidden');
                    dialog.classList.add('flex');
                    
                    // Âä®ÁîªÊïàÊûú
                    setTimeout(() => {
                        content.classList.remove('scale-95', 'opacity-0');
                        content.classList.add('scale-100', 'opacity-100');
                    }, 10);
                    
                    // ÁªëÂÆö‰∫ã‰ª∂
                    const handleOk = () => {
                        hideCustomAlert();
                        resolve();
                    };
                    
                    okBtn.onclick = handleOk;
                    
                    // ESCÈîÆÂÖ≥Èó≠
                    const handleEsc = (e) => {
                        if (e.key === 'Escape') {
                            handleOk();
                            document.removeEventListener('keydown', handleEsc);
                        }
                    };
                    document.addEventListener('keydown', handleEsc);
                });
            }
        };
        
        // ÈöêËóèËá™ÂÆö‰πâÁ°ÆËÆ§ÂØπËØùÊ°Ü
        function hideCustomConfirm() {
            const dialog = document.getElementById('custom-confirm-dialog');
            const content = document.getElementById('custom-confirm-content');
            
            content.classList.remove('scale-100', 'opacity-100');
            content.classList.add('scale-95', 'opacity-0');
            
            setTimeout(() => {
                dialog.classList.add('hidden');
                dialog.classList.remove('flex');
            }, 200);
        }
        
        // ÈöêËóèËá™ÂÆö‰πâÊèêÁ§∫ÂØπËØùÊ°Ü
        function hideCustomAlert() {
            const dialog = document.getElementById('custom-alert-dialog');
            const content = document.getElementById('custom-alert-content');
            
            content.classList.remove('scale-100', 'opacity-100');
            content.classList.add('scale-95', 'opacity-0');
            
            setTimeout(() => {
                dialog.classList.add('hidden');
                dialog.classList.remove('flex');
            }, 200);
        }

        // ÂÖ®Â±ÄÂèòÈáè
        let tasks = [];
        let currentTaskId = null;
        let completionChart = null;
        let taskToAdd = null; // Áî®‰∫éÂ§ÑÁêÜÂÜ≤Á™ÅÁöÑ‰∏¥Êó∂‰ªªÂä°
        
        // Êñ∞ÊâãÊïôÁ®ãÁõ∏ÂÖ≥ÂèòÈáè
        let currentTutorialStep = 0;
        let totalTutorialSteps = 6;
        
        // ‰ºòÂÖàÁ∫ßÈÖçÁΩÆ
        const priorityConfig = {
            low: {
                color: "bg-green-100 text-green-800 border-green-200",
                badge: "bg-green-100 text-green-800",
                icon: "fa-arrow-down",
                text: "‰Ωé‰ºòÂÖàÁ∫ß"
            },
            medium: {
                color: "bg-blue-100 text-blue-800 border-blue-200",
                badge: "bg-blue-100 text-blue-800",
                icon: "fa-minus",
                text: "‰∏≠‰ºòÂÖàÁ∫ß"
            },
            high: {
                color: "bg-red-100 text-red-800 border-red-200",
                badge: "bg-red-100 text-red-800",
                icon: "fa-arrow-up",
                text: "È´ò‰ºòÂÖàÁ∫ß"
            }
        };

        // ÂàùÂßãÂåñÈªòËÆ§Êó∂Èó¥ÂÖ≥ÈîÆËØçÈÖçÁΩÆ
        function initDefaultTimeKeywordsConfig() {
            const existingConfig = Storage.get('timeKeywordsConfig');
            const defaultConfig = {
                morning: {
                    keywords: ['Êó©‰∏ä', '‰∏äÂçà', 'Ê∏ÖÊô®', '‰∏ÄÂ§ßÊó©', 'ÈªéÊòé', 'Êó©Èó¥'],
                    defaultTime: '09:00'
                },
                afternoon: {
                    keywords: ['‰∏ãÂçà', 'ÂçàÂêé', '‰∏≠ÂçàÂêé', 'ÂçàÈó¥'],
                    defaultTime: '14:00'
                },
                evening: {
                    keywords: ['Êôö‰∏ä', 'Â§úÈáå', 'Â§úÊôö', 'ÂÖ•Â§ú', 'ÈªÑÊòè', 'ÂÇçÊôö', 'ÊôöÈó¥'],
                    defaultTime: '19:00'
                },
                custom: {}
            };
            
            // Âº∫Âà∂ÈáçÊñ∞ÂàùÂßãÂåñÈÖçÁΩÆÔºåÁ°Æ‰øùÈÖçÁΩÆÂÆåÊï¥
            if (!existingConfig || Object.keys(existingConfig).length === 0 || 
                !existingConfig.evening || !existingConfig.evening.keywords) {
                Storage.set('timeKeywordsConfig', defaultConfig);
                // ÂàùÂßãÂåñÈªòËÆ§Êó∂Èó¥ÂÖ≥ÈîÆËØçÈÖçÁΩÆ
            }
        }

        // ÂàùÂßãÂåñÂ∫îÁî®
        function initApp() {
            // ÂàùÂßãÂåñÂ∫îÁî®
            
            // ÂàùÂßãÂåñi18nÁøªËØëÁ≥ªÁªü
            i18n.init();
            
            // ÂàùÂßãÂåñÈªòËÆ§Êó∂Èó¥ÂÖ≥ÈîÆËØçÈÖçÁΩÆ
            initDefaultTimeKeywordsConfig();
            
            // Ê∏ÖÁêÜËøáÊúüÁöÑÂ∑≤ÂÆåÊàê‰ªªÂä°ÔºàÁ¨¨‰∫åÂ§©Ëá™Âä®Ê∂àÂ§±Ôºâ
            cleanExpiredCompletedTasks();
            
            // ÂàùÂßãÂåñÊë∏Êë∏ËÆ°Êï∞
            catPetCount = Storage.get('catPetCount', 0);
            const petCountElement = document.getElementById('petCount');
            if (petCountElement) {
                petCountElement.textContent = catPetCount;
            }
            
            // ÂàùÂßãÂåñËèúÂçïÁÆ°ÁêÜÂô®
            menuManager.init();
            
            // Êó∂Èó¥Ëß£ÊûêÊµãËØïÂ∑≤Á¶ÅÁî® - Áîü‰∫ßÁéØÂ¢ÉÁßªÈô§
        
        // ËÆæÁΩÆÂΩìÂâçÊó•Êúü
            setCurrentDate();
            
            // ËÆæÁΩÆÊ¨¢Ëøé‰ø°ÊÅØÂíåÊøÄÂä±ËØ≠
            setWelcomeMessageAndMotivation();
            
            // ÂàùÂßãÂåñÁî®Êà∑ÊòæÁ§∫
            initUserDisplay();
            
            // Âä†ËΩΩ‰ªªÂä° - ‰ΩøÁî®Èò≤Êäñ‰ºòÂåñ
            loadTasks();
            
            // ÂàùÂßãÂåñÂæÖÂäûÊ∏ÖÂçïÊòæÁ§∫ - Âª∂ËøüÊâßË°å
            setTimeout(() => {
                renderTodoList();
                debouncedUpdateQuickTodoList();
                debouncedUpdateQuickTodoListTop();
                debouncedUpdateSmartSuggestions();
            }, 100);
            
            // Êõ¥Êñ∞Â§á‰ªΩÁä∂ÊÄÅ
            updateBackupStatus();
            
            // ÂàùÂßãÂåñÊèêÈÜíÁ≥ªÁªü
            initNotificationSystem();
            
            // ÈáçÊñ∞ÂÆâÊéíÊâÄÊúâÊèêÈÜí
            rescheduleAllReminders();
            
            // ÂàùÂßãÂåñÁå´Âí™Âä©Êâã
            initCatAssistant();
            
            // ÂàùÂßãÂåñDOMÁºìÂ≠ò
            initDOMCache();
            
            // ÂàùÂßãÂåñ‰∫ã‰ª∂ÁõëÂê¨
            initEventListeners();
            
            // ÂàùÂßãÂåñÊÄßËÉΩ‰ºòÂåñÔºàÊîæÂú®ÊúÄÂêéÔºåÁ°Æ‰øùÊâÄÊúâÂÖÉÁ¥†ÈÉΩÂ∑≤Âä†ËΩΩÔºâ
            initPerformanceOptimizations();
            
            // Êñ∞ÊâãÊïôÁ®ãÊ£ÄÊü•Â∑≤Âú® initTutorial ÂáΩÊï∞‰∏≠Â§ÑÁêÜ
            
            // Ê∑ªÂä†È°∂ÈÉ®Âø´ÈÄüÂæÖÂäûÂàóË°®Êó∂Èó¥Á≠õÈÄâ‰∫ã‰ª∂
            const quickTodoTop = document.getElementById('quick-todo-top');
            // ÁßªÈô§Êó∂Èó¥ËøáÊª§ÂäüËÉΩ
            
            // Âº∫Âà∂Êõ¥Êñ∞ÁªüËÆ°ÂæΩÁ´†ÔºåÁ°Æ‰øùÂàùÂßãÂåñÂêéÁä∂ÊÄÅÊ≠£Á°Æ - Âª∂ËøüÊâßË°å
            setTimeout(() => {
                if (typeof forceUpdateStatsBadge === 'function') {
                    forceUpdateStatsBadge();
                }
            }, 300);
        }
        
        // ÂØºËà™ÂäüËÉΩÂáΩÊï∞
        function showNavigation(type) {
            // ÈòªÊ≠¢‰∫ã‰ª∂ÂÜíÊ≥°ÔºåÈò≤Ê≠¢ËèúÂçïÂÖ≥Èó≠
            if (event) {
                event.preventDefault();
                event.stopPropagation();
            }
            
            const menuManager = window.menuManager;
            if (menuManager) {
                menuManager.updateActiveNavigation(type);
            }
            
            // ÂÖàÂÖ≥Èó≠ÂèØ‰º∏Áº©ËèúÂçï
            const mainMenuContent = document.getElementById('main-menu-content');
            if (mainMenuContent && !mainMenuContent.classList.contains('hidden')) {
                toggleMainMenu();
            }
            
            switch (type) {
                case 'home':
                    // ÊòæÁ§∫È¶ñÈ°µÂÜÖÂÆπ
                    if (menuManager) {
                        menuManager.closeCurrentPanel();
                    }
                    // Á°Æ‰øù‰∏ªÂÜÖÂÆπÂå∫ÂüüÂèØËßÅ
                    const mainContent = document.querySelector('main');
                    if (mainContent) {
                        mainContent.classList.remove('hidden');
                    }
                    break;
                case 'stats':
                    if (menuManager) {
                        menuManager.openPanel('stats-panel', '‰ªªÂä°ÁªüËÆ°');
                    }
                    break;
                case 'suggestions':
                    if (menuManager) {
                        menuManager.openPanel('suggestions-panel', 'Êó∂Èó¥Âª∫ËÆÆ');
                    }
                    break;
                case 'settings':
                    if (menuManager) {
                        menuManager.openPanel('settings-panel', 'ËÆæÁΩÆ');
                    }
                    break;
                default:
                    // ÈùôÈªòÂ§ÑÁêÜÊú™Áü•ÂØºËà™Á±ªÂûã
            }
        }
        
        // ÂÖ®Â±ÄÂáΩÊï∞ÔºöÂÖ≥Èó≠ÂΩìÂâçÈù¢Êùø
        function closeCurrentPanel() {
            const menuManager = window.menuManager;
            if (menuManager) {
                menuManager.closeCurrentPanel();
            }
        }
        
        // Ëß£ÊûêËá™ÁÑ∂ËØ≠Ë®ÄÊó∂Èó¥
        // Â¢ûÂº∫ÁâàËá™ÁÑ∂ËØ≠Ë®ÄÊó∂Èó¥ËØÜÂà´Á≥ªÁªü - ÊîØÊåÅ12/24Â∞èÊó∂Âà∂„ÄÅ‰∏≠Êñá„ÄÅÂè£ËØ≠„ÄÅÊòüÊúü„ÄÅÊó•Êúü
        function parseNaturalLanguageTime(input) {
            const now = new Date();
            const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
            let date = new Date(today);
            let time = null;
            let timeContext = { 
                isAfternoon: false, 
                isMorning: false, 
                isEvening: false, 
                isNight: false, 
                hasTimeKeyword: false,
                is12HourFormat: false,
                hasAMPM: false
            };
            
            // Ëé∑ÂèñÁî®Êà∑Ëá™ÂÆö‰πâÁöÑÊó∂Èó¥ÂÖ≥ÈîÆËØçÈÖçÁΩÆ
            const timeKeywordsConfig = Storage.get('timeKeywordsConfig', {});
            
            // È¢ÑÁºñËØëÊó∂Èó¥ÂÖ≥ÈîÆËØçÊò†Â∞ÑÔºåÊèêÈ´òÊÄßËÉΩ
            const timeKeywordMap = buildEnhancedTimeKeywordMap(timeKeywordsConfig);
            
            // Âø´ÈÄüÊ£ÄÊµãÊòØÂê¶ÂåÖÂê´Êó∂Èó¥Áõ∏ÂÖ≥‰ø°ÊÅØ
            const hasTimeContent = hasTimeRelatedContent(input, timeKeywordMap);
            
            if (!hasTimeContent) {
                return {
                    name: input.trim() || "Êñ∞‰ªªÂä°",
                    startTime: null,
                    isTodoItem: true
                };
            }
            
            // Ëß£ÊûêÂêÑ‰∏™Êó∂Èó¥Áª¥Â∫¶ - ÂÖàËß£ÊûêÊó∂Èó¥‰∏ä‰∏ãÊñá‰ª•Ëé∑ÂèñisTomorrowÊ†áËÆ∞
            parseEnhancedTimeContext(input, timeContext, timeKeywordMap, timeKeywordsConfig);
            parseEnhancedDateContext(input, date, today, now, timeContext);
            time = parseEnhancedSpecificTime(input, timeContext, timeKeywordsConfig);
            
            // Á°Æ‰øùÂ¶ÇÊûúÊúâÊó•ÊúüÂÖ≥ÈîÆËØç‰ΩÜÊ≤°ÊúâÊó∂Èó¥ÔºåËá≥Â∞ëËÆæÁΩÆhasTimeKeyword‰∏∫true
            if ((input.includes('ÊòéÂ§©') || input.includes('‰ªäÂ§©') || input.includes('ÂêéÂ§©') || 
                 input.includes('ÊòéÂÑø') || input.includes('‰ªäÂÑø') || input.includes('ÂêéÂÑø')) && 
                !timeContext.hasTimeKeyword) {
                timeContext.hasTimeKeyword = true;
            }
            
            // Â¶ÇÊûúÊ≤°ÊúâËß£ÊûêÂà∞ÂÖ∑‰ΩìÊó∂Èó¥ÔºåÂ∞ùËØï‰ΩøÁî®ÈªòËÆ§Êó∂Èó¥
            if (!time && timeContext.hasTimeKeyword) {
                // Á°Æ‰øùÂç≥‰ΩøÊ≤°ÊúâÊòéÁ°ÆÁöÑÊó∂Èó¥ÂÖ≥ÈîÆËØçÔºåÂè™Ë¶ÅÊúâÊó•Êúü‰ø°ÊÅØÂ∞±‰ΩøÁî®ÈªòËÆ§Êó∂Èó¥
                time = getDefaultTimeByContext(timeContext, timeKeywordsConfig);
                // Â¶ÇÊûú‰ªçÁÑ∂Ê≤°ÊúâÊó∂Èó¥ÔºåÂº∫Âà∂ËÆæÁΩÆ‰∏∫Êó©‰∏äÊó∂Èó¥
                if (!time) {
                    time = '09:00';
                }
            }
            
            // ËÆæÁΩÆÊúÄÁªàÊó∂Èó¥
            if (time) {
                const [hours, minutes] = time.split(':');
                const parsedHours = parseInt(hours);
                const parsedMinutes = parseInt(minutes);
                
                // È™åËØÅÊó∂Èó¥ÊòØÂê¶ÂêàÁêÜ
                if (parsedHours >= 0 && parsedHours <= 23 && parsedMinutes >= 0 && parsedMinutes <= 59) {
                    date.setHours(parsedHours, parsedMinutes, 0, 0);
                } else {
                    // Â¶ÇÊûúÊó∂Èó¥Êó†ÊïàÔºå‰ΩøÁî®ÈªòËÆ§Êó∂Èó¥
                    const fallbackTime = getDefaultTimeByContext(timeContext, timeKeywordsConfig);
                    if (fallbackTime) {
                        const [fallbackHours, fallbackMinutes] = fallbackTime.split(':');
                        date.setHours(parseInt(fallbackHours), parseInt(fallbackMinutes), 0, 0);
                    }
                }
            }
            
            // Ê∏ÖÁêÜ‰ªªÂä°ÂêçÁß∞
            const taskName = cleanEnhancedTaskName(input, timeKeywordMap);
            
            return {
                name: taskName,
                startTime: time ? formatLocalDateTime(date) : null,
                isTodoItem: !time
            };
        }
        
        // ÊûÑÂª∫Â¢ûÂº∫ÁâàÊó∂Èó¥ÂÖ≥ÈîÆËØçÊò†Â∞ÑË°®
        function buildEnhancedTimeKeywordMap(timeKeywordsConfig) {
            const keywordMap = {
                relativeDates: new Set([
                    'ÊòéÂ§©', 'ÂêéÂ§©', 'Êò®Â§©', 'ÂâçÂ§©', '‰ªäÂ§©', 'Â§ßÂêéÂ§©', 'Â§ßÂâçÂ§©', '‰ªäÊó•',
                    'ÊòéÂÑø', 'ÂêéÂÑø', 'Êò®ÂÑø', 'ÂâçÂÑø', '‰ªäÂÑø', 'Â§ßÂêéÂÑø', 'Â§ßÂâçÂÑø'
                ]),
                tomorrowCompound: new Set([
                    'ÊòéÊó©', 'ÊòéÊô®', 'Êòé‰∏äÂçà', 'ÊòéÂçà', 'Êòé‰∏≠Âçà', 'Êòé‰∏ãÂçà', 'ÊòéÂçàÂêé',
                    'ÊòéÊôö', 'ÊòéÂ§úÊôö', 'ÊòéÂ§úÈó¥', 'ÊòéÂ§ú', 'ÊòéÂáåÊô®', 'ÊòéÊ∑±Â§ú'
                ]),
                weekdays: new Set([
                    'Âë®‰∏Ä', 'Âë®‰∫å', 'Âë®‰∏â', 'Âë®Âõõ', 'Âë®‰∫î', 'Âë®ÂÖ≠', 'Âë®Êó•', 
                    'ÊòüÊúü‰∏Ä', 'ÊòüÊúü‰∫å', 'ÊòüÊúü‰∏â', 'ÊòüÊúüÂõõ', 'ÊòüÊúü‰∫î', 'ÊòüÊúüÂÖ≠', 'ÊòüÊúüÊó•', 'ÊòüÊúüÂ§©',
                    'Á§ºÊãú‰∏Ä', 'Á§ºÊãú‰∫å', 'Á§ºÊãú‰∏â', 'Á§ºÊãúÂõõ', 'Á§ºÊãú‰∫î', 'Á§ºÊãúÂÖ≠', 'Á§ºÊãúÊó•',
                    'Âë®1', 'Âë®2', 'Âë®3', 'Âë®4', 'Âë®5', 'Âë®6', 'Âë®7', 'Âë®0'
                ]),
                specialDays: new Set(['Âë®Êú´', 'Â∑•‰ΩúÊó•', 'Âπ≥Êó•', 'ËäÇÂÅáÊó•', '‰ºëÊÅØÊó•']),
                timePeriods: new Set([
                    '‰∏≠Âçà', 'Ê≠£Âçà', 'ÂçàÂ§ú', 'ÈªéÊòé', 'ÈªÑÊòè', 'ÂÇçÊôö', 'ÂáåÊô®', 'Ê∑±Â§ú',
                    'Êó©‰∏ä', '‰∏äÂçà', '‰∏ãÂçà', 'Êôö‰∏ä', 'Â§úÈáå', 'Â§úÊôö', 'ÂÖ•Â§ú',
                    'Ê∏ÖÊô®', '‰∏ÄÂ§ßÊó©', '‰∏ÄÂ§ßÊ∏ÖÊó©', 'Â§ßÊ∏ÖÊó©', 'Êó©Èó¥', 'ÂçàÈó¥', 'ÊôöÈó¥',
                    'am', 'pm', 'AM', 'PM'
                ]),
                timeUnits: new Set([
                    'ÁÇπ', 'Êó∂', 'ÂàÜ', 'ÂàÜÈíü', 'Â∞èÊó∂', 'Èíü', 'Âàª', 'Âçä', 'Êï¥'
                ]),
                colloquialTime: new Set([
                    '‰∏Ä‰ºöÂÑø', 'È©¨‰∏ä', 'Á´ãÂàª', 'Áé∞Âú®', 'ÂàöÊâç', 'ÂàöÂàö', 'ÂæÖ‰ºöÂÑø', 'Á≠â‰ºöÂÑø',
                    'Á®çÂêé', 'ÊôöÁÇπ', 'Êó©ÁÇπ', 'Ëøô‰ºöÂÑø', 'ÈÇ£‰ºöÂÑø', '‰∏Ä‰ºöÂÑøÂêé', 'È©¨‰∏äÂêé'
                ]),
                custom: {}
            };
            
            // Ê∑ªÂä†Áî®Êà∑Ëá™ÂÆö‰πâÂÖ≥ÈîÆËØç
            ['morning', 'afternoon', 'evening'].forEach(period => {
                if (timeKeywordsConfig[period] && timeKeywordsConfig[period].keywords) {
                    timeKeywordsConfig[period].keywords.forEach(keyword => {
                        keywordMap.timePeriods.add(keyword);
                    });
                }
            });
            
            if (timeKeywordsConfig.custom) {
                keywordMap.custom = timeKeywordsConfig.custom;
                Object.keys(timeKeywordsConfig.custom).forEach(keyword => {
                    keywordMap.timePeriods.add(keyword);
                });
            }
            
            return keywordMap;
        }
        
        // Âø´ÈÄüÊ£ÄÊµãÊó∂Èó¥Áõ∏ÂÖ≥ÂÜÖÂÆπ
        function hasTimeRelatedContent(input, keywordMap) {
            // Ê£ÄÊü•Êï∞Â≠óÊó∂Èó¥Ê†ºÂºè - ‰øÆÂ§çËøá‰∫éÂÆΩÊ≥õÁöÑÊ≠£ÂàôË°®ËææÂºè
            const hasTimeNumbers = /\d{1,2}[:ÁÇπÊó∂]\d{0,2}ÂàÜ?|\d{1,2}Êúà\d{1,2}Êó•|\d{1,2}\/\d{1,2}|\d{1,2}-\d{1,2}/.test(input) ||
                                 /[‰∏Ä‰∫å‰∏âÂõõ‰∫îÂÖ≠‰∏ÉÂÖ´‰πùÂçÅÈõ∂ÂªøÂçÖ]+[ÁÇπÊó∂]/.test(input) ||
                                 /[‰∏Ä‰∫å‰∏âÂõõ‰∫îÂÖ≠‰∏ÉÂÖ´‰πùÂçÅÈõ∂ÂªøÂçÖ]+Êúà[‰∏Ä‰∫å‰∏âÂõõ‰∫îÂÖ≠‰∏ÉÂÖ´‰πùÂçÅÈõ∂ÂªøÂçÖ]+Êó•/.test(input);
            
            if (hasTimeNumbers) return true;
            
            // Ê£ÄÊü•ÂÖ≥ÈîÆËØçÔºåÂåÖÊã¨Â§çÂêàÂÖ≥ÈîÆËØç
            const allKeywords = [
                ...keywordMap.relativeDates,
                ...keywordMap.tomorrowCompound,
                ...keywordMap.weekdays,
                ...keywordMap.specialDays,
                ...keywordMap.timePeriods,
                ...Object.keys(keywordMap.custom)
            ];
            
            return allKeywords.some(keyword => input.includes(keyword));
        }
        
        // Â¢ûÂº∫ÁâàÊó•Êúü‰∏ä‰∏ãÊñáËß£Êûê
        function parseEnhancedDateContext(input, date, today, now, timeContext = null) {
            // Ê£ÄÊü•ÊòØÂê¶ÊúâÊòéÂ§©Â§çÂêàÂÖ≥ÈîÆËØçÁöÑÊ†áËÆ∞
            if (timeContext && timeContext.isTomorrow) {
                date.setDate(today.getDate() + 1);
                return;
            }
            
            // Áõ∏ÂØπÊó•ÊúüËß£Êûê - Êâ©Â±ïÁâàÊú¨
            const relativeDateMap = {
                'Â§ßÂêéÂ§©': 3, 'ÂêéÂ§©': 2, 'ÊòéÂ§©': 1, '‰ªäÂ§©': 0, '‰ªäÊó•': 0, '‰ªäÂÑø': 0,
                'Â§ßÂâçÂ§©': -3, 'ÂâçÂ§©': -2, 'Êò®Â§©': -1, 'Êò®ÂÑø': -1,
                'ÊòéÂÑø': 1, 'ÂêéÂÑø': 2, 'Â§ßÂêéÂÑø': 3, 'ÂâçÂÑø': -2, 'Â§ßÂâçÂÑø': -3
            };
            
            for (const [dateStr, offset] of Object.entries(relativeDateMap)) {
                if (input.includes(dateStr)) {
                    date.setDate(today.getDate() + offset);
                    return;
                }
            }
            
            // Âë®ÊúüËß£Êûê - Â¢ûÂº∫ÁâàÊú¨
            if (input.includes('ËøôÂë®') || input.includes('Êú¨Âë®') || input.includes('ÂΩìÂâçÂë®')) {
                // ‰øùÊåÅÂΩìÂâçÂë®
            } else if (input.includes('‰∏ãÂë®') || input.includes('‰∏ã‰∏ÄÂë®')) {
                date.setDate(today.getDate() + 7);
            } else if (input.includes('‰∏äÂë®') || input.includes('‰∏ä‰∏ÄÂë®')) {
                date.setDate(today.getDate() - 7);
            }
            
            // ÊòüÊúüËß£Êûê - Â¢ûÂº∫ÁâàÊú¨
            const weekDayMapping = {
                'Âë®‰∏Ä': 1, 'ÊòüÊúü‰∏Ä': 1, 'Á§ºÊãú‰∏Ä': 1, 'Âë®1': 1,
                'Âë®‰∫å': 2, 'ÊòüÊúü‰∫å': 2, 'Á§ºÊãú‰∫å': 2, 'Âë®2': 2,
                'Âë®‰∏â': 3, 'ÊòüÊúü‰∏â': 3, 'Á§ºÊãú‰∏â': 3, 'Âë®3': 3,
                'Âë®Âõõ': 4, 'ÊòüÊúüÂõõ': 4, 'Á§ºÊãúÂõõ': 4, 'Âë®4': 4,
                'Âë®‰∫î': 5, 'ÊòüÊúü‰∫î': 5, 'Á§ºÊãú‰∫î': 5, 'Âë®5': 5,
                'Âë®ÂÖ≠': 6, 'ÊòüÊúüÂÖ≠': 6, 'Á§ºÊãúÂÖ≠': 6, 'Âë®6': 6,
                'Âë®Êó•': 0, 'ÊòüÊúüÊó•': 0, 'Á§ºÊãúÊó•': 0, 'ÊòüÊúüÂ§©': 0, 'Âë®0': 0, 'Âë®7': 0
            };
            
            for (const [dayName, dayNum] of Object.entries(weekDayMapping)) {
                if (input.includes(dayName)) {
                    const currentDay = now.getDay();
                    let daysUntilTarget = (dayNum - currentDay + 7) % 7;
                    if (daysUntilTarget === 0 && !input.includes('ËøôÂë®') && !input.includes('Êú¨Âë®') && !input.includes('ÂΩìÂâçÂë®')) {
                        daysUntilTarget = 7;
                    }
                    date.setDate(today.getDate() + daysUntilTarget);
                    return;
                }
            }
            
            // ÁâπÊÆäÊó•ÊúüÂ§ÑÁêÜ - Â¢ûÂº∫ÁâàÊú¨
            if (input.includes('Âë®Êú´')) {
                const currentDay = now.getDay();
                let daysUntilWeekend = currentDay === 0 || currentDay === 6 ? 7 : (6 - currentDay);
                date.setDate(today.getDate() + daysUntilWeekend);
            } else if (input.includes('Â∑•‰ΩúÊó•') || input.includes('Âπ≥Êó•') || input.includes('Â∑•‰ΩúÊó•')) {
                const currentDay = now.getDay();
                if (currentDay === 0 || currentDay === 6) {
                    date.setDate(today.getDate() + (8 - currentDay) % 7);
                }
            } else if (input.includes('ËäÇÂÅáÊó•') || input.includes('‰ºëÊÅØÊó•')) {
                // ‰øùÊåÅÂΩìÂâçÊó•ÊúüÔºåÁî®Êà∑ÂèØËÉΩÈúÄË¶ÅÊâãÂä®Ë∞ÉÊï¥
            }
            
            // ÂÖ∑‰ΩìÊó•ÊúüËß£Êûê - Â¢ûÂº∫ÁâàÊú¨
            const dateMatch = input.match(/(\d{1,2}|[‰∏Ä‰∫å‰∏âÂõõ‰∫îÂÖ≠‰∏ÉÂÖ´‰πùÂçÅÈõ∂ÂªøÂçÖ]+)Êúà(\d{1,2}|[‰∏Ä‰∫å‰∏âÂõõ‰∫îÂÖ≠‰∏ÉÂÖ´‰πùÂçÅÈõ∂ÂªøÂçÖ]+)Êó•/) ||
                              input.match(/(\d{1,2})\/(\d{1,2})/) ||
                              input.match(/(\d{1,2})-(\d{1,2})/) ||
                              input.match(/(\d{1,2}|[‰∏Ä‰∫å‰∏âÂõõ‰∫îÂÖ≠‰∏ÉÂÖ´‰πùÂçÅÈõ∂ÂªøÂçÖ]+)\.(\d{1,2}|[‰∏Ä‰∫å‰∏âÂõõ‰∫îÂÖ≠‰∏ÉÂÖ´‰πùÂçÅÈõ∂ÂªøÂçÖ]+)/);
            
            if (dateMatch) {
                let month = /[‰∏Ä‰∫å‰∏âÂõõ‰∫îÂÖ≠‰∏ÉÂÖ´‰πùÂçÅÈõ∂ÂªøÂçÖ]+/.test(dateMatch[1]) 
                    ? chineseNumberToNumber(dateMatch[1]) 
                    : parseInt(dateMatch[1]);
                let day = /[‰∏Ä‰∫å‰∏âÂõõ‰∫îÂÖ≠‰∏ÉÂÖ´‰πùÂçÅÈõ∂ÂªøÂçÖ]+/.test(dateMatch[2]) 
                    ? chineseNumberToNumber(dateMatch[2]) 
                    : parseInt(dateMatch[2]);
                
                date.setMonth(month - 1, day);
                
                if (date < today) {
                    date.setFullYear(now.getFullYear() + 1);
                }
            }
        }

        // Ëß£ÊûêÊó•Êúü‰∏ä‰∏ãÊñá
        function parseDateContext(input, date, today, now, timeContext = null) {
            // Ê£ÄÊü•ÊòØÂê¶ÊúâÊòéÂ§©Â§çÂêàÂÖ≥ÈîÆËØçÁöÑÊ†áËÆ∞
            if (timeContext && timeContext.isTomorrow) {
                date.setDate(today.getDate() + 1);
                return;
            }
            
            // Áõ∏ÂØπÊó•ÊúüËß£Êûê
            const relativeDateMap = {
                'Â§ßÂêéÂ§©': 3, 'ÂêéÂ§©': 2, 'ÊòéÂ§©': 1, '‰ªäÂ§©': 0, '‰ªäÊó•': 0,
                'Â§ßÂâçÂ§©': -3, 'ÂâçÂ§©': -2, 'Êò®Â§©': -1
            };
            
            for (const [dateStr, offset] of Object.entries(relativeDateMap)) {
                if (input.includes(dateStr)) {
                    date.setDate(today.getDate() + offset);
                    return;
                }
            }
            
            // Âë®ÊúüËß£Êûê
            if (input.includes('ËøôÂë®') || input.includes('Êú¨Âë®')) {
                // ‰øùÊåÅÂΩìÂâçÂë®
            } else if (input.includes('‰∏ãÂë®')) {
                date.setDate(today.getDate() + 7);
            } else if (input.includes('‰∏äÂë®')) {
                date.setDate(today.getDate() - 7);
            }
            
            // ÊòüÊúüËß£Êûê
            const weekDayMapping = {
                'Âë®‰∏Ä': 1, 'ÊòüÊúü‰∏Ä': 1, 'Á§ºÊãú‰∏Ä': 1,
                'Âë®‰∫å': 2, 'ÊòüÊúü‰∫å': 2, 'Á§ºÊãú‰∫å': 2,
                'Âë®‰∏â': 3, 'ÊòüÊúü‰∏â': 3, 'Á§ºÊãú‰∏â': 3,
                'Âë®Âõõ': 4, 'ÊòüÊúüÂõõ': 4, 'Á§ºÊãúÂõõ': 4,
                'Âë®‰∫î': 5, 'ÊòüÊúü‰∫î': 5, 'Á§ºÊãú‰∫î': 5,
                'Âë®ÂÖ≠': 6, 'ÊòüÊúüÂÖ≠': 6, 'Á§ºÊãúÂÖ≠': 6,
                'Âë®Êó•': 0, 'ÊòüÊúüÊó•': 0, 'Á§ºÊãúÊó•': 0, 'ÊòüÊúüÂ§©': 0
            };
            
            for (const [dayName, dayNum] of Object.entries(weekDayMapping)) {
                if (input.includes(dayName)) {
                    const currentDay = now.getDay();
                    let daysUntilTarget = (dayNum - currentDay + 7) % 7;
                    if (daysUntilTarget === 0 && !input.includes('ËøôÂë®') && !input.includes('Êú¨Âë®')) {
                        daysUntilTarget = 7;
                    }
                    date.setDate(today.getDate() + daysUntilTarget);
                    return;
                }
            }
            
            // ÁâπÊÆäÊó•ÊúüÂ§ÑÁêÜ
            if (input.includes('Âë®Êú´')) {
                const currentDay = now.getDay();
                let daysUntilWeekend = currentDay === 0 || currentDay === 6 ? 7 : (6 - currentDay);
                date.setDate(today.getDate() + daysUntilWeekend);
            } else if (input.includes('Â∑•‰ΩúÊó•') || input.includes('Âπ≥Êó•')) {
                const currentDay = now.getDay();
                if (currentDay === 0 || currentDay === 6) {
                    date.setDate(today.getDate() + (8 - currentDay) % 7);
                }
            }
            
            // ÂÖ∑‰ΩìÊó•ÊúüËß£Êûê
            const dateMatch = input.match(/(\d{1,2}|[‰∏Ä‰∫å‰∏âÂõõ‰∫îÂÖ≠‰∏ÉÂÖ´‰πùÂçÅÈõ∂ÂªøÂçÖ]+)Êúà(\d{1,2}|[‰∏Ä‰∫å‰∏âÂõõ‰∫îÂÖ≠‰∏ÉÂÖ´‰πùÂçÅÈõ∂ÂªøÂçÖ]+)Êó•/) ||
                              input.match(/(\d{1,2})\/(\d{1,2})/) ||
                              input.match(/(\d{1,2})-(\d{1,2})/);
            
            if (dateMatch) {
                let month = /[‰∏Ä‰∫å‰∏âÂõõ‰∫îÂÖ≠‰∏ÉÂÖ´‰πùÂçÅÈõ∂ÂªøÂçÖ]+/.test(dateMatch[1]) 
                    ? chineseNumberToNumber(dateMatch[1]) 
                    : parseInt(dateMatch[1]);
                let day = /[‰∏Ä‰∫å‰∏âÂõõ‰∫îÂÖ≠‰∏ÉÂÖ´‰πùÂçÅÈõ∂ÂªøÂçÖ]+/.test(dateMatch[2]) 
                    ? chineseNumberToNumber(dateMatch[2]) 
                    : parseInt(dateMatch[2]);
                
                date.setMonth(month - 1, day);
                
                if (date < today) {
                    date.setFullYear(now.getFullYear() + 1);
                }
            }
        }
        
        // Â¢ûÂº∫ÁâàÊó∂Èó¥‰∏ä‰∏ãÊñáËß£Êûê
        function parseEnhancedTimeContext(input, timeContext, keywordMap, timeKeywordsConfig) {
            // Ê£ÄÊµãAM/PMÊ†ºÂºè
            const ampmMatch = input.match(/(\d+)(:\d+)?\s*(am|pm|AM|PM)/);
            if (ampmMatch) {
                timeContext.is12HourFormat = true;
                timeContext.hasAMPM = true;
                timeContext.isAfternoon = ampmMatch[3].toLowerCase() === 'pm';
                timeContext.hasTimeKeyword = true;
                return;
            }
            
            // Ê£ÄÊµãÊòéÂ§©Â§çÂêàÂÖ≥ÈîÆËØçÔºà‰ºòÂÖàÊ£ÄÊµãÔºåÈÅøÂÖçË¢´ÂçïÁã¨ÁöÑÊó∂Èó¥ÊÆµÂÖ≥ÈîÆËØçË¶ÜÁõñÔºâ
            const tomorrowCompoundKeywords = {
                'ÊòéÊó©': 'morning',
                'ÊòéÊô®': 'morning', 
                'Êòé‰∏äÂçà': 'morning',
                'ÊòéÂçà': 'noon',
                'Êòé‰∏≠Âçà': 'noon',
                'Êòé‰∏ãÂçà': 'afternoon',
                'ÊòéÂçàÂêé': 'afternoon',
                'ÊòéÊôö': 'evening',
                'ÊòéÂ§úÊôö': 'evening',
                'ÊòéÂ§úÈó¥': 'evening',
                'ÊòéÂ§ú': 'night',
                'ÊòéÂáåÊô®': 'night',
                'ÊòéÊ∑±Â§ú': 'night'
            };
            
            for (const [compoundKeyword, period] of Object.entries(tomorrowCompoundKeywords)) {
                if (input.includes(compoundKeyword)) {
                    switch (period) {
                        case 'morning': timeContext.isMorning = true; break;
                        case 'afternoon': timeContext.isAfternoon = true; break;
                        case 'evening': timeContext.isEvening = true; break;
                        case 'night': timeContext.isNight = true; break;
                    }
                    timeContext.hasTimeKeyword = true;
                    timeContext.isTomorrow = true; // Ê†áËÆ∞‰∏∫ÊòéÂ§©
                    return; // ÊâæÂà∞Â§çÂêàÂÖ≥ÈîÆËØçÂêéÁõ¥Êé•ËøîÂõû
                }
            }
            
            // Ê£ÄÊµãÊó∂Èó¥ÊÆµ
            const periodKeywords = {
                morning: timeKeywordsConfig.morning?.keywords || ['Êó©‰∏ä', '‰∏äÂçà', 'Ê∏ÖÊô®', '‰∏ÄÂ§ßÊó©', 'ÈªéÊòé', 'Êó©Èó¥'],
                afternoon: timeKeywordsConfig.afternoon?.keywords || ['‰∏ãÂçà', 'ÂçàÂêé', '‰∏≠ÂçàÂêé', 'ÂçàÈó¥'],
                evening: timeKeywordsConfig.evening?.keywords || ['Êôö‰∏ä', 'Â§úÈáå', 'Â§úÊôö', 'ÂÖ•Â§ú', 'ÈªÑÊòè', 'ÂÇçÊôö', 'ÊôöÈó¥'],
                night: ['ÂáåÊô®', 'ÂçàÂ§ú', 'Ê∑±Â§ú'],
                noon: ['‰∏≠Âçà', 'Ê≠£Âçà']
            };
            
            for (const [period, keywords] of Object.entries(periodKeywords)) {
                for (const keyword of keywords) {
                    if (input.includes(keyword)) {
                        switch (period) {
                            case 'morning': timeContext.isMorning = true; break;
                            case 'afternoon': timeContext.isAfternoon = true; break;
                            case 'evening': timeContext.isEvening = true; break;
                            case 'night': timeContext.isNight = true; break;
                        }
                        timeContext.hasTimeKeyword = true;
                        break;
                    }
                }
                if (timeContext.hasTimeKeyword) break;
            }
            
            // Ê£ÄÊµãÂè£ËØ≠Êó∂Èó¥Ë°®Ëææ
            const colloquialTimeMap = {
                '‰∏Ä‰ºöÂÑø': '00:15',
                'È©¨‰∏ä': '00:05',
                'Á´ãÂàª': '00:05',
                'Áé∞Âú®': new Date().toTimeString().slice(0, 5),
                'ÂàöÊâç': new Date(Date.now() - 5 * 60000).toTimeString().slice(0, 5),
                'ÂàöÂàö': new Date(Date.now() - 2 * 60000).toTimeString().slice(0, 5),
                'ÂæÖ‰ºöÂÑø': new Date(Date.now() + 30 * 60000).toTimeString().slice(0, 5),
                'Á≠â‰ºöÂÑø': new Date(Date.now() + 30 * 60000).toTimeString().slice(0, 5),
                'Á®çÂêé': new Date(Date.now() + 60 * 60000).toTimeString().slice(0, 5),
                'ÊôöÁÇπ': '20:00',
                'Êó©ÁÇπ': '08:00'
            };
            
            for (const [expression, time] of Object.entries(colloquialTimeMap)) {
                if (input.includes(expression)) {
                    timeContext.colloquialTime = time;
                    timeContext.hasTimeKeyword = true;
                    break;
                }
            }
            
            // Ê£ÄÊµãËá™ÂÆö‰πâÂÖ≥ÈîÆËØç
            if (timeKeywordsConfig.custom) {
                for (const [keyword, time] of Object.entries(timeKeywordsConfig.custom)) {
                    if (input.includes(keyword)) {
                        timeContext.customTime = time;
                        timeContext.hasTimeKeyword = true;
                        break;
                    }
                }
            }
        }
        
        // Â¢ûÂº∫ÁâàÂÖ∑‰ΩìÊó∂Èó¥Ëß£Êûê
        function parseEnhancedSpecificTime(input, timeContext, timeKeywordsConfig) {
            // Â¶ÇÊûúÊúâÂè£ËØ≠Êó∂Èó¥ÔºåÁõ¥Êé•ËøîÂõû
            if (timeContext.colloquialTime) {
                return timeContext.colloquialTime;
            }
            
            // Â¶ÇÊûúÊúâËá™ÂÆö‰πâÊó∂Èó¥ÔºåÁõ¥Êé•ËøîÂõû
            if (timeContext.customTime) {
                return timeContext.customTime;
            }
            
            // ‰ºòÂÖàÂ§ÑÁêÜAM/PMÊ†ºÂºè
            if (timeContext.is12HourFormat && timeContext.hasAMPM) {
                const ampmMatch = input.match(/(\d{1,2})(?::(\d{1,2}))?\s*(am|pm|AM|PM)/);
                if (ampmMatch) {
                    let hour = parseInt(ampmMatch[1]);
                    const minute = ampmMatch[2] ? parseInt(ampmMatch[2]) : 0;
                    const period = ampmMatch[3].toLowerCase();
                    
                    // 12Â∞èÊó∂Âà∂ËΩ¨Êç¢
                    if (period === 'pm' && hour < 12) {
                        hour += 12;
                    } else if (period === 'am' && hour === 12) {
                        hour = 0;
                    }
                    
                    return formatTime(hour, minute);
                }
            }
            
            // Â¢ûÂº∫ÁâàÊó∂Èó¥ÂåπÈÖçÊ®°Âºè - Êåâ‰ºòÂÖàÁ∫ßÊéíÂ∫è
            const timePatterns = [
                // 12Â∞èÊó∂Âà∂Ê†ºÂºèÔºö3pm, 3:30pm, 3 PM
                {
                    pattern: /(\d{1,2})(?::(\d{1,2}))?\s*(am|pm|AM|PM)/,
                    handler: (match) => {
                        let hour = parseInt(match[1]);
                        const minute = match[2] ? parseInt(match[2]) : 0;
                        const period = match[3].toLowerCase();
                        
                        if (period === 'pm' && hour < 12) hour += 12;
                        if (period === 'am' && hour === 12) hour = 0;
                        
                        return formatTime(hour, minute);
                    }
                },
                // ‰∏≠ÊñáÊó∂Èó¥ÊÆµ + ‰∏≠ÊñáÊï∞Â≠óÔºö‰∏ãÂçà‰∏âÁÇπÂçÅ‰∫îÂàÜ
                {
                    pattern: /(‰∏ãÂçà|‰∏äÂçà|Êó©‰∏ä|Êôö‰∏ä|ÂáåÊô®|‰∏≠Âçà|Ê≠£Âçà)([‰∏Ä‰∫å‰∏âÂõõ‰∫îÂÖ≠‰∏ÉÂÖ´‰πùÂçÅÈõ∂ÂªøÂçÖ]+)[ÁÇπÊó∂]([‰∏Ä‰∫å‰∏âÂõõ‰∫îÂÖ≠‰∏ÉÂÖ´‰πùÂçÅÈõ∂ÂªøÂçÖ]+)?ÂàÜ?/,
                    handler: (match) => {
                        const hour = chineseNumberToNumber(match[2]);
                        const minute = match[3] ? chineseNumberToNumber(match[3]) : 0;
                        return adjustHourByPeriod(hour, minute, match[1]);
                    }
                },
                // ‰∏≠ÊñáÊó∂Èó¥ÊÆµ + ÈòøÊãâ‰ºØÊï∞Â≠óÔºö‰∏ãÂçà3ÁÇπ15ÂàÜ
                {
                    pattern: /(‰∏ãÂçà|‰∏äÂçà|Êó©‰∏ä|Êôö‰∏ä|ÂáåÊô®|‰∏≠Âçà|Ê≠£Âçà)(\d{1,2})[ÁÇπÊó∂](\d{1,2})?ÂàÜ?/,
                    handler: (match) => {
                        const hour = parseInt(match[2]);
                        const minute = match[3] ? parseInt(match[3]) : 0;
                        return adjustHourByPeriod(hour, minute, match[1]);
                    }
                },
                // 24Â∞èÊó∂Âà∂Ê†ºÂºèÔºö14:30
                {
                    pattern: /(\d{1,2}):(\d{1,2})/,
                    handler: (match) => {
                        const hour = parseInt(match[1]);
                        const minute = parseInt(match[2]);
                        if (hour >= 0 && hour <= 23 && minute >= 0 && minute <= 59) {
                            return formatTime(hour, minute);
                        }
                        return null;
                    }
                },
                // ‰∏≠ÊñáÊï∞Â≠óÊó∂Èó¥Ôºö‰∏âÁÇπÂçÅ‰∫îÂàÜÔºà‰øÆÂ§çÔºöÊéíÈô§ÈùûÊï∞Â≠óÊ±âÂ≠óÔºåÈÅøÂÖçÂåπÈÖç"ÊòéÂ§©"Á≠âËØçÊ±áÔºâ
                {
                    pattern: /(‰∏â|Âõõ|‰∫î|ÂÖ≠|‰∏É|ÂÖ´|‰πù|ÂçÅ|ÂçÅ‰∏Ä|ÂçÅ‰∫å|ÂçÅ‰∏â|ÂçÅÂõõ|ÂçÅ‰∫î|ÂçÅÂÖ≠|ÂçÅ‰∏É|ÂçÅÂÖ´|ÂçÅ‰πù|‰∫åÂçÅ|‰∫åÂçÅ‰∏Ä|‰∫åÂçÅ‰∫å|‰∫åÂçÅ‰∏â|Èõ∂|‰∏Ä|‰∫å)[ÁÇπÊó∂]([‰∏Ä‰∫å‰∏âÂõõ‰∫îÂÖ≠‰∏ÉÂÖ´‰πùÂçÅÈõ∂ÂªøÂçÖ]+)?ÂàÜ?/,
                    handler: (match) => {
                        // Ê£ÄÊü•ÂâçÈù¢ÊòØÂê¶ÊúâÊó•ÊúüËØçÊ±áÔºåÈÅøÂÖçÈîôËØØÂåπÈÖç
                        const matchIndex = match.index;
                        const beforeText = input.substring(Math.max(0, matchIndex - 10), matchIndex);
                        if (beforeText.includes('ÊòéÂ§©') || beforeText.includes('ÂêéÂ§©') || beforeText.includes('‰ªäÂ§©') || beforeText.includes('ÂâçÂ§©')) {
                            return null; // Â¶ÇÊûúÂâçÈù¢ÊúâÊó•ÊúüËØçÊ±áÔºå‰∏çÂåπÈÖç
                        }
                        
                        const hour = chineseNumberToNumber(match[1]);
                        const minute = match[2] ? chineseNumberToNumber(match[2]) : 0;
                        return smartAdjustHour(hour, minute, timeContext);
                    }
                },
                // ÈòøÊãâ‰ºØÊï∞Â≠óÊó∂Èó¥Ôºö3ÁÇπ15ÂàÜ
                {
                    pattern: /(\d{1,2})[ÁÇπÊó∂](\d{1,2})?ÂàÜ?/,
                    handler: (match) => {
                        const hour = parseInt(match[1]);
                        const minute = match[2] ? parseInt(match[2]) : 0;
                        return smartAdjustHour(hour, minute, timeContext);
                    }
                },
                // ÂçäÁÇπË°®ËææÔºö‰∏âÁÇπÂçäÔºà‰øÆÂ§çÔºöÊéíÈô§ÈùûÊï∞Â≠óÊ±âÂ≠óÔºâ
                {
                    pattern: /(\d{1,2}|‰∏â|Âõõ|‰∫î|ÂÖ≠|‰∏É|ÂÖ´|‰πù|ÂçÅ|ÂçÅ‰∏Ä|ÂçÅ‰∫å|ÂçÅ‰∏â|ÂçÅÂõõ|ÂçÅ‰∫î|ÂçÅÂÖ≠|ÂçÅ‰∏É|ÂçÅÂÖ´|ÂçÅ‰πù|‰∫åÂçÅ|‰∫åÂçÅ‰∏Ä|‰∫åÂçÅ‰∫å|‰∫åÂçÅ‰∏â|Èõ∂|‰∏Ä|‰∫å)ÁÇπÂçä/,
                    handler: (match) => {
                        const hour = /\d+/.test(match[1]) 
                            ? parseInt(match[1])
                            : chineseNumberToNumber(match[1]);
                        return smartAdjustHour(hour, 30, timeContext);
                    }
                },
                // Êï¥ÁÇπË°®ËææÔºö‰∏âÁÇπÊï¥Ôºà‰øÆÂ§çÔºöÊéíÈô§ÈùûÊï∞Â≠óÊ±âÂ≠óÔºâ
                {
                    pattern: /(\d{1,2}|‰∏â|Âõõ|‰∫î|ÂÖ≠|‰∏É|ÂÖ´|‰πù|ÂçÅ|ÂçÅ‰∏Ä|ÂçÅ‰∫å|ÂçÅ‰∏â|ÂçÅÂõõ|ÂçÅ‰∫î|ÂçÅÂÖ≠|ÂçÅ‰∏É|ÂçÅÂÖ´|ÂçÅ‰πù|‰∫åÂçÅ|‰∫åÂçÅ‰∏Ä|‰∫åÂçÅ‰∫å|‰∫åÂçÅ‰∏â|Èõ∂|‰∏Ä|‰∫å)ÁÇπÊï¥/,
                    handler: (match) => {
                        const hour = /\d+/.test(match[1]) 
                            ? parseInt(match[1])
                            : chineseNumberToNumber(match[1]);
                        return smartAdjustHour(hour, 0, timeContext);
                    }
                },
                // ÂàªÈíüË°®ËææÔºö‰∏âÂàªÔºà45ÂàÜÈíüÔºâÔºà‰øÆÂ§çÔºöÊéíÈô§ÈùûÊï∞Â≠óÊ±âÂ≠óÔºâ
                {
                    pattern: /(\d{1,2}|‰∏â|Âõõ|‰∫î|ÂÖ≠|‰∏É|ÂÖ´|‰πù|ÂçÅ|ÂçÅ‰∏Ä|ÂçÅ‰∫å|ÂçÅ‰∏â|ÂçÅÂõõ|ÂçÅ‰∫î|ÂçÅÂÖ≠|ÂçÅ‰∏É|ÂçÅÂÖ´|ÂçÅ‰πù|‰∫åÂçÅ|‰∫åÂçÅ‰∏Ä|‰∫åÂçÅ‰∫å|‰∫åÂçÅ‰∏â|Èõ∂|‰∏Ä|‰∫å)ÁÇπ[‰∏Ä‰∫å‰∏âÂõõ]Âàª/,
                    handler: (match) => {
                        const hour = /\d+/.test(match[1]) 
                            ? parseInt(match[1])
                            : chineseNumberToNumber(match[1]);
                        const quarterMap = {'‰∏Ä': 15, '‰∫å': 30, '‰∏â': 45, 'Âõõ': 0};
                        const quarter = match[0].match(/[‰∏Ä‰∫å‰∏âÂõõ]Âàª/)[0][0];
                        const minute = quarterMap[quarter];
                        return smartAdjustHour(hour, minute, timeContext);
                    }
                }
            ];
            
            // Â∞ùËØïÂåπÈÖçÊó∂Èó¥Ê®°Âºè
            for (const { pattern, handler } of timePatterns) {
                const match = input.match(pattern);
                if (match) {
                    try {
                        const result = handler(match);
                        if (result) return result;
                    } catch (error) {
                        continue;
                    }
                }
            }
            
            // ‰ΩøÁî®Êó∂Èó¥ÊÆµÈªòËÆ§Êó∂Èó¥
            return getDefaultTimeByContext(timeContext, timeKeywordsConfig);
        }
        
        // Ê†πÊçÆÊó∂Èó¥ÊÆµË∞ÉÊï¥Â∞èÊó∂
        function adjustHourByPeriod(hour, minute, period) {
            let adjustedHour = hour;
            if ((period === '‰∏ãÂçà' || period === 'Êôö‰∏ä' || period === 'Â§úÈáå') && hour < 12) {
                adjustedHour = hour + 12;
            } else if (period === 'ÂáåÊô®' && hour >= 12) {
                adjustedHour = hour - 12;
            }
            return formatTime(adjustedHour, minute);
        }
        
        // Êô∫ËÉΩË∞ÉÊï¥Â∞èÊó∂
        function smartAdjustHour(hour, minute, timeContext) {
            let adjustedHour = hour;
            if (hour < 12) {
                if (timeContext.isAfternoon || timeContext.isEvening) {
                    adjustedHour = hour + 12;
                } else if (timeContext.isNight && hour >= 6) {
                    adjustedHour = hour;
                }
            }
            return formatTime(adjustedHour, minute);
        }
        
        // Ê†πÊçÆ‰∏ä‰∏ãÊñáËé∑ÂèñÈªòËÆ§Êó∂Èó¥
        function getDefaultTimeByContext(timeContext, timeKeywordsConfig) {
            if (!timeContext.hasTimeKeyword) return null;
            
            let defaultTime = null;
            
            if (timeContext.isAfternoon) {
                defaultTime = timeKeywordsConfig.afternoon?.defaultTime || '14:00';
            } else if (timeContext.isMorning) {
                defaultTime = timeKeywordsConfig.morning?.defaultTime || '09:00';
            } else if (timeContext.isEvening) {
                defaultTime = timeKeywordsConfig.evening?.defaultTime || getSmartEveningTime();
            } else if (timeContext.isNight) {
                defaultTime = '02:00';
            } else {
                // Â¶ÇÊûúÊúâÊó•Êúü‰ø°ÊÅØ‰ΩÜÊó†ÂÖ∑‰ΩìÊó∂Èó¥‰∏ä‰∏ãÊñáÔºåÈªòËÆ§‰ΩøÁî®Êó©‰∏äÊó∂Èó¥
                defaultTime = '09:00';
            }
            
            return defaultTime;
        }
        
        // Êô∫ËÉΩÈÄâÊã©Êôö‰∏äÊó∂Èó¥
        function getSmartEveningTime() {
            const currentHour = new Date().getHours();
            if (currentHour >= 18 && currentHour < 20) return '20:00';
            if (currentHour >= 20 && currentHour < 23) return '21:00';
            if (currentHour >= 23 || currentHour < 6) return '20:00';
            return '19:00'; // ‰øÆÊîπÈªòËÆ§Êó∂Èó¥‰∏∫19:00ÔºåÊõ¥Á¨¶Âêà"Êôö‰∏ä"ÁöÑÊ¶ÇÂøµ
        }
        
        // Ê†ºÂºèÂåñÊú¨Âú∞Êó•ÊúüÊó∂Èó¥‰∏∫YYYY-MM-DDTHH:MMÊ†ºÂºè
        function formatLocalDateTime(date) {
            const year = date.getFullYear();
            const month = (date.getMonth() + 1).toString().padStart(2, '0');
            const day = date.getDate().toString().padStart(2, '0');
            const hours = date.getHours().toString().padStart(2, '0');
            const minutes = date.getMinutes().toString().padStart(2, '0');
            return `${year}-${month}-${day}T${hours}:${minutes}`;
        }
        
        // Ê†ºÂºèÂåñÊó∂Èó¥
        function formatTime(hour, minute) {
            return `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`;
        }
        
        // Â¢ûÂº∫Áâà‰ªªÂä°ÂêçÁß∞Ê∏ÖÁêÜ
        function cleanEnhancedTaskName(input, keywordMap) {
            // ÊûÑÂª∫Â¢ûÂº∫ÁâàÊ∏ÖÁêÜÊ≠£ÂàôË°®ËææÂºè
            const allKeywords = [
                ...keywordMap.relativeDates,
                ...keywordMap.weekdays,
                ...keywordMap.specialDays,
                ...keywordMap.timePeriods,
                ...keywordMap.timeUnits,
                ...keywordMap.colloquialTime,
                ...Object.keys(keywordMap.custom),
                // Ê∑ªÂä†Â§çÂêàÂÖ≥ÈîÆËØçÈõÜÂêà
                ...(keywordMap.tomorrowCompound || [])
            ];
            
            // Êõ¥ÂÖ®Èù¢ÁöÑÊ∏ÖÁêÜÊ®°Âºè
            const cleanPatterns = [
                // Êó•ÊúüÊ†ºÂºè
                /(\d{4})[Âπ¥\-\/](\d{1,2})[Êúà\-\/](\d{1,2})[Êó•Âè∑]?/g,
                /(\d{1,2}|[‰∏Ä‰∫å‰∏âÂõõ‰∫îÂÖ≠‰∏ÉÂÖ´‰πùÂçÅÈõ∂ÂªøÂçÖ]+)Êúà(\d{1,2}|[‰∏Ä‰∫å‰∏âÂõõ‰∫îÂÖ≠‰∏ÉÂÖ´‰πùÂçÅÈõ∂ÂªøÂçÖ]+)[Êó•Âè∑]?/g,
                /(\d{1,2})\/(\d{1,2})/g,
                /(\d{1,2})-(\d{1,2})/g,
                
                // Êó∂Èó¥Ê†ºÂºè
                /(\d{1,2})(?::(\d{1,2}))?\s*(am|pm|AM|PM)/g,
                /(\d{1,2}|[‰∏Ä‰∫å‰∏âÂõõ‰∫îÂÖ≠‰∏ÉÂÖ´‰πùÂçÅÈõ∂ÂªøÂçÖ]+)[:ÁÇπÊó∂](\d{0,2}|[‰∏Ä‰∫å‰∏âÂõõ‰∫îÂÖ≠‰∏ÉÂÖ´‰πùÂçÅÈõ∂ÂªøÂçÖ]{0,2})ÂàÜ?/g,
                /(\d{1,2}|[‰∏Ä‰∫å‰∏âÂõõ‰∫îÂÖ≠‰∏ÉÂÖ´‰πùÂçÅÈõ∂ÂªøÂçÖ]+)ÁÇπÂçä/g,
                /(\d{1,2}|[‰∏Ä‰∫å‰∏âÂõõ‰∫îÂÖ≠‰∏ÉÂÖ´‰πùÂçÅÈõ∂ÂªøÂçÖ]+)ÁÇπÊï¥/g,
                /(\d{1,2}|[‰∏Ä‰∫å‰∏âÂõõ‰∫îÂÖ≠‰∏ÉÂÖ´‰πùÂçÅÈõ∂ÂªøÂçÖ]+)ÁÇπ[‰∏Ä‰∫å‰∏âÂõõ]Âàª/g,
                
                // Êó∂Èó¥ÊÆµ
                /(‰∏ãÂçà|‰∏äÂçà|Êó©‰∏ä|Êôö‰∏ä|ÂáåÊô®|‰∏≠Âçà|Ê≠£Âçà|Ê∏ÖÊô®|Êó©Èó¥|ÂçàÈó¥|ÊôöÈó¥|ÂÖ•Â§ú|ÈªÑÊòè|ÂÇçÊôö)/g,
                
                // Âè£ËØ≠Ë°®Ëææ
                /(‰∏Ä‰ºöÂÑø|È©¨‰∏ä|Á´ãÂàª|Áé∞Âú®|ÂàöÊâç|ÂàöÂàö|ÂæÖ‰ºöÂÑø|Á≠â‰ºöÂÑø|Á®çÂêé|ÊôöÁÇπ|Êó©ÁÇπ|Ëøô‰ºöÂÑø|ÈÇ£‰ºöÂÑø|‰∏Ä‰ºöÂÑøÂêé|È©¨‰∏äÂêé)/g,
                
                // AM/PM
                /(am|pm|AM|PM)/g
            ];
            
            // Âè™ÊúâÂΩìÊúâÂÖ≥ÈîÆËØçÊó∂ÊâçÊ∑ªÂä†ÂÖ≥ÈîÆËØçÊ∏ÖÁêÜÊ®°Âºè
            if (allKeywords.length > 0) {
                cleanPatterns.push(new RegExp(`(${allKeywords.join('|')})`, 'g'));
            }
            
            let taskName = input;
            
            // Â∫îÁî®ÊâÄÊúâÊ∏ÖÁêÜÊ®°Âºè
            cleanPatterns.forEach(pattern => {
                try {
                    taskName = taskName.replace(pattern, '');
                } catch (error) {
                    // ÈùôÈªòÂ§ÑÁêÜÊ∏ÖÁêÜÈîôËØØ
                }
            });
            
            // Ê∏ÖÁêÜÂ§ö‰ΩôÁöÑÁ©∫Ê†ºÂíåÊ†áÁÇπ
            taskName = taskName
                .replace(/\s+/g, ' ')                    // Â§ö‰∏™Á©∫Ê†ºÂêàÂπ∂‰∏∫‰∏Ä‰∏™
                .replace(/^[Ôºå„ÄÇÔºÅÔºü\s]+|[Ôºå„ÄÇÔºÅÔºü\s]+$/g, '') // ÂéªÈô§È¶ñÂ∞æÊ†áÁÇπÂíåÁ©∫Ê†º
                .replace(/[Ôºå„ÄÇÔºÅÔºü]+/g, '')               // ÂéªÈô§‰∏≠Èó¥Ê†áÁÇπ
                .trim();
            
            return taskName || "Êñ∞‰ªªÂä°";
        }
        
        // ‰∏≠ÊñáÊï∞Â≠óËΩ¨Êç¢ÂáΩÊï∞
        function chineseNumberToNumber(chineseNum) {
            const chineseNumbers = {
                'Èõ∂': 0, '„Äá': 0, '‰∏Ä': 1, '‰∫å': 2, '‰∏â': 3, 'Âõõ': 4, '‰∫î': 5,
                'ÂÖ≠': 6, '‰∏É': 7, 'ÂÖ´': 8, '‰πù': 9, 'ÂçÅ': 10, 'Âªø': 20, 'ÂçÖ': 30
            };
            
            if (chineseNumbers[chineseNum] !== undefined) {
                return chineseNumbers[chineseNum];
            }
            
            // Â§ÑÁêÜÂçÅÂá†
            if (chineseNum.startsWith('ÂçÅ') && chineseNum.length === 2) {
                return 10 + chineseNumbers[chineseNum[1]];
            }
            
            // Â§ÑÁêÜ‰∫åÂçÅÂá†
            if (chineseNum.startsWith('‰∫åÂçÅ') && chineseNum.length === 3) {
                return 20 + chineseNumbers[chineseNum[2]];
            }
            
            // Â§ÑÁêÜ‰∏âÂçÅÂá†
            if (chineseNum.startsWith('‰∏âÂçÅ') && chineseNum.length === 3) {
                return 30 + chineseNumbers[chineseNum[2]];
            }
            
            return parseInt(chineseNum) || 0;
        }
        
        // ËÆæÁΩÆÂΩìÂâçÊó•Êúü
        function setCurrentDate() {
            const now = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' };
            
            // Ê†πÊçÆÂΩìÂâçËØ≠Ë®ÄËÆæÁΩÆÊòæÁ§∫Êó•Êúü
            const currentLang = i18n.currentLanguage;
            const locale = currentLang === 'en' ? 'en-US' : 'zh-CN';
            
            document.getElementById('current-date').textContent = now.toLocaleDateString(locale, options);
        }
        
        // ËÆæÁΩÆÊ¨¢Ëøé‰ø°ÊÅØÂíåÊøÄÂä±ËØ≠
        function setWelcomeMessageAndMotivation() {
            const now = new Date();
            const hour = now.getHours();
            let timeOfDay = "morning";
            
            if (hour < 12) {
                timeOfDay = "morning";
            } else if (hour < 18) {
                timeOfDay = "afternoon";
            } else {
                timeOfDay = "evening";
            }
            
            // ‰ΩøÁî®Ê≠£Á°ÆÁöÑÁøªËØëÈÖçÁΩÆ
            const currentLang = i18n.currentLanguage;
            const texts = i18n.texts[currentLang];
            if (!texts) {
                console.error('Language texts not loaded for:', currentLang);
                return;
            }
            
            const welcomeMessages = texts.welcomeMessages;
            const encouragements = texts.encouragements;
            
            if (!welcomeMessages || !encouragements) {
                console.error('Welcome messages or encouragements not found in language texts');
                return;
            }
            
            const welcomeElement = document.getElementById('welcome-message');
            const motivationElement = document.getElementById('motivation-short');
            
            if (welcomeElement && welcomeMessages && welcomeMessages[timeOfDay]) {
                welcomeElement.textContent = welcomeMessages[timeOfDay];
            }
            
            if (motivationElement && encouragements && encouragements.length > 0) {
                const randomEncouragement = encouragements[Math.floor(Math.random() * encouragements.length)];
                motivationElement.textContent = randomEncouragement;
            }
        }
        
        // Âä†ËΩΩ‰ªªÂä° - ÊÄßËÉΩ‰ºòÂåñÁâà
        function loadTasks() {
            // ‰ªélocalStorageÂä†ËΩΩ‰ªªÂä°Ôºà‰ΩøÁî®ÁºìÂ≠òÔºâ
            const savedTasks = Storage.get('smartScheduleTasks');
            if (savedTasks) {
                tasks = savedTasks;
            } else {
                // ÂàùÂßã‰∏∫Á©∫‰ªªÂä°ÂàóË°®
                tasks = [];
                saveTasks();
            }
            
            // Ê∏ÖÁêÜÊó†ÊïàÁöÑ‰ªªÂä°ÂÖÉÁ¥†ÁºìÂ≠ò
            cleanupTaskElementCache();
            
            // Èò≤ÊäñÊ∏≤Êüì - Âª∂ËøüÊâßË°å‰ª•ÂáèÂ∞ëÈáçÂ§çÊ∏≤Êüì
            debouncedRenderTasks();
            debouncedUpdateTaskStats();
            debouncedUpdateSmartSuggestions();
            debouncedUpdateCharts();
        }
        
        // ‰øùÂ≠ò‰ªªÂä°Âà∞localStorage - ÊÄßËÉΩ‰ºòÂåñÁâà
        function saveTasks() {
            // ‰ΩøÁî®ÊâπÈáè‰øùÂ≠òÂíåÈò≤ÊäñÊú∫Âà∂
            Storage.setBatch([['smartScheduleTasks', tasks]]);
        }
        
        // DOMÂÖÉÁ¥†ÁºìÂ≠ò
        const domCache = {
            taskInput: null,
            taskInputWithTasks: null,
            addTaskBtn: null,
            addTaskBtnWithTasks: null,
            taskDetailForm: null,
            taskDetailModal: null,
            deleteConfirmModal: null,
            notificationReminder: null,
            tasksContainer: null,
            emptyState: null,
            tasksState: null,
            rocketMotivator: null,
            quickTodoTop: null,
            quickTodoListTop: null,
            lastRenderState: null
        };
        
        // ÂàùÂßãÂåñDOMÁºìÂ≠ò
        function initDOMCache() {
            domCache.taskInput = document.getElementById('task-input');
            domCache.taskInputWithTasks = document.getElementById('task-input-with-tasks');
            domCache.addTaskBtn = document.getElementById('add-task-btn');
            domCache.addTaskBtnWithTasks = document.getElementById('add-task-btn-with-tasks');
            domCache.taskDetailForm = document.getElementById('task-detail-form');
            domCache.taskDetailModal = document.getElementById('task-detail-modal');
            domCache.deleteConfirmModal = document.getElementById('delete-confirm-modal');
            domCache.notificationReminder = document.getElementById('notification-reminder');
        }

        // ‰ªªÂä°ÂÖÉÁ¥†ÁºìÂ≠ò
        const taskElementCache = new Map();
        
        // Èò≤ÊäñÊ∏≤Êüì
        let renderDebounceTimer = null;
        
        function renderTasks() {
            // Áõ¥Êé•ÊâßË°åÊ∏≤ÊüìÔºå‰∏ç‰ΩøÁî®Èò≤ÊäñÔºåÁ°Æ‰øù‰ªªÂä°Á´ãÂç≥Êõ¥Êñ∞
            performRender();
        }
        
        function performRender() {
            // ÂàùÂßãÂåñÊ∏≤ÊüìÁõ∏ÂÖ≥ÁöÑDOMÁºìÂ≠ò
            if (!domCache.tasksContainer) {
                domCache.tasksContainer = document.getElementById('tasks-container');
                domCache.emptyState = document.getElementById('empty-state');
                domCache.tasksState = document.getElementById('tasks-state');
                domCache.rocketMotivator = document.getElementById('rocket-motivator');
                domCache.quickTodoTop = document.getElementById('quick-todo-top');
                domCache.quickTodoListTop = document.getElementById('quick-todo-list-top');
            }

            // ÈáçÊñ∞Ëé∑ÂèñÊúÄÊñ∞ÁöÑ‰ªªÂä°Êï∞ÊçÆÔºåÁ°Æ‰øùÊï∞ÊçÆÂêåÊ≠•
            const currentTasks = Storage.get('smartScheduleTasks', []);
            
            const now = new Date();
            const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
            const tomorrow = new Date(today);
            tomorrow.setDate(today.getDate() + 1);
            
            // ÁîüÊàêÁä∂ÊÄÅÈîÆÔºåÁî®‰∫éÊ£ÄÊü•ÊòØÂê¶ÈúÄË¶ÅÈáçÊñ∞Ê∏≤Êüì
            const stateKey = generateRenderStateKey(currentTasks);
            
            // Â¶ÇÊûúÁä∂ÊÄÅÊ≤°ÊúâÂèòÂåñÔºåË∑≥ËøáÊ∏≤Êüì
            if (domCache.lastRenderState === stateKey) {
                return;
            }
            
            domCache.lastRenderState = stateKey;
            
            // ÂàÜÁ¶ªÂ∑≤ÂÆåÊàêÂíåÊú™ÂÆåÊàêÁöÑ‰ªªÂä°
            const activeTasks = [];
            const completedTasks = [];
            
            currentTasks.forEach(task => {
                if (task.completed) {
                    completedTasks.push(task);
                } else {
                    activeTasks.push(task);
                }
            });
            
            // ÊåâÊó∂Èó¥ÊéíÂ∫èÊâÄÊúâÊ¥ªË∑É‰ªªÂä°Ôºà‰ªäÊó•ÂíåÊú™Êù•ÂêàÂπ∂Ôºâ
            activeTasks.sort((a, b) => new Date(a.startTime) - new Date(b.startTime));
            
            // Â∑≤ÂÆåÊàê‰ªªÂä°ÊåâÂÆåÊàêÊó∂Èó¥ÊéíÂ∫èÔºàÊúÄÊñ∞ÁöÑÂú®ÂâçÈù¢Ôºâ
            completedTasks.sort((a, b) => new Date(b.completedTime || 0) - new Date(a.completedTime || 0));
            
            // ÂêàÂπ∂ÊâÄÊúâ‰ªªÂä°ÔºöÊ¥ªË∑É‰ªªÂä°Âú®ÂâçÔºåÂ∑≤ÂÆåÊàê‰ªªÂä°Âú®Âêé
            const allTasks = [...activeTasks, ...completedTasks];
            
            // Êõ¥Êñ∞ÊòæÁ§∫Áä∂ÊÄÅ
            const hasTasks = allTasks.length > 0;
            
            if (hasTasks) {
                domCache.emptyState.classList.add('hidden');
                domCache.tasksState.classList.remove('hidden');
                domCache.rocketMotivator.classList.add('hidden');
                
                // ÊòæÁ§∫È°∂ÈÉ®ÁöÑÂø´ÈÄüÂæÖÂäûÂàóË°®
                domCache.quickTodoTop.classList.remove('hidden');
                
                // Êõ¥Êñ∞È°∂ÈÉ®Âø´ÈÄüÂæÖÂäûÂàóË°®ÂÜÖÂÆπ - ‰ΩøÁî®Èò≤Êäñ‰ºòÂåñ
                debouncedUpdateQuickTodoListTop();
                
                // ÊâπÈáèÊ∏≤ÊüìÊâÄÊúâ‰ªªÂä°
                renderTaskList(domCache.tasksContainer, allTasks, 'all');
            } else {
                domCache.emptyState.classList.remove('hidden');
                domCache.tasksState.classList.add('hidden');
                domCache.rocketMotivator.classList.remove('hidden');
                
                // ÈöêËóèÈ°∂ÈÉ®ÁöÑÂø´ÈÄüÂæÖÂäûÂàóË°®
                domCache.quickTodoTop.classList.add('hidden');
            }
        }
        
        // ÁîüÊàêÊ∏≤ÊüìÁä∂ÊÄÅÈîÆ
        function generateRenderStateKey(tasks) {
            return tasks.map(task => `${task.id}:${task.completed}:${task.priority}:${task.startTime}:${task.title}:${task.description || ''}`).join('|');
        }
        
        // ‰ºòÂåñÁöÑ‰ªªÂä°ÂàóË°®Ê∏≤Êüì
        function renderTaskList(container, taskList, type) {
            // Ê∏ÖÁ©∫ÂÆπÂô®
            container.innerHTML = '';
            
            // ‰ΩøÁî®DocumentFragmentÊâπÈáèÊ∏≤Êüì
            const fragment = document.createDocumentFragment();
            
            taskList.forEach(task => {
                let taskElement = taskElementCache.get(task.id);
                
                // Â¶ÇÊûúÁºìÂ≠ò‰∏≠Êúâ‰∏î‰ªªÂä°Ê≤°ÊúâÂèòÂåñÔºåÂ§çÁî®ÂÖÉÁ¥†
                if (taskElement && isTaskElementValid(taskElement, task)) {
                    // Êõ¥Êñ∞ÂøÖË¶ÅÁöÑÁä∂ÊÄÅ
                    updateTaskElementState(taskElement, task);
                    fragment.appendChild(taskElement);
                } else {
                    // ÂàõÂª∫Êñ∞ÂÖÉÁ¥†
                    taskElement = createTaskElement(task);
                    taskElementCache.set(task.id, taskElement);
                    fragment.appendChild(taskElement);
                }
            });
            
            container.appendChild(fragment);
        }
        
        // Ê£ÄÊü•‰ªªÂä°ÂÖÉÁ¥†ÊòØÂê¶‰ªçÁÑ∂ÊúâÊïà
        function isTaskElementValid(element, task) {
            return element && element.dataset.taskId === task.id;
        }
        
        // Êõ¥Êñ∞‰ªªÂä°ÂÖÉÁ¥†Áä∂ÊÄÅÔºà‰∏çÈáçÊñ∞ÂàõÂª∫Ôºâ
        function updateTaskElementState(element, task) {
            // Êõ¥Êñ∞ÂÆåÊàêÁä∂ÊÄÅ - Êõ¥Êñ∞ÂúÜÂúàÂõæÊ†á
            const completeBtn = element.querySelector('.task-complete-btn i');
            if (completeBtn) {
                if (task.completed) {
                    completeBtn.className = 'fa fa-check-circle text-success';
                } else {
                    completeBtn.className = 'fa fa-circle-o text-gray-300';
                }
            }
            
            // Êõ¥Êñ∞‰ªªÂä°Ê†áÈ¢òÊ†∑Âºè
            const titleElement = element.querySelector('h4');
            if (titleElement) {
                titleElement.className = task.completed ? 'font-medium line-through text-gray-500' : 'font-medium';
            }
            
            // Êõ¥Êñ∞‰ºòÂÖàÁ∫ßÊåâÈíÆÁä∂ÊÄÅ
            const priorityBtns = element.querySelectorAll('.priority-quick-btn');
            priorityBtns.forEach(btn => {
                btn.classList.toggle('active', btn.dataset.priority === task.priority);
            });
            
            // ‰∏∫Â∑≤ÂÆåÊàê‰ªªÂä°Ê∑ªÂä†Êõ¥Âº∫ÁöÑËßÜËßâÊïàÊûúÂíå‰∫§‰∫íÈôêÂà∂
            if (task.completed) {
                element.classList.add('opacity-50', 'bg-green-50', 'border-green-200', 'pointer-events-none');
                element.classList.remove('bg-white', 'border-gray-200');
                
                // Á¶ÅÁî®ÈÉ®ÂàÜ‰∫§‰∫íÊåâÈíÆÔºå‰ΩÜ‰øùÊåÅËØ¶ÊÉÖÊåâÈíÆÂèØÁî®
                const interactiveElements = element.querySelectorAll('.priority-quick-btn, .time-adjust-btn');
                interactiveElements.forEach(el => {
                    el.style.pointerEvents = 'none';
                    el.style.opacity = '0.5';
                });
                
                // ‰øùÊåÅÂÆåÊàêÊåâÈíÆÂèØÁÇπÂáªÔºå‰ΩÜÊ∑ªÂä†ËßÜËßâÊèêÁ§∫
                const completeButton = element.querySelector('.task-complete-btn');
                if (completeButton) {
                    completeButton.style.pointerEvents = 'auto';
                    completeButton.classList.add('hover:bg-red-50');
                }
            } else {
                element.classList.remove('opacity-50', 'bg-green-50', 'border-green-200', 'pointer-events-none');
                element.classList.add('bg-white', 'border-gray-200');
                
                // ÊÅ¢Â§çÈÉ®ÂàÜ‰∫§‰∫íÊåâÈíÆ
                const interactiveElements = element.querySelectorAll('.priority-quick-btn, .time-adjust-btn');
                interactiveElements.forEach(el => {
                    el.style.pointerEvents = 'auto';
                    el.style.opacity = '1';
                });
                
                // ÁßªÈô§ÂÆåÊàêÊåâÈíÆÁöÑÁâπÊÆäÊ†∑Âºè
                const completeButton = element.querySelector('.task-complete-btn');
                if (completeButton) {
                    completeButton.classList.remove('hover:bg-red-50');
                }
            }
            
            // Êõ¥Êñ∞Êó∂Èó¥Ë∞ÉËäÇÊåâÈíÆÊòæÁ§∫
            const timeAdjustContainer = element.querySelector('.flex.items-center.gap-1.mt-2');
            if (timeAdjustContainer) {
                timeAdjustContainer.style.display = task.completed ? 'none' : 'flex';
            }
        }
        
        // Ê∏ÖÁêÜÊó†ÊïàÁöÑ‰ªªÂä°ÂÖÉÁ¥†ÁºìÂ≠ò
        function cleanupTaskElementCache() {
            const currentTaskIds = new Set(tasks.map(task => task.id));
            for (const [taskId, element] of taskElementCache.entries()) {
                if (!currentTaskIds.has(taskId)) {
                    taskElementCache.delete(taskId);
                }
            }
        }
        
        // ÊÄßËÉΩ‰ºòÂåñÁöÑÂÆöÊó∂Âô®ÁÆ°ÁêÜ
        const timerManager = {
            timers: new Map(),
            
            setTimer(id, callback, interval) {
                // Ê∏ÖÈô§Â∑≤Â≠òÂú®ÁöÑÂÆöÊó∂Âô®
                if (this.timers.has(id)) {
                    clearInterval(this.timers.get(id));
                }
                
                const timerId = setInterval(callback, interval);
                this.timers.set(id, timerId);
                return timerId;
            },
            
            clearTimer(id) {
                if (this.timers.has(id)) {
                    clearInterval(this.timers.get(id));
                    this.timers.delete(id);
                }
            },
            
            clearAllTimers() {
                this.timers.forEach(timerId => clearInterval(timerId));
                this.timers.clear();
            }
        };

        // Èò≤ÊäñÂáΩÊï∞‰ºòÂåñÈ¢ëÁπÅÊìç‰Ωú
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }
        
        // ËäÇÊµÅÂáΩÊï∞‰ºòÂåñÈ´òÈ¢ë‰∫ã‰ª∂
        function throttle(func, limit) {
            let inThrottle;
            return function(...args) {
                if (!inThrottle) {
                    func.apply(this, args);
                    inThrottle = true;
                    setTimeout(() => inThrottle = false, limit);
                }
            };
        }
        
        // ‰ºòÂåñÁöÑ‰ªªÂä°ÁªüËÆ°Êõ¥Êñ∞
        const debouncedUpdateTaskStats = debounce(() => {
            updateTaskStats();
        }, 300);
        
        // ‰ºòÂåñÁöÑÊô∫ËÉΩÂª∫ËÆÆÊõ¥Êñ∞
        const debouncedUpdateSmartSuggestions = debounce(() => {
            updateSmartSuggestions();
        }, 500);
        
        // ‰ºòÂåñÁöÑÂõæË°®Êõ¥Êñ∞
        const debouncedUpdateCharts = debounce(() => {
            updateCharts();
        }, 800);
        
        // ‰ºòÂåñÁöÑ‰ªªÂä°Ê∏≤Êüì
        const debouncedRenderTasks = debounce(() => {
            renderTasks();
        }, 200);
        
        // ‰ºòÂåñÁöÑÂø´ÈÄüÂæÖÂäûÂàóË°®Êõ¥Êñ∞
        const debouncedUpdateQuickTodoList = debounce(() => {
            updateQuickTodoList();
        }, 300);
        
        // ‰ºòÂåñÁöÑÈ°∂ÈÉ®Âø´ÈÄüÂæÖÂäûÂàóË°®Êõ¥Êñ∞
        const debouncedUpdateQuickTodoListTop = debounce(() => {
            updateQuickTodoListTop();
        }, 300);
        
        // ‰ºòÂåñÁöÑ‰ªªÂä°Ê∏≤ÊüìÔºàËäÇÊµÅÁâàÊú¨Ôºâ
        const throttledRenderTasks = throttle(() => {
            renderTasks();
        }, 1000);
        
        // ÊÄßËÉΩ‰ºòÂåñÂàùÂßãÂåñÂáΩÊï∞
        function initPerformanceOptimizations() {
            // ÂàùÂßãÂåñ‰∫ã‰ª∂ÂßîÊâò
            setupTaskEventDelegation();
            
            // ‰ΩøÁî®timerManagerÁÆ°ÁêÜÊó∂Èó¥ÊòæÁ§∫Êõ¥Êñ∞
            timerManager.setTimer('timeDisplay', () => {
                setCurrentDate();
                debouncedUpdateQuickTodoList();
                debouncedUpdateSmartSuggestions();
            }, 30000);
            
            // Ê∑ªÂä†È°µÈù¢ÂèØËßÅÊÄßÂèòÂåñÁõëÂê¨Ôºå‰ºòÂåñÊÄßËÉΩ
            document.addEventListener('visibilitychange', () => {
                if (document.hidden) {
                    // È°µÈù¢ÈöêËóèÊó∂ÊöÇÂÅúÈùûÂøÖË¶ÅÂÆöÊó∂Âô®
                    timerManager.clearTimer('timeDisplay');
                } else {
                    // È°µÈù¢ÊòæÁ§∫Êó∂ÊÅ¢Â§çÂÆöÊó∂Âô®
                    timerManager.setTimer('timeDisplay', () => {
                        setCurrentDate();
                        debouncedUpdateQuickTodoList();
                        debouncedUpdateSmartSuggestions();
                    }, 30000);
                    
                    // Á´ãÂç≥Êõ¥Êñ∞‰∏ÄÊ¨°ÊòæÁ§∫
                    setCurrentDate();
                    throttledRenderTasks();
                }
            });
        }
        
        function setupTaskEventDelegation() {
            const taskContainers = ['tasks-container'];
            
            taskContainers.forEach(containerId => {
                const container = document.getElementById(containerId);
                if (container) {
                    container.addEventListener('click', (e) => {
                        const target = e.target;
                        const taskEl = target.closest('[data-id]');
                        
                        if (!taskEl) return;
                        
                        const taskId = taskEl.dataset.id;
                        
                        // Â§ÑÁêÜ‰ªªÂä°ÂÆåÊàêÊåâÈíÆÁÇπÂáª
                        if (target.closest('.task-complete-btn')) {
                            e.stopPropagation();
                            toggleTaskComplete(taskId);
                            return;
                        }
                        
                        // Â§ÑÁêÜ‰ªªÂä°ËØ¶ÊÉÖÊåâÈíÆÁÇπÂáª
                        if (target.closest('.task-detail-btn')) {
                            e.stopPropagation();
                            openTaskDetailModal(taskId);
                            return;
                        }
                        
                        // Â§ÑÁêÜÊó∂Èó¥Ë∞ÉËäÇÊåâÈíÆÁÇπÂáª
                        if (target.closest('.time-adjust-btn')) {
                            e.stopPropagation();
                            const btn = target.closest('.time-adjust-btn');
                            const minutes = parseInt(btn.dataset.minutes);
                            adjustTaskTime(taskId, minutes);
                            return;
                        }
                        
                        // Â§ÑÁêÜ‰ºòÂÖàÁ∫ßÊåâÈíÆÁÇπÂáª
                        if (target.closest('.priority-btn') || target.closest('.priority-quick-btn')) {
                            e.stopPropagation();
                            const btn = target.closest('.priority-btn') || target.closest('.priority-quick-btn');
                            const newPriority = btn.dataset.priority;
                            changeTaskPriority(taskId, newPriority);
                            return;
                        }
                    });
                }
            });
        }
        
        // ‰ªªÂä°ÂÖÉÁ¥†Ê®°ÊùøÁºìÂ≠ò
        const taskElementTemplate = {
            baseClasses: 'card p-3 flex items-center justify-between',
            completedClass: 'opacity-50 bg-green-50 border-green-200 pointer-events-none',
            activeClass: 'bg-white border-gray-200',
            timeAdjustButtons: [
                { minutes: 30, text: '+30ÂàÜÈíü', class: 'bg-blue-100 text-blue-600 hover:bg-blue-200' },
                { minutes: -30, text: '-30ÂàÜÈíü', class: 'bg-orange-100 text-orange-600 hover:bg-orange-200' }
            ]
        };

        // ÂàõÂª∫‰ªªÂä°ÂÖÉÁ¥†
        function createTaskElement(task) {
            const taskEl = document.createElement('div');
            
            // ÂÆâÂÖ®ÁöÑÊó∂Èó¥Â§ÑÁêÜÂáΩÊï∞
            const getTaskHour = (task) => {
                try {
                    if (!task || !task.startTime) {
                        return new Date();
                    }
                    const taskTime = new Date(task.startTime);
                    if (isNaN(taskTime.getTime())) {
                        return new Date();
                    }
                    return taskTime;
                } catch (e) {
                    return new Date();
                }
            };
            
            const startTime = getTaskHour(task);
            const isPast = startTime < new Date() && !task.completed;
            
            // Ê†ºÂºèÂåñÊó∂Èó¥ÊòæÁ§∫
            const timeOptions = { hour: '2-digit', minute: '2-digit' };
            const dateOptions = { month: 'short', day: 'numeric' };
            const isToday = isSameDay(startTime, new Date());
            
            let timeText = startTime.toLocaleTimeString('zh-CN', timeOptions);
            if (!isToday) {
                timeText = `${startTime.toLocaleDateString('zh-CN', dateOptions)} ${timeText}`;
            }
            
            // ÊûÑÂª∫Á±ªÂêç
            const classes = [
                taskElementTemplate.baseClasses,
                task.completed ? taskElementTemplate.completedClass : taskElementTemplate.activeClass
            ].filter(Boolean).join(' ');
            
            taskEl.className = classes;
            taskEl.dataset.id = task.id;
            
            // ÊûÑÂª∫Êó∂Èó¥Ë∞ÉËäÇÊåâÈíÆHTML
            const timeAdjustButtonsHtml = !task.completed ? 
                taskElementTemplate.timeAdjustButtons.map(btn => 
                    `<button class="time-adjust-btn text-xs px-2 py-1 rounded transition-colors ${btn.class}" data-task-id="${task.id}" data-minutes="${btn.minutes}">${btn.text}</button>`
                ).join('') : '';
            
            // ÊûÑÂª∫ÂÆåÊï¥HTML
            taskEl.innerHTML = `
                <div class="flex items-start flex-1">
                    <button class="task-complete-btn icon-btn mr-3 mt-0.5 jelly-bounce ${task.completed ? 'hover:bg-red-50' : ''}" data-id="${task.id}" style="${task.completed ? 'pointer-events: auto;' : ''}">
                        <i class="fa ${task.completed ? 'fa-check-circle text-success' : 'fa-circle-o text-gray-300'}"></i>
                    </button>
                    <div class="flex-1">
                        <div class="flex items-center">
                            <h4 class="font-medium ${task.completed ? 'line-through text-gray-500' : ''}">${task.title}</h4>
                            ${isPast ? '<span class="ml-2 text-xs px-2 py-0.5 bg-warning/20 text-warning rounded-full">Â∑≤ÈÄæÊúü</span>' : ''}
                        </div>
                        <p class="text-sm text-gray-500 mt-0.5 flex items-center justify-between">
                            <span class="flex items-center">
                                <i class="fa fa-clock-o mr-1"></i> ${timeText}
                                <span class="ml-2 px-1.5 py-0.5 rounded text-xs ${priorityConfig[task.priority].badge}">${priorityConfig[task.priority].text}</span>
                            </span>
                            <div class="flex items-center gap-0.5">
                                <button class="priority-quick-btn icon-btn text-xs ${task.priority === 'high' ? 'active' : ''}" data-task-id="${task.id}" data-priority="high" title="È´ò‰ºòÂÖàÁ∫ß" style="${task.completed ? 'pointer-events: none; opacity: 0.5;' : ''}">
                                    <i class="fa fa-arrow-up text-red-500"></i>
                                </button>
                                <button class="priority-quick-btn icon-btn text-xs ${task.priority === 'medium' ? 'active' : ''}" data-task-id="${task.id}" data-priority="medium" title="‰∏≠‰ºòÂÖàÁ∫ß" style="${task.completed ? 'pointer-events: none; opacity: 0.5;' : ''}">
                                    <i class="fa fa-minus text-yellow-500"></i>
                                </button>
                                <button class="priority-quick-btn icon-btn text-xs ${task.priority === 'low' ? 'active' : ''}" data-task-id="${task.id}" data-priority="low" title="‰Ωé‰ºòÂÖàÁ∫ß" style="${task.completed ? 'pointer-events: none; opacity: 0.5;' : ''}">
                                    <i class="fa fa-arrow-down text-blue-500"></i>
                                </button>
                            </div>
                        </p>
                        ${!task.completed ? `
                        <div class="flex items-center gap-1 mt-2">
                            <span class="text-xs text-gray-400">Âø´ÈÄüË∞ÉËäÇ:</span>
                            ${timeAdjustButtonsHtml}
                        </div>
                        ` : ''}
                    </div>
                </div>
                <button class="task-detail-btn icon-btn elastic-pulse">
                    <i class="fa fa-ellipsis-h text-gray-400"></i>
                </button>
            `;
            
            // ‰ΩøÁî®‰∫ã‰ª∂ÂßîÊâòÂáèÂ∞ë‰∫ã‰ª∂ÁõëÂê¨Âô®Êï∞Èáè
            return taskEl;
        }
        
        // Ê∏≤Êüì‰∏ã‰∏Ä‰∏™‰ªªÂä°
        function renderNextTask(allTasks) {
            const nextTaskContainer = document.getElementById('next-task-container');
            
            if (allTasks.length === 0) {
                // Ê≤°Êúâ‰ªªÂä°Êó∂ÈöêËóè‰ªªÂä°Ê°Ü
                nextTaskContainer.style.display = 'none';
                return;
            }
            
            // ÂÆâÂÖ®ÁöÑÊó∂Èó¥Â§ÑÁêÜÂáΩÊï∞
            const getTaskHour = (task) => {
                try {
                    if (!task || !task.startTime) {
                        return new Date();
                    }
                    const taskTime = new Date(task.startTime);
                    if (isNaN(taskTime.getTime())) {
                        return new Date();
                    }
                    return taskTime;
                } catch (e) {
                    return new Date();
                }
            };
            
            // ÊâæÂà∞ÊúÄËøëÁöÑÊú™ÂÆåÊàê‰ªªÂä°
            const now = new Date();
            let nextTask = null;
            let minTimeDiff = Infinity;
            
            allTasks.forEach(task => {
                const taskTime = getTaskHour(task);
                const timeDiff = taskTime - now;
                
                if (timeDiff >= 0 && timeDiff < minTimeDiff) {
                    minTimeDiff = timeDiff;
                    nextTask = task;
                }
            });
            
            // Â¶ÇÊûúÊâÄÊúâ‰ªªÂä°ÈÉΩÂ∑≤ËøáÊúüÔºåÂèñÊúÄËøëËøáÊúüÁöÑ
            if (!nextTask && allTasks.length > 0) {
                allTasks.sort((a, b) => getTaskHour(b) - getTaskHour(a));
                nextTask = allTasks[0];
            }
            
            if (nextTask) {
                // Êúâ‰ªªÂä°Êó∂ÊòæÁ§∫‰ªªÂä°Ê°Ü
                nextTaskContainer.style.display = 'block';
                
                const startTime = getTaskHour(nextTask);
                const timeOptions = { hour: '2-digit', minute: '2-digit' };
                
                document.getElementById('next-task-title').textContent = nextTask.title;
                document.getElementById('next-task-description').textContent = nextTask.description || 'Êó†ÊèèËø∞';
                document.getElementById('next-task-time').textContent = `ÂºÄÂßãÊó∂Èó¥: ${startTime.toLocaleString('zh-CN', timeOptions)}`;
                document.getElementById('next-task-priority').textContent = priorityConfig[nextTask.priority].text;
                document.getElementById('next-task-priority').className = `px-2 py-1 rounded-full text-xs font-medium ${priorityConfig[nextTask.priority].badge}`;
                
                // Ê∑ªÂä†‰∫ã‰ª∂ÁõëÂê¨
                document.getElementById('complete-next-task-btn').onclick = () => {
                    toggleTaskComplete(nextTask.id);
                };
                
                document.getElementById('detail-next-task-btn').onclick = () => {
                    openTaskDetailModal(nextTask.id);
                };
            } else {
                // Ê≤°ÊúâÂç≥Â∞ÜÂºÄÂßãÁöÑ‰ªªÂä°Êó∂ÈöêËóè‰ªªÂä°Ê°Ü
                nextTaskContainer.style.display = 'none';
            }
        }
        
        // Âà†Èô§ÈÄæÊúü‰ªªÂä°ÂäüËÉΩ
        function deleteOverdueTasks() {
            const now = new Date();
            
            // ÂÆâÂÖ®ÁöÑÊó∂Èó¥Â§ÑÁêÜÂáΩÊï∞
            const getTaskHour = (task) => {
                try {
                    if (!task || !task.startTime) {
                        return new Date();
                    }
                    const taskTime = new Date(task.startTime);
                    if (isNaN(taskTime.getTime())) {
                        return new Date();
                    }
                    return taskTime;
                } catch (e) {
                    return new Date();
                }
            };
            
            const overdueTasks = tasks.filter(task => {
                const taskTime = getTaskHour(task);
                return !task.completed && taskTime < now;
            });
            
            if (overdueTasks.length === 0) {
                showNotification('Ê≤°ÊúâÈÄæÊúü‰ªªÂä°', 'ÂΩìÂâçÊ≤°ÊúâÈúÄË¶ÅÂà†Èô§ÁöÑÈÄæÊúü‰ªªÂä°', 'info');
                return;
            }
            
            CustomDialog.confirm({
                title: 'Âà†Èô§ÈÄæÊúü‰ªªÂä°',
                message: `Á°ÆÂÆöË¶ÅÂà†Èô§ ${overdueTasks.length} ‰∏™ÈÄæÊúü‰ªªÂä°ÂêóÔºü`,
                details: `ÈÄæÊúü‰ªªÂä°Ôºö\n${overdueTasks.map(task => `‚Ä¢ ${task.title}`).join('\n')}`,
                type: 'warning',
                okText: 'Á°ÆËÆ§Âà†Èô§',
                cancelText: 'ÂèñÊ∂à'
            }).then(confirmed => {
                if (confirmed) {
                    // ‰ªé‰ªªÂä°ÂàóË°®‰∏≠ÁßªÈô§ÈÄæÊúü‰ªªÂä°
                    tasks = tasks.filter(task => {
                        const taskTime = getTaskHour(task);
                        return !(taskTime < now && !task.completed);
                    });
                    
                    // Ê∏ÖÁêÜ‰ªªÂä°ÂÖÉÁ¥†ÁºìÂ≠ò
                    cleanupTaskElementCache();
                    
                    // ‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®Ôºà‰ΩøÁî®ÊâπÈáè‰øùÂ≠òÔºâ
                    saveTasks();
                    
                    // ÈáçÊñ∞Ê∏≤Êüì‰ªªÂä°ÂàóË°®Ôºà‰ΩøÁî®Èò≤ÊäñÊ∏≤ÊüìÔºâ
                    renderTasks();
                    updateTaskStats();
                    debouncedUpdateQuickTodoListTop();
                    
                    showNotification('Â∑≤Âà†Èô§', `ÊàêÂäüÂà†Èô§ ${overdueTasks.length} ‰∏™ÈÄæÊúü‰ªªÂä°`, 'success');
                }
            });
        }
        
        // Âº∫Âà∂Êõ¥Êñ∞ÁªüËÆ°ÂæΩÁ´†Áä∂ÊÄÅ - Êñ∞Â¢ûÂáΩÊï∞
        function forceUpdateStatsBadge() {
            setTimeout(() => {
                const statsBadge = document.getElementById('stats-badge');
                if (statsBadge) {
                    const currentTasks = Storage.get('smartScheduleTasks', []);
                    const actualTaskCount = currentTasks ? currentTasks.length : 0;
                    
                    console.log('Force update stats badge:', actualTaskCount, 'tasks');
                    
                    if (actualTaskCount > 0) {
                        statsBadge.textContent = actualTaskCount > 99 ? '99+' : actualTaskCount;
                        statsBadge.style.display = 'flex';
                        statsBadge.style.visibility = 'visible';
                        statsBadge.style.opacity = '1';
                        // Á°Æ‰øùËÉåÊôØËâ≤Ê≠£Á°ÆÂ∫îÁî®
                        statsBadge.classList.add('bg-primary');
                        statsBadge.style.backgroundColor = '#007AFF';
                    } else {
                        statsBadge.style.display = 'none';
                        statsBadge.style.visibility = 'hidden';
                        statsBadge.style.opacity = '0';
                    }
                }
            }, 100); // Âª∂Ëøü100msÁ°Æ‰øùDOMÊõ¥Êñ∞ÂÆåÊàê
        }

        // Êõ¥Êñ∞‰ªªÂä°ÁªüËÆ°
        function updateTaskStats() {
            const completedCount = tasks.filter(task => task.completed).length;
            const remainingCount = tasks.filter(task => !task.completed).length;
            
            // Êõ¥Êñ∞ÁªüËÆ°ÂæΩÁ´† - Â¢ûÂº∫ÁâàÊú¨ÔºåÁ°Æ‰øùÊ≠£Á°ÆÊòæÁ§∫/ÈöêËóè
            const statsBadge = document.getElementById('stats-badge');
            if (statsBadge) {
                // Âº∫Âà∂ÈáçÊñ∞Ê£ÄÊü•‰ªªÂä°Êï∞ÁªÑÁä∂ÊÄÅ
                const currentTasks = Storage.get('smartScheduleTasks', []);
                const actualTaskCount = currentTasks ? currentTasks.length : 0;
                
                if (actualTaskCount > 0) {
                    statsBadge.textContent = actualTaskCount > 99 ? '99+' : actualTaskCount;
                    statsBadge.style.display = 'flex';
                    // Á°Æ‰øùÂèØËßÅÊÄß
                    statsBadge.style.visibility = 'visible';
                    statsBadge.style.opacity = '1';
                    // Á°Æ‰øùËÉåÊôØËâ≤Ê≠£Á°ÆÂ∫îÁî®
                    statsBadge.classList.add('bg-primary');
                    statsBadge.style.backgroundColor = '#007AFF';
                } else {
                    statsBadge.style.display = 'none';
                    // Á°Æ‰øùÂÆåÂÖ®ÈöêËóè
                    statsBadge.style.visibility = 'hidden';
                    statsBadge.style.opacity = '0';
                }
            }
            
            // Êõ¥Êñ∞ËèúÂçï‰∏≠ÁöÑÂø´Êç∑ÁªüËÆ°
            const menuCompletedCount = document.getElementById('menu-completed-count');
            const menuRemainingCount = document.getElementById('menu-remaining-count');
            
            if (menuCompletedCount && menuRemainingCount) {
                menuCompletedCount.textContent = completedCount;
                menuRemainingCount.textContent = remainingCount;
            }
            
            // Êõ¥Êñ∞Áå´Âí™Âä©ÊâãÁªüËÆ°
            const catCompletedCount = document.getElementById('cat-completed-count');
            const catRemainingCount = document.getElementById('cat-remaining-count');
            const catEfficiency = document.getElementById('cat-efficiency');
            
            if (catCompletedCount && catRemainingCount && catEfficiency) {
                catCompletedCount.textContent = completedCount;
                catRemainingCount.textContent = remainingCount;
                const efficiency = tasks.length > 0 ? Math.round((completedCount / tasks.length) * 100) : 0;
                catEfficiency.textContent = efficiency + '%';
            }
            
            // Êõ¥Êñ∞‰ºòÂÖàÁ∫ßÁªüËÆ°
            const highPriorityPercent = document.getElementById('high-priority-percent');
            const mediumPriorityPercent = document.getElementById('medium-priority-percent');
            const lowPriorityPercent = document.getElementById('low-priority-percent');
            const highPriorityBar = document.getElementById('high-priority-bar');
            const mediumPriorityBar = document.getElementById('medium-priority-bar');
            const lowPriorityBar = document.getElementById('low-priority-bar');
            
            const highPriority = tasks.filter(task => task.priority === 'high' && !task.completed).length;
            const mediumPriority = tasks.filter(task => task.priority === 'medium' && !task.completed).length;
            const lowPriority = tasks.filter(task => task.priority === 'low' && !task.completed).length;
            const totalActive = highPriority + mediumPriority + lowPriority;
            
            if (totalActive > 0 && highPriorityPercent && mediumPriorityPercent && lowPriorityPercent) {
                const highPercent = Math.round((highPriority / totalActive) * 100);
                const mediumPercent = Math.round((mediumPriority / totalActive) * 100);
                const lowPercent = Math.round((lowPriority / totalActive) * 100);
                
                highPriorityPercent.textContent = `${highPercent}%`;
                mediumPriorityPercent.textContent = `${mediumPercent}%`;
                lowPriorityPercent.textContent = `${lowPercent}%`;
                
                if (highPriorityBar && mediumPriorityBar && lowPriorityBar) {
                    highPriorityBar.style.width = `${highPercent}%`;
                    mediumPriorityBar.style.width = `${mediumPercent}%`;
                    lowPriorityBar.style.width = `${lowPercent}%`;
                }
            }
            
            // Êõ¥Êñ∞Êô∫ËÉΩ‰ªªÂä°ÊÄªÁªì
            updateSmartSummary();
            
            // Âº∫Âà∂Êõ¥Êñ∞ÁªüËÆ°ÂæΩÁ´†ÔºåÁ°Æ‰øùÁä∂ÊÄÅÊ≠£Á°Æ
            forceUpdateStatsBadge();
        }
        
        // Êõ¥Êñ∞Êô∫ËÉΩ‰ªªÂä°ÊÄªÁªì
        function updateSmartSummary() {
            const now = new Date();
            const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
            const todayEnd = new Date(today);
            todayEnd.setHours(23, 59, 59, 999);
            
            // Ëé∑Âèñ‰ªäÊó•‰ªªÂä°
            const todayTasks = tasks.filter(task => {
                const taskDate = new Date(task.startTime);
                return taskDate >= today && taskDate <= todayEnd;
            });
            
            const todayCompleted = todayTasks.filter(task => task.completed);
            const todayActive = todayTasks.filter(task => !task.completed);
            
            // Êõ¥Êñ∞‰ªäÊó•Ê¶ÇËßà
            updateTodayOverview(todayTasks, todayCompleted, todayActive);
            
            // Êõ¥Êñ∞‰ªªÂä°ÂàÜÁ±ª
            updateTaskCategories(todayTasks);
            
            // Êõ¥Êñ∞Êó∂Èó¥ÂàÜÈÖç
            updateTimeAllocation(todayTasks);
            
            // Êõ¥Êñ∞Êô∫ËÉΩÂª∫ËÆÆ
            updateAISuggestions(todayTasks, todayCompleted, todayActive);
        }
        
        // Êõ¥Êñ∞‰ªäÊó•Ê¶ÇËßà
        function updateTodayOverview(todayTasks, todayCompleted, todayActive) {
            const overviewElement = document.getElementById('today-overview');
            
            // ÂÆâÂÖ®Ëé∑ÂèñÁøªËØëÊñáÊú¨
            const getText = (key, fallback) => {
                try {
                    const texts = i18n.languages[i18n.currentLanguage];
                    return texts && texts[key] ? texts[key] : fallback;
                } catch (e) {
                    return fallback;
                }
            };
            
            const texts = {
                todayTasks: getText('todayTasks', '‰ªäÊó•‰ªªÂä°'),
                items: getText('items', 'È°π'),
                completionRate: getText('completionRate', 'ÂÆåÊàêÁéá'),
                noTasksToday: getText('noTasksToday', '‰ªäÂ§©Ê≤°Êúâ‰ªªÂä°'),
                totalTasks: getText('totalTasks', 'ÊÄª‰ªªÂä°'),
                completed: getText('completed', 'Â∑≤ÂÆåÊàê'),
                highPriorityTasks: getText('highPriorityTasks', '‰∏™È´ò‰ºòÂÖàÁ∫ß‰ªªÂä°'),
                excellentPerformance: getText('excellentPerformance', 'Ë°®Áé∞‰ºòÁßÄÔºÅ'),
                keepGoing: getText('keepGoing', 'ÁªßÁª≠Âä†Ê≤πÔºÅ'),
                needSpeedUp: getText('needSpeedUp', 'ÈúÄË¶ÅÂä†Âø´ËøõÂ∫¶')
            };
            
            if (todayTasks.length === 0) {
                overviewElement.innerHTML = `
                    <div class="flex items-center justify-between">
                        <span class="text-gray-600">${texts.todayTasks}</span>
                        <span class="font-medium text-gray-800">0 ${texts.items}</span>
                    </div>
                    <div class="flex items-center justify-between mt-2">
                        <span class="text-gray-600">${texts.completionRate}</span>
                        <span class="font-medium text-gray-800">-</span>
                    </div>
                    <p class="mt-2 text-sm text-gray-500">${texts.noTasksToday}</p>
                `;
                return;
            }
            
            const completionRate = Math.round((todayCompleted.length / todayTasks.length) * 100);
            const highPriorityCount = todayActive.filter(task => task.priority === 'high').length;
            
            overviewElement.innerHTML = `
                <div class="grid grid-cols-3 gap-2 text-center">
                    <div>
                        <div class="text-lg font-bold text-purple-600">${todayTasks.length}</div>
                        <div class="text-xs text-gray-500">${texts.totalTasks}</div>
                    </div>
                    <div>
                        <div class="text-lg font-bold text-green-600">${todayCompleted.length}</div>
                        <div class="text-xs text-gray-500">${texts.completed}</div>
                    </div>
                    <div>
                        <div class="text-lg font-bold text-blue-600">${completionRate}%</div>
                        <div class="text-xs text-gray-500">${texts.completionRate}</div>
                    </div>
                </div>
                ${highPriorityCount > 0 ? `<p class="mt-2 text-sm text-orange-600"><i class="fa fa-exclamation-triangle mr-1"></i>${highPriorityCount}${texts.highPriorityTasks}</p>` : ''}
                <p class="mt-2 text-sm text-gray-600">${completionRate >= 80 ? texts.excellentPerformance : completionRate >= 50 ? texts.keepGoing : texts.needSpeedUp}</p>
            `;
        }
        
        // Êõ¥Êñ∞‰ªªÂä°ÂàÜÁ±ª
        function updateTaskCategories(todayTasks) {
            const categoriesElement = document.getElementById('task-categories');
            
            // ÂÆâÂÖ®Ëé∑ÂèñÁøªËØëÊñáÊú¨
            const getText = (key, fallback) => {
                try {
                    const texts = i18n.languages[i18n.currentLanguage];
                    return texts && texts[key] ? texts[key] : fallback;
                } catch (e) {
                    return fallback;
                }
            };
            
            const texts = {
                noTaskData: getText('noTaskData', 'ÊöÇÊó†‰ªªÂä°Êï∞ÊçÆ'),
                byPriority: getText('byPriority', 'Êåâ‰ºòÂÖàÁ∫ß'),
                byStatus: getText('byStatus', 'ÊåâÁä∂ÊÄÅ'),
                byTimeSlot: getText('byTimeSlot', 'ÊåâÊó∂Èó¥ÊÆµ'),
                high: getText('high', 'È´ò'),
                medium: getText('medium', '‰∏≠'),
                low: getText('low', '‰Ωé'),
                completed: getText('completed', 'Â∑≤ÂÆåÊàê'),
                pending: getText('pending', 'ÂæÖÂÆåÊàê'),
                morning: getText('morning', '‰∏äÂçà'),
                afternoon: getText('afternoon', '‰∏ãÂçà'),
                evening: getText('evening', 'Êôö‰∏ä')
            };
            
            if (todayTasks.length === 0) {
                categoriesElement.innerHTML = `<p class="text-gray-500">${texts.noTaskData}</p>`;
                return;
            }
            
            // Êåâ‰ºòÂÖàÁ∫ßÂàÜÁ±ª
            const highPriority = todayTasks.filter(task => task.priority === 'high');
            const mediumPriority = todayTasks.filter(task => task.priority === 'medium');
            const lowPriority = todayTasks.filter(task => task.priority === 'low');
            
            // ÊåâÁä∂ÊÄÅÂàÜÁ±ª
            const completed = todayTasks.filter(task => task.completed);
            const pending = todayTasks.filter(task => !task.completed);
            
            // ÂÆâÂÖ®Â§ÑÁêÜ‰ªªÂä°Êó∂Èó¥
            const getTaskHour = (task) => {
                try {
                    if (!task.startTime) return 12; // ÈªòËÆ§‰∏≠Âçà
                    const date = new Date(task.startTime);
                    if (isNaN(date.getTime())) return 12;
                    return date.getHours();
                } catch (e) {
                    return 12;
                }
            };
            
            // ÊåâÊó∂Èó¥ÊÆµÂàÜÁ±ª
            const morningTasks = todayTasks.filter(task => {
                const hour = getTaskHour(task);
                return hour >= 6 && hour < 12;
            });
            
            const afternoonTasks = todayTasks.filter(task => {
                const hour = getTaskHour(task);
                return hour >= 12 && hour < 18;
            });
            
            const eveningTasks = todayTasks.filter(task => {
                const hour = getTaskHour(task);
                return hour >= 18 && hour < 24;
            });
            
            categoriesElement.innerHTML = `
                <div class="space-y-2">
                    <div class="flex justify-between items-center">
                        <span class="text-gray-600">${texts.byPriority}</span>
                        <div class="flex gap-2 text-xs">
                            <span class="px-2 py-1 bg-red-100 text-red-700 rounded">${texts.high} ${highPriority.length}</span>
                            <span class="px-2 py-1 bg-blue-100 text-blue-700 rounded">${texts.medium} ${mediumPriority.length}</span>
                            <span class="px-2 py-1 bg-green-100 text-green-700 rounded">${texts.low} ${lowPriority.length}</span>
                        </div>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-600">${texts.byStatus}</span>
                        <div class="flex gap-2 text-xs">
                            <span class="px-2 py-1 bg-green-100 text-green-700 rounded">${texts.completed} ${completed.length}</span>
                            <span class="px-2 py-1 bg-orange-100 text-orange-700 rounded">${texts.pending} ${pending.length}</span>
                        </div>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-600">${texts.byTimeSlot}</span>
                        <div class="flex gap-2 text-xs">
                            <span class="px-2 py-1 bg-yellow-100 text-yellow-700 rounded">${texts.morning} ${morningTasks.length}</span>
                            <span class="px-2 py-1 bg-indigo-100 text-indigo-700 rounded">${texts.afternoon} ${afternoonTasks.length}</span>
                            <span class="px-2 py-1 bg-purple-100 text-purple-700 rounded">${texts.evening} ${eveningTasks.length}</span>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // Êõ¥Êñ∞Êó∂Èó¥ÂàÜÈÖç
        function updateTimeAllocation(todayTasks) {
            const allocationElement = document.getElementById('time-allocation');
            
            // ÂÆâÂÖ®Ëé∑ÂèñÁøªËØëÊñáÊú¨
            const getText = (key, fallback) => {
                try {
                    const texts = i18n.languages[i18n.currentLanguage];
                    return texts && texts[key] ? texts[key] : fallback;
                } catch (e) {
                    return fallback;
                }
            };
            
            const currentLang = i18n.currentLanguage || 'zh';
            const texts = {
                noTimeSchedule: getText('noTimeSchedule', currentLang === 'zh' ? 'ÊöÇÊó†Êó∂Èó¥ÂÆâÊéí' : 'No time schedule available'),
                totalTasks: getText('totalTasks', currentLang === 'zh' ? 'ÊÄª‰ªªÂä°' : 'Total Tasks'),
                completed: getText('completed', currentLang === 'zh' ? 'Â∑≤ÂÆåÊàê' : 'Completed'),
                remaining: currentLang === 'zh' ? 'Ââ©‰Ωô' : 'Remaining',
                hours: currentLang === 'zh' ? 'Â∞èÊó∂' : 'hours',
                byTimeSlot: getText('byTimeSlot', currentLang === 'zh' ? 'ÊåâÊó∂Èó¥ÊÆµ' : 'By Time Slot'),
                morning: getText('morning', currentLang === 'zh' ? '‰∏äÂçà' : 'Morning'),
                afternoon: getText('afternoon', currentLang === 'zh' ? '‰∏ãÂçà' : 'Afternoon'),
                evening: getText('evening', currentLang === 'zh' ? 'Êôö‰∏ä' : 'Evening')
            };
            
            if (todayTasks.length === 0) {
                allocationElement.innerHTML = `<p class="text-gray-500">${texts.noTimeSchedule}</p>`;
                return;
            }
            
            // ËÆ°ÁÆóÊÄªÊó∂ÈïøÔºàÂÅáËÆæÊØè‰∏™‰ªªÂä°1Â∞èÊó∂Ôºâ
            const totalHours = todayTasks.length;
            const completedHours = todayTasks.filter(task => task.completed).length;
            const remainingHours = totalHours - completedHours;
            
            // ÂÆâÂÖ®Â§ÑÁêÜ‰ªªÂä°Êó∂Èó¥
            const getTaskHour = (task) => {
                try {
                    if (!task.startTime) return 12; // ÈªòËÆ§‰∏≠Âçà
                    const date = new Date(task.startTime);
                    if (isNaN(date.getTime())) return 12;
                    return date.getHours();
                } catch (e) {
                    return 12;
                }
            };
            
            // ÊåâÊó∂Èó¥ÊÆµÁªüËÆ°
            const timeSlots = {
                [texts.morning + ' (6:00-12:00)']: 0,
                [texts.afternoon + ' (12:00-18:00)']: 0,
                [texts.evening + ' (18:00-24:00)']: 0
            };
            
            todayTasks.forEach(task => {
                const hour = getTaskHour(task);
                if (hour >= 6 && hour < 12) {
                    timeSlots[texts.morning + ' (6:00-12:00)']++;
                } else if (hour >= 12 && hour < 18) {
                    timeSlots[texts.afternoon + ' (12:00-18:00)']++;
                } else if (hour >= 18 && hour < 24) {
                    timeSlots[texts.evening + ' (18:00-24:00)']++;
                }
            });
            
            allocationElement.innerHTML = `
                <div class="space-y-2">
                    <div class="flex justify-between items-center">
                        <span class="text-gray-600">${texts.totalTasks}${currentLang === 'zh' ? 'Êó∂ÈïøÔºö' : ' Duration:'}</span>
                        <span class="font-medium">${totalHours} ${texts.hours}</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-600">${texts.completed}${currentLang === 'zh' ? 'Ôºö' : ':'}</span>
                        <span class="font-medium text-green-600">${completedHours} ${texts.hours}</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-600">${texts.remaining}${currentLang === 'zh' ? 'Ôºö' : ':'}</span>
                        <span class="font-medium text-orange-600">${remainingHours} ${texts.hours}</span>
                    </div>
                    <div class="mt-3 pt-3 border-t border-gray-200">
                        <div class="text-sm font-medium text-gray-700 mb-2">${texts.byTimeSlot}${currentLang === 'zh' ? 'Ôºö' : ':'}</div>
                        ${Object.entries(timeSlots).map(([period, count]) => `
                            <div class="flex justify-between items-center text-xs">
                                <span class="text-gray-600">${period}${currentLang === 'zh' ? 'Ôºö' : ':'}</span>
                                <span class="font-medium">${count} ${texts.hours}</span>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }
        
        // Êõ¥Êñ∞Êô∫ËÉΩÂª∫ËÆÆ
        function updateAISuggestions(todayTasks, todayCompleted, todayActive) {
            const suggestionsElement = document.getElementById('ai-suggestions');
            
            const currentLang = i18n.currentLanguage || 'zh';
            
            // ÂÆâÂÖ®Ëé∑ÂèñÁøªËØëÊñáÊú¨
            const getText = (key, fallback) => {
                try {
                    const texts = i18n.languages[i18n.currentLanguage];
                    return texts && texts[key] ? texts[key] : fallback;
                } catch (e) {
                    return fallback;
                }
            };
            
            const texts = {
                noTaskSchedule: getText('noTaskSchedule', currentLang === 'zh' ? '‰ªäÊó•Êó†‰ªªÂä°ÂÆâÊéí' : 'üìù No tasks scheduled for today, consider planning tomorrow\'s work priorities')
            };
            
            const suggestions = [];
            
            // Âü∫‰∫é‰ªªÂä°Êï∞ÈáèÁªôÂá∫Âª∫ËÆÆ
            if (todayTasks.length === 0) {
                suggestions.push(texts.noTaskSchedule);
            } else if (todayTasks.length > 8) {
                suggestions.push('‚ö†Ô∏è ' + (currentLang === 'zh' ? '‰ªäÊó•‰ªªÂä°ËæÉÂ§öÔºåÂª∫ËÆÆ‰ΩøÁî®Áï™ËåÑÂ∑•‰ΩúÊ≥ï‰øùÊåÅ‰∏ìÊ≥®' : 'Many tasks today, consider using Pomodoro technique to stay focused'));
            } else if (todayTasks.length < 3) {
                suggestions.push('üí° ' + (currentLang === 'zh' ? '‰ªªÂä°ËæÉÂ∞ëÔºåÂèØ‰ª•ËÄÉËôëÂ§ÑÁêÜ‰∏Ä‰∫õÁßØÂéãÁöÑÂ∑•‰ΩúÊàñÂ≠¶‰π†Êñ∞ÊäÄËÉΩ' : 'Fewer tasks, consider handling backlogged work or learning new skills'));
            }
            
            // Âü∫‰∫éÂÆåÊàêÁéáÁªôÂá∫Âª∫ËÆÆ
            if (todayTasks.length > 0) {
                const completionRate = (todayCompleted.length / todayTasks.length) * 100;
                
                if (completionRate >= 80) {
                    suggestions.push('üéâ ' + (currentLang === 'zh' ? 'ÂÆåÊàêÁéáÂæàÈ´òÔºÅÁªßÁª≠‰øùÊåÅËøôÁßçÈ´òÊïàÁä∂ÊÄÅ' : 'High completion rate! Keep up this efficient state'));
                } else if (completionRate >= 50) {
                    suggestions.push('üëç ' + (currentLang === 'zh' ? 'ËøõÂ±ï‰∏çÈîôÔºåÂÜçÊé•ÂÜçÂéâÂÆåÊàêÂâ©‰Ωô‰ªªÂä°' : 'Good progress, keep going to complete remaining tasks'));
                } else if (completionRate > 0) {
                    suggestions.push('‚è∞ ' + (currentLang === 'zh' ? 'ÈúÄË¶ÅÂä†Âø´ËøõÂ∫¶ÔºåÂª∫ËÆÆ‰ºòÂÖàÂ§ÑÁêÜÈáçË¶Å‰ªªÂä°' : 'Need to speed up, prioritize important tasks'));
                } else {
                    suggestions.push('üöÄ ' + (currentLang === 'zh' ? 'ÂºÄÂßãË°åÂä®ÂêßÔºÅÂÖà‰ªéÊúÄÁÆÄÂçïÁöÑ‰ªªÂä°ÂºÄÂßã' : 'Time to start! Begin with the simplest task'));
                }
            }
            
            // Âü∫‰∫é‰ºòÂÖàÁ∫ßÁªôÂá∫Âª∫ËÆÆ
            const highPriorityActive = todayActive.filter(task => task.priority === 'high');
            if (highPriorityActive.length > 0) {
                suggestions.push('üî• ' + (currentLang === 'zh' ? `Êúâ ${highPriorityActive.length} ‰∏™È´ò‰ºòÂÖàÁ∫ß‰ªªÂä°ÂæÖÂ§ÑÁêÜÔºåÂª∫ËÆÆ‰ºòÂÖàÂÆåÊàê` : `${highPriorityActive.length} high priority tasks pending, suggest completing them first`));
            }
            
            // Âü∫‰∫éÊó∂Èó¥ÁªôÂá∫Âª∫ËÆÆ
            const now = new Date();
            const currentHour = now.getHours();
            
            if (currentHour >= 18 && todayActive.length > 0) {
                suggestions.push('üåô ' + (currentLang === 'zh' ? 'Êó∂Èó¥ËæÉÊôöÔºåÂª∫ËÆÆÂ∞ÜÈÉ®ÂàÜ‰ªªÂä°Êé®ËøüÂà∞ÊòéÂ§©Ôºå‰øùËØÅ‰ºëÊÅØË¥®Èáè' : 'It\'s getting late, consider postponing some tasks to tomorrow to ensure rest quality'));
            } else if (currentHour >= 12 && currentHour < 14 && todayActive.length > 3) {
                suggestions.push('üçΩÔ∏è ' + (currentLang === 'zh' ? 'Âçà‰ºëÊó∂Èó¥Âà∞‰∫ÜÔºåÈÄÇÂΩì‰ºëÊÅØÊúâÂä©‰∫é‰∏ãÂçàÁöÑÂ∑•‰ΩúÊïàÁéá' : 'Lunch break time, proper rest helps afternoon productivity'));
            }
            
            // ÂÆâÂÖ®Â§ÑÁêÜ‰ªªÂä°Êó∂Èó¥
            const getTaskHour = (task) => {
                try {
                    if (!task.startTime) return 12; // ÈªòËÆ§‰∏≠Âçà
                    const date = new Date(task.startTime);
                    if (isNaN(date.getTime())) return 12;
                    return date.getHours();
                } catch (e) {
                    return 12;
                }
            };
            
            // Âü∫‰∫é‰ªªÂä°ÂàÜÂ∏ÉÁªôÂá∫Âª∫ËÆÆ
            const morningTasks = todayTasks.filter(task => {
                const hour = getTaskHour(task);
                return hour >= 6 && hour < 12;
            });
            
            if (morningTasks.length === 0 && todayTasks.length > 0) {
                suggestions.push('üåÖ ' + (currentLang === 'zh' ? '‰∏äÂçàÊó∂Èó¥ËæÉ‰∏∫Á©∫Èó≤ÔºåÂèØ‰ª•ËÄÉËôëÂÆâÊéíÈáçË¶Å‰ªªÂä°' : 'Morning time is relatively free, consider arranging important tasks'));
            }
            
            suggestionsElement.innerHTML = `
                <div class="space-y-2">
                    ${suggestions.map(suggestion => `
                        <div class="flex items-start">
                            <span class="text-sm text-gray-700">${suggestion}</span>
                        </div>
                    `).join('')}
                </div>
            `;
        }
        
        // Êõ¥Êñ∞Êô∫ËÉΩÂª∫ËÆÆ
        function updateSmartSuggestions() {
            const now = new Date();
            const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
            const todayEnd = new Date(today);
            todayEnd.setHours(23, 59, 59, 999);
            
            // ÂÆâÂÖ®Â§ÑÁêÜ‰ªªÂä°Êó∂Èó¥
            const getTaskHour = (task) => {
                try {
                    if (!task.startTime) return 12; // ÈªòËÆ§‰∏≠Âçà
                    const date = new Date(task.startTime);
                    if (isNaN(date.getTime())) return 12;
                    return date.getHours();
                } catch (e) {
                    return 12;
                }
            };
            
            const todayTasks = tasks.filter(task => {
                const taskDate = new Date(task.startTime);
                return taskDate >= today && taskDate <= todayEnd && !task.completed;
            });
            
            // ÂÆâÂÖ®Ëé∑ÂèñÁøªËØëÊñáÊú¨
            const getText = (key, fallback) => {
                try {
                    const texts = i18n.languages[i18n.currentLanguage];
                    return texts && texts[key] ? texts[key] : fallback;
                } catch (e) {
                    return fallback;
                }
            };
            
            const currentLang = i18n.currentLanguage || 'zh';
            let suggestion = "";
            let analysis = "";
            
            if (todayTasks.length === 0) {
                suggestion = currentLang === 'zh' ? "‰ªäÂ§©Ê≤°ÊúâÂÆâÊéí‰ªªÂä°Ôºå‰Ωï‰∏çËßÑÂàí‰∏Ä‰∏ãÊòéÂ§©ÁöÑÂ∑•‰ΩúÔºü" : "No tasks scheduled for today, why not plan tomorrow's work?";
                analysis = currentLang === 'zh' ? "‰Ω†ÁöÑÊó•Á®ãË°®‰ªäÂ§©ÊòØÁ©∫Èó≤ÁöÑÔºåÂèØ‰ª•Âà©Áî®ËøôÊÆµÊó∂Èó¥Â§ÑÁêÜ‰∏Ä‰∫õÁÅµÊ¥ªÁöÑ‰ªªÂä°Êàñ‰ºëÊÅØ„ÄÇ" : "Your schedule is free today, you can use this time to handle some flexible tasks or rest.";
            } else if (todayTasks.length > 5) {
                suggestion = currentLang === 'zh' ? "‰ªäÂ§©‰ªªÂä°ËæÉÂ§öÔºåÂª∫ËÆÆ‰ΩøÁî®Áï™ËåÑÂ∑•‰ΩúÊ≥ïÔºö25ÂàÜÈíü‰∏ìÊ≥®Â∑•‰ΩúÔºå5ÂàÜÈíü‰ºëÊÅØ„ÄÇ" : "Many tasks today, consider using Pomodoro technique: 25 minutes focused work, 5 minutes break.";
                analysis = currentLang === 'zh' ? `‰Ω†‰ªäÂ§©Êúâ${todayTasks.length}‰∏™‰ªªÂä°ÔºåÊï∞ÈáèËæÉÂ§öÔºåÂêàÁêÜÂÆâÊéí‰ºëÊÅØÊó∂Èó¥ÂèØ‰ª•‰øùÊåÅÈ´òÊïà„ÄÇ` : `You have ${todayTasks.length} tasks today, which is quite many. Proper rest scheduling can maintain efficiency.`;
            } else {
                const highPriorityTasks = todayTasks.filter(task => task.priority === 'high');
                
                if (highPriorityTasks.length > 0) {
                    suggestion = currentLang === 'zh' ? "ÂÖàÂ§ÑÁêÜÈ´ò‰ºòÂÖàÁ∫ß‰ªªÂä°ÔºåËøôÊ†∑ÂèØ‰ª•ÂáèËΩªÂêéÁª≠ÂéãÂäõ„ÄÇ" : "Handle high priority tasks first to reduce subsequent pressure.";
                    analysis = currentLang === 'zh' ? `‰Ω†‰ªäÂ§©Êúâ${highPriorityTasks.length}‰∏™È´ò‰ºòÂÖàÁ∫ß‰ªªÂä°ÔºåÂª∫ËÆÆ‰ºòÂÖàÂÆåÊàêÂÆÉ‰ª¨„ÄÇ` : `You have ${highPriorityTasks.length} high priority tasks today, suggest completing them first.`;
                } else {
                    suggestion = currentLang === 'zh' ? "ÂèØ‰ª•ÊåâÊó∂Èó¥È°∫Â∫èÂ§ÑÁêÜ‰ªäÂ§©ÁöÑ‰ªªÂä°Ôºå‰øùÊåÅËäÇÂ•èÁ®≥ÂÆö„ÄÇ" : "You can handle today's tasks in chronological order to maintain a stable rhythm.";
                    analysis = currentLang === 'zh' ? `‰Ω†‰ªäÂ§©Êúâ${todayTasks.length}‰∏™‰ªªÂä°Ôºå‰ºòÂÖàÁ∫ßÈÉΩ‰∏çÈ´òÔºåÂèØ‰ª•ÊåâËÆ°ÂàíÊúâÂ∫èÂÆåÊàê„ÄÇ` : `You have ${todayTasks.length} tasks today, all with low priority, you can complete them orderly as planned.`;
                }
            }
            
            const suggestionElement = document.querySelector('#smart-suggestion p');
            if (suggestionElement) {
                suggestionElement.textContent = suggestion;
            }
            
            const analysisElement = document.getElementById('task-analysis-text');
            if (analysisElement) {
                analysisElement.textContent = analysis;
            }
        }
        
        // ÊòæÁ§∫Â∑≤ÂÆåÊàê‰ªªÂä°ÂéÜÂè≤
        // Êõ¥Êñ∞Á≠õÈÄâÊåâÈíÆÊ†∑Âºè
        function updateFilterButtons(activeFilter) {
            // ÈáçÁΩÆÊâÄÊúâÊåâÈíÆÊ†∑Âºè
            const filterBtns = document.querySelectorAll('[id^="show-"][id$="-completed"]');
            filterBtns.forEach(btn => {
                btn.classList.remove('bg-primary', 'text-white');
                btn.classList.add('bg-gray-100', 'text-gray-700', 'hover:bg-gray-200');
            });
            
            // ÊøÄÊ¥ªÂΩìÂâçÁ≠õÈÄâÊåâÈíÆ
            const activeBtn = document.getElementById(`show-${activeFilter}-completed`);
            if (activeBtn) {
                activeBtn.classList.remove('bg-gray-100', 'text-gray-700', 'hover:bg-gray-200');
                activeBtn.classList.add('bg-primary', 'text-white');
            }
        }

        function showCompletedTasksHistory(filter = 'all') {
            // Êõ¥Êñ∞Á≠õÈÄâÊåâÈíÆÊ†∑Âºè
            updateFilterButtons(filter);
            
            const allTasks = [...tasks, ...Storage.get('todoList', [])];
            const completedTasks = allTasks.filter(task => task.completed && (task.completedTime || task.completedAt));
            
            // ÂÆâÂÖ®Ëé∑ÂèñÁøªËØëÊñáÊú¨
            const getText = (key, fallback) => {
                try {
                    const texts = i18n.languages[i18n.currentLanguage];
                    return texts && texts[key] ? texts[key] : fallback;
                } catch (e) {
                    return fallback;
                }
            };
            
            const texts = {
                noCompletedTasks: getText('noCompletedTasks', 'ÊöÇÊó†Â∑≤ÂÆåÊàê‰ªªÂä°'),
                today: getText('today', '‰ªäÂ§©'),
                yesterday: getText('yesterday', 'Êò®Â§©'),
                tasksCount: getText('tasksCount', 'È°π'),
                completedTime: getText('completedTime', 'ÂÆåÊàêÊó∂Èó¥')
            };
            
            if (completedTasks.length === 0) {
                document.getElementById('completed-tasks-history').innerHTML = `<p class="text-gray-500 text-center py-8">${texts.noCompletedTasks}</p>`;
                return;
            }
            
            const now = new Date();
            const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
            const yesterday = new Date(today);
            yesterday.setDate(yesterday.getDate() - 1);
            const weekStart = new Date(today);
            weekStart.setDate(weekStart.getDate() - 7);
            
            let filteredTasks = completedTasks;
            
            switch(filter) {
                case 'today':
                    filteredTasks = completedTasks.filter(task => {
                        const completedDate = new Date(task.completedTime || task.completedAt);
                        return completedDate >= today;
                    });
                    break;
                case 'yesterday':
                    filteredTasks = completedTasks.filter(task => {
                        const completedDate = new Date(task.completedTime || task.completedAt);
                        return completedDate >= yesterday && completedDate < today;
                    });
                    break;
                case 'week':
                    filteredTasks = completedTasks.filter(task => {
                        const completedDate = new Date(task.completedTime || task.completedAt);
                        return completedDate >= weekStart;
                    });
                    break;
            }
            
            // ÊåâÊó•ÊúüÂàÜÁªÑ
            const groupedTasks = {};
            filteredTasks.forEach(task => {
                const completedDate = new Date(task.completedTime || task.completedAt);
                const now = new Date();
                const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
                const yesterday = new Date(today);
                yesterday.setDate(yesterday.getDate() - 1);
                
                let dateKey;
                if (completedDate >= today) {
                    dateKey = texts.today;
                } else if (completedDate >= yesterday && completedDate < today) {
                    dateKey = texts.yesterday;
                } else {
                    // Ê†ºÂºèÂåñ‰∏∫ÊüêÊúàÊüêÊó•ÔºåÂ¶Ç"12Êúà25Êó•"
                    dateKey = completedDate.toLocaleDateString(i18n.currentLanguage === 'zh' ? 'zh-CN' : 'en-US', { 
                        month: 'long', 
                        day: 'numeric' 
                    });
                }
                
                if (!groupedTasks[dateKey]) {
                    groupedTasks[dateKey] = [];
                }
                groupedTasks[dateKey].push(task);
            });
            
            // ÊåâÊó•ÊúüÊéíÂ∫èÔºàÊúÄÊñ∞ÁöÑÂú®ÂâçÔºâÔºå‰ΩÜ‰øùÊåÅ"‰ªäÂ§©"„ÄÅ"Êò®Â§©"ÁöÑÈ°∫Â∫è
            const sortedDates = Object.keys(groupedTasks).sort((a, b) => {
                const order = [texts.today, texts.yesterday];
                const aIndex = order.indexOf(a);
                const bIndex = order.indexOf(b);
                
                if (aIndex !== -1 && bIndex !== -1) {
                    return aIndex - bIndex;
                } else if (aIndex !== -1) {
                    return -1;
                } else if (bIndex !== -1) {
                    return 1;
                } else {
                    // ÂØπ‰∫éÊó•ÊúüÊ†ºÂºèÔºåËΩ¨Êç¢‰∏∫DateÂØπË±°ËøõË°åÊØîËæÉ
                    const aDate = new Date(a + ' 2024'); // Ê∑ªÂä†Âπ¥‰ªΩ‰ª•‰æøÊ≠£Á°ÆËß£Êûê
                    const bDate = new Date(b + ' 2024');
                    return bDate - aDate;
                }
            });
            
            // ÁîüÊàêHTML
            let html = '';
            sortedDates.forEach(date => {
                const tasks = groupedTasks[date];
                html += `
                    <div class="border-l-4 border-green-400 pl-4 mb-4">
                        <h4 class="font-medium text-gray-800 mb-3 flex items-center">
                            <i class="fa fa-calendar text-green-500 mr-2"></i>
                            ${date}
                            <span class="ml-2 text-sm text-gray-500">(${tasks.length}${texts.tasksCount})</span>
                        </h4>
                        <div class="space-y-2">
                `;
                
                tasks.forEach(task => {
                    const completedTime = new Date(task.completedTime || task.completedAt).toLocaleTimeString(i18n.currentLanguage === 'zh' ? 'zh-CN' : 'en-US', { 
                        hour: '2-digit', 
                        minute: '2-digit' 
                    });
                    const priorityColors = {
                        high: 'text-red-600 bg-red-50',
                        medium: 'text-yellow-600 bg-yellow-50',
                        low: 'text-green-600 bg-green-50'
                    };
                    const priorityLabels = i18n.currentLanguage === 'zh' ? {
                        high: 'È´ò',
                        medium: '‰∏≠',
                        low: '‰Ωé'
                    } : {
                        high: 'High',
                        medium: 'Medium',
                        low: 'Low'
                    };
                    
                    html += `
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                            <div class="flex items-center space-x-3">
                                <i class="fa fa-check-circle text-green-500"></i>
                                <div>
                                    <p class="font-medium text-gray-800">${task.title}</p>
                                    <p class="text-sm text-gray-500">
                                        <i class="fa fa-clock-o mr-1"></i>${texts.completedTime}: ${completedTime}
                                    </p>
                                </div>
                            </div>
                            <span class="px-2 py-1 text-xs rounded-full ${priorityColors[task.priority] || priorityColors.medium}">
                                ${priorityLabels[task.priority] || priorityLabels.medium}
                            </span>
                        </div>
                    `;
                });
                
                html += `
                        </div>
                    </div>
                `;
            });
            
            document.getElementById('completed-tasks-history').innerHTML = html;
        }
        
        // Êõ¥Êñ∞ÂõæË°®
        function updateCharts() {
            const ctx = document.getElementById('completion-chart').getContext('2d');
            
            // ÂáÜÂ§áËøáÂéª7Â§©ÁöÑÊï∞ÊçÆ
            const labels = [];
            const completedData = [];
            const totalData = [];
            
            // Ê†πÊçÆÂΩìÂâçËØ≠Ë®ÄËÆæÁΩÆÊó•ÊúüÊ†ºÂºè
            const currentLang = i18n.currentLanguage;
            const locale = currentLang === 'en' ? 'en-US' : 'zh-CN';
            
            for (let i = 6; i >= 0; i--) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                
                labels.push(date.toLocaleDateString(locale, { month: 'short', day: 'numeric' }));
                
                // ËÆ°ÁÆóÂΩìÂ§©ÁöÑ‰ªªÂä°ÊÄªÊï∞ÂíåÂ∑≤ÂÆåÊàêÊï∞
                const dayStart = new Date(date.getFullYear(), date.getMonth(), date.getDate());
                const dayEnd = new Date(dayStart);
                dayEnd.setHours(23, 59, 59, 999);
                
                const dayTasks = tasks.filter(task => {
                    const taskDate = new Date(task.startTime);
                    return taskDate >= dayStart && taskDate <= dayEnd;
                });
                
                const completed = dayTasks.filter(task => task.completed).length;
                
                totalData.push(dayTasks.length);
                completedData.push(completed);
            }
            
            // ÈîÄÊØÅÁé∞ÊúâÂõæË°®
            if (completionChart) {
                completionChart.destroy();
            }
            
            // ÂàõÂª∫Êñ∞ÂõæË°®
            completionChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: i18n.texts[i18n.currentLanguage].completed || 'Â∑≤ÂÆåÊàê',
                            data: completedData,
                            backgroundColor: '#34C759',
                            borderRadius: 6
                        },
                        {
                            label: i18n.texts[i18n.currentLanguage].incomplete || 'Êú™ÂÆåÊàê',
                            data: totalData.map((total, i) => total - completedData[i]),
                            backgroundColor: '#E5E7EB',
                            borderRadius: 6
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                boxWidth: 12,
                                padding: 15
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                precision: 0
                            },
                            grid: {
                                display: false
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    },
                    barPercentage: 0.6
                }
            });
        }
        
        // Ê∑ªÂä†‰ªªÂä°
        function addTask(taskData) {
            // Á°Æ‰øù‰ΩøÁî®ÊúÄÊñ∞ÁöÑ‰ªªÂä°Êï∞ÊçÆ
            tasks = Storage.get('smartScheduleTasks', []);
            
            const newTaskStart = new Date(taskData.startTime);
            
            // Ê£ÄÊü•ÊòØÂê¶Âú®ÁπÅÂøôÊó∂Èó¥ÊÆµ
            if (isInBusyTimeSlot(newTaskStart)) {
                showNotification('Êó∂Èó¥ÂÜ≤Á™Å', '‰ªªÂä°ÂºÄÂßãÊó∂Èó¥Âú®ÁπÅÂøôÊó∂Èó¥ÊÆµÂÜÖÔºåËØ∑ÈÄâÊã©ÂÖ∂‰ªñÊó∂Èó¥', 'warning');
                return false;
            }
            
            // Ê£ÄÊü•Êó∂Èó¥ÂÜ≤Á™ÅÔºàÂü∫‰∫éÂºÄÂßãÊó∂Èó¥ÔºåÈó¥Èöî30ÂàÜÈíüÔºâ
            const conflictingTasks = tasks.filter(task => {
                if (task.completed) return false;
                
                const existingStart = new Date(task.startTime);
                const timeDiff = Math.abs(newTaskStart - existingStart);
                
                // Â¶ÇÊûú‰∏§‰∏™‰ªªÂä°ÂºÄÂßãÊó∂Èó¥Èó¥ÈöîÂ∞è‰∫é30ÂàÜÈíüÔºåËÆ§‰∏∫ÊúâÂÜ≤Á™Å
                return timeDiff < 30 * 60 * 1000;
            });
            
            if (conflictingTasks.length > 0) {
                // Ê£ÄÊü•ÊòØÂê¶ËÆæÁΩÆ‰∫ÜËá™Âä®ÂøΩÁï•ÂÜ≤Á™Å - ‰ªéÂ≠òÂÇ®‰∏≠Ëé∑ÂèñËÆæÁΩÆËÄå‰∏çÊòØDOMÂÖÉÁ¥†
                const autoIgnoreConflicts = Storage.get('autoIgnoreConflicts', false);
                
                if (autoIgnoreConflicts) {
                    // Ëá™Âä®ÂøΩÁï•ÂÜ≤Á™ÅÔºåÁõ¥Êé•Ê∑ªÂä†‰ªªÂä°
                    const newTask = {
                        id: generateId(),
                        title: taskData.title,
                        description: taskData.description || '',
                        startTime: taskData.startTime,
                        priority: taskData.priority || 'medium',
                        completed: false
                    };
                    
                    // Á°Æ‰øù‰ΩøÁî®Ê≠£Á°ÆÁöÑÂ≠òÂÇ®
                    const currentTasks = Storage.get('smartScheduleTasks', []);
                    currentTasks.push(newTask);
                    Storage.set('smartScheduleTasks', currentTasks);
                    tasks = currentTasks; // ÂêåÊ≠•ÂÖ®Â±ÄÂèòÈáè
                    
                    // ‰ΩøÁî®‰ºòÂåñÁöÑÊ∏≤ÊüìÔºàÈÅøÂÖçËß¶ÂèëÂø´ÈÄüÂæÖÂäûÂàóË°®Êõ¥Êñ∞Ôºâ
                    renderTasksWithoutQuickTodo();
                    
                    // ‰∏∫Êñ∞Ê∑ªÂä†ÁöÑ‰ªªÂä°Ê∑ªÂä†Âä®ÁîªÊïàÊûú
                    setTimeout(() => {
                        const newTaskElement = document.querySelector(`[data-id="${newTask.id}"]`);
                        if (newTaskElement) {
                            newTaskElement.classList.add('slide-in-right');
                        }
                    }, 50);
                    
                    debouncedUpdateTaskStats();
                    debouncedUpdateSmartSuggestions();
                    debouncedUpdateCharts();
                    debouncedUpdateQuickTodoList();
                    debouncedUpdateQuickTodoListTop();
                    
                    // Êõ¥Êñ∞Êô∫ËÉΩÂàÜÊûêÂíåÈºìÂä±‰ø°ÊÅØ
                    performIntelligentAnalysis();
                    generateEncouragement();
                    
                    showNotification('‰ªªÂä°Â∑≤Ê∑ªÂä†', `ÊàêÂäüÊ∑ªÂä†‰ªªÂä°: ${newTask.title}ÔºàÂ∑≤ÂøΩÁï•Êó∂Èó¥ÂÜ≤Á™ÅÔºâ`, 'success');
                    return true;
                } else {
                    // ÊúâÂÜ≤Á™ÅÔºåÊòæÁ§∫ÂÜ≤Á™ÅÊ®°ÊÄÅÊ°Ü
                    taskToAdd = taskData;
                    showConflictModal(conflictingTasks);
                    return false;
                }
            }
            
            // Êó†ÂÜ≤Á™ÅÔºåÁõ¥Êé•Ê∑ªÂä†
            const newTask = {
                id: generateId(),
                title: taskData.title,
                description: taskData.description || '',
                startTime: taskData.startTime,
                priority: taskData.priority || 'medium',
                completed: false
            };
            
            // Á°Æ‰øù‰ΩøÁî®Ê≠£Á°ÆÁöÑÂ≠òÂÇ®
            const currentTasks = Storage.get('smartScheduleTasks', []);
            currentTasks.push(newTask);
            Storage.set('smartScheduleTasks', currentTasks);
            tasks = currentTasks; // ÂêåÊ≠•ÂÖ®Â±ÄÂèòÈáè
            // ‰ΩøÁî®‰ºòÂåñÁöÑÊ∏≤ÊüìÔºàÈÅøÂÖçËß¶ÂèëÂø´ÈÄüÂæÖÂäûÂàóË°®Êõ¥Êñ∞Ôºâ
            renderTasksWithoutQuickTodo();
            
            // ‰∏∫Êñ∞Ê∑ªÂä†ÁöÑ‰ªªÂä°Ê∑ªÂä†Âä®ÁîªÊïàÊûú
            setTimeout(() => {
                const newTaskElement = document.querySelector(`[data-id="${newTask.id}"]`);
                if (newTaskElement) {
                    newTaskElement.classList.add('slide-in-right');
                }
            }, 50);
            
            debouncedUpdateTaskStats();
            debouncedUpdateSmartSuggestions();
            debouncedUpdateCharts();
            debouncedUpdateQuickTodoList();
            debouncedUpdateQuickTodoListTop();
            
            // Êõ¥Êñ∞Êô∫ËÉΩÂàÜÊûêÂíåÈºìÂä±‰ø°ÊÅØ
            performIntelligentAnalysis();
            generateEncouragement();
            
            // Ê∏ÖÁ©∫ËæìÂÖ•Ê°Ü
            clearTaskInputs();
            
            showNotification('‰ªªÂä°Â∑≤Ê∑ªÂä†', `ÊàêÂäüÊ∑ªÂä†‰ªªÂä°: ${newTask.title}`, 'success');
            return true;
        }
        
        // Ê∑ªÂä†‰ªªÂä°Ôºà‰∏çËøõË°åÂÜ≤Á™ÅÊ£ÄÊü•Ôºâ- ‰∏ìÈó®Áî®‰∫éÂøΩÁï•ÂÜ≤Á™ÅÁöÑÊÉÖÂÜµ
        function addTaskWithoutConflictCheck(taskData) {
            // Á°Æ‰øù‰ΩøÁî®ÊúÄÊñ∞ÁöÑ‰ªªÂä°Êï∞ÊçÆ
            tasks = Storage.get('smartScheduleTasks', []);
            
            // Áõ¥Êé•Ê∑ªÂä†‰ªªÂä°Ôºå‰∏çËøõË°å‰ªª‰ΩïÂÜ≤Á™ÅÊ£ÄÊü•
            const newTask = {
                id: generateId(),
                title: taskData.title,
                description: taskData.description || '',
                startTime: taskData.startTime,
                priority: taskData.priority || 'medium',
                completed: false
            };
            
            // Á°Æ‰øù‰ΩøÁî®Ê≠£Á°ÆÁöÑÂ≠òÂÇ®
            const currentTasks = Storage.get('smartScheduleTasks', []);
            currentTasks.push(newTask);
            Storage.set('smartScheduleTasks', currentTasks);
            tasks = currentTasks; // ÂêåÊ≠•ÂÖ®Â±ÄÂèòÈáè
            
            // ‰ΩøÁî®‰ºòÂåñÁöÑÊ∏≤ÊüìÔºàÈÅøÂÖçËß¶ÂèëÂø´ÈÄüÂæÖÂäûÂàóË°®Êõ¥Êñ∞Ôºâ
            renderTasksWithoutQuickTodo();
            
            // ‰∏∫Êñ∞Ê∑ªÂä†ÁöÑ‰ªªÂä°Ê∑ªÂä†Âä®ÁîªÊïàÊûú
            setTimeout(() => {
                const newTaskElement = document.querySelector(`[data-id="${newTask.id}"]`);
                if (newTaskElement) {
                    newTaskElement.classList.add('slide-in-right');
                }
            }, 50);
            
            debouncedUpdateTaskStats();
            debouncedUpdateSmartSuggestions();
            debouncedUpdateCharts();
            debouncedUpdateQuickTodoList();
            debouncedUpdateQuickTodoListTop();
            
            // Êõ¥Êñ∞Êô∫ËÉΩÂàÜÊûêÂíåÈºìÂä±‰ø°ÊÅØ
            performIntelligentAnalysis();
            generateEncouragement();
            
            // Ê∏ÖÁ©∫ËæìÂÖ•Ê°Ü
            clearTaskInputs();
            
            showNotification('‰ªªÂä°Â∑≤Ê∑ªÂä†', `ÊàêÂäüÊ∑ªÂä†‰ªªÂä°: ${newTask.title}ÔºàÂ∑≤ÂøΩÁï•Êó∂Èó¥ÂÜ≤Á™ÅÔºâ`, 'success');
            return true;
        }
        
        // Ê∏ÖÁ©∫‰ªªÂä°ËæìÂÖ•Ê°Ü
        function clearTaskInputs() {
            const taskInput1 = document.getElementById('task-input');
            const taskInput2 = document.getElementById('task-input-with-tasks');
            
            if (taskInput1) {
                taskInput1.value = '';
            }
            if (taskInput2) {
                taskInput2.value = '';
            }
        }
        
        // Ê∏ÖÁêÜËøáÊúüÁöÑÂ∑≤ÂÆåÊàê‰ªªÂä°ÔºàÁ¨¨‰∫åÂ§©Ëá™Âä®Ê∂àÂ§±Ôºâ
        function cleanExpiredCompletedTasks() {
            const now = new Date();
            const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
            const yesterday = new Date(today);
            yesterday.setDate(yesterday.getDate() - 1);
            
            let hasChanges = false;
            
            // Ê∏ÖÁêÜtasksÊï∞ÁªÑ‰∏≠ÁöÑÂ∑≤ÂÆåÊàê‰ªªÂä°
            const originalTasksLength = tasks.length;
            tasks = tasks.filter(task => {
                if (task.completed && task.completedTime) {
                    const completedDate = new Date(task.completedTime);
                    // Â¶ÇÊûúÂÆåÊàêÊó∂Èó¥ÊòØÊò®Â§©ÊàñÊõ¥Êó©ÔºåÂàôÁßªÈô§ËØ•‰ªªÂä°
                    if (completedDate < yesterday) {
                        return false;
                    }
                }
                return true;
            });
            
            if (tasks.length !== originalTasksLength) {
                hasChanges = true;
                saveTasks();
            }
            
            // Ê∏ÖÁêÜtodoList‰∏≠ÁöÑÂ∑≤ÂÆåÊàê‰ªªÂä°
            const todoList = Storage.get('todoList', []);
            const originalTodoListLength = todoList.length;
            const updatedTodoList = todoList.filter(task => {
                if (task.completed && task.completedTime) {
                    const completedDate = new Date(task.completedTime);
                    // Â¶ÇÊûúÂÆåÊàêÊó∂Èó¥ÊòØÊò®Â§©ÊàñÊõ¥Êó©ÔºåÂàôÁßªÈô§ËØ•‰ªªÂä°
                    if (completedDate < yesterday) {
                        return false;
                    }
                }
                return true;
            });
            
            if (updatedTodoList.length !== originalTodoListLength) {
                hasChanges = true;
                Storage.set('todoList', updatedTodoList);
            }
            
            if (hasChanges) {
                // ‰ΩøÁî®Èò≤Êäñ‰ºòÂåñÊ∏≤Êüì
                debouncedRenderTasks();
                renderTodoList();
                debouncedUpdateTaskStats();
                debouncedUpdateQuickTodoListTop();
            }
        }
        
        // ÂàáÊç¢‰ªªÂä°ÂÆåÊàêÁä∂ÊÄÅ
        function toggleTaskComplete(taskId) {
            // Á°Æ‰øù‰ΩøÁî®ÊúÄÊñ∞ÁöÑ‰ªªÂä°Êï∞ÊçÆ
            tasks = Storage.get('smartScheduleTasks', []);
            
            // ÂÖàÂú®tasksÊï∞ÁªÑ‰∏≠Êü•Êâæ
            let task = tasks.find(t => t.id === taskId);
            let isFromTasks = !!task;
            
            // Â¶ÇÊûúÂú®tasks‰∏≠Ê≤°ÊâæÂà∞ÔºåÂú®ÂæÖÂäûÊ∏ÖÂçï‰∏≠Êü•Êâæ
            if (!task) {
                let todoList = Storage.get('todoList', []);
                task = todoList.find(t => t.id === taskId);
                isFromTasks = false;
                
                if (task) {
                    // Áõ¥Êé•Âú®ÂæÖÂäû‰∫ãÈ°π‰∏≠Â§ÑÁêÜÂÆåÊàêÁä∂ÊÄÅ
                    const wasCompleted = task.completed;
                    task.completed = !task.completed;
                    
                    if (task.completed) {
                        task.completedTime = new Date().toISOString();
                        showTaskCompletionAnimation();
                        onTaskComplete();
                        showNotification('Â∑≤ÂÆåÊàê', task.title, 'success');
                    } else {
                        delete task.completedTime;
                    }
                    Storage.set('todoList', todoList);
                    renderTodoList();
                    debouncedUpdateQuickTodoListTop();
                    return;
                }
            }
            
            // Âú®tasksÊï∞ÁªÑ‰∏≠Â§ÑÁêÜÊôÆÈÄö‰ªªÂä°
            if (task && isFromTasks) {
                const wasCompleted = task.completed;
                
                if (wasCompleted) {
                    // ‰ªªÂä°Â∑≤ÂÆåÊàêÔºåÂÜçÊ¨°ÁÇπÂáªÊó∂ÂºπÂá∫Á°ÆËÆ§ÊòØÂê¶ÊÅ¢Â§çÁöÑÂØπËØùÊ°Ü
                    const taskTitle = task.title; // ‰øùÂ≠ò‰ªªÂä°Ê†áÈ¢ò
                    CustomDialog.confirm({
                        title: 'ÊÅ¢Â§ç‰ªªÂä°',
                        message: `‰ªªÂä°"${taskTitle}"Â∑≤ÂÆåÊàêÔºåÁ°ÆÂÆöË¶ÅÊÅ¢Â§ç‰∏∫Êú™ÂÆåÊàêÁä∂ÊÄÅÂêóÔºü`
                    }).then((confirmed) => {
                        if (confirmed) {
                            // ÈáçÊñ∞Ëé∑Âèñ‰ªªÂä°ÂØπË±°‰ª•Á°Æ‰øùÂºïÁî®Ê≠£Á°Æ
                            const currentTask = tasks.find(t => t.id === taskId);
                            if (currentTask) {
                                // Á°ÆËÆ§ÊÅ¢Â§ç
                    currentTask.completed = false;
                    delete currentTask.completedTime;
                    showNotification('Â∑≤ÊÅ¢Â§ç', `‰ªªÂä°"${currentTask.title}"Â∑≤ÊÅ¢Â§ç‰∏∫Êú™ÂÆåÊàêÁä∂ÊÄÅ`, 'info');
                    
                    saveTasks();
                    // ‰ΩøÁî®‰ºòÂåñÁöÑÊ∏≤ÊüìÔºàÈÅøÂÖçËß¶ÂèëÂø´ÈÄüÂæÖÂäûÂàóË°®Êõ¥Êñ∞Ôºâ
                    renderTasksWithoutQuickTodo();
                    debouncedUpdateTaskStats();
                    debouncedUpdateSmartSuggestions();
                    debouncedUpdateCharts();
                    debouncedUpdateQuickTodoList();
                    debouncedUpdateQuickTodoListTop();
                            }
                        }
                    });
                } else {
                    // ‰ªªÂä°Êú™ÂÆåÊàêÔºåÁõ¥Êé•Ê†áËÆ∞‰∏∫ÂÆåÊàê
                    task.completed = true;
                    task.completedTime = new Date().toISOString();
                    showTaskCompletionAnimation();
                    onTaskComplete();
                    showNotification('‰ªªÂä°Â∑≤ÂÆåÊàê', `${task.title}Â∑≤Ê†áËÆ∞‰∏∫ÂÆåÊàê`, 'success');
                    
                    saveTasks();
                    // ‰ΩøÁî®‰ºòÂåñÁöÑÊ∏≤ÊüìÔºàÈÅøÂÖçËß¶ÂèëÂø´ÈÄüÂæÖÂäûÂàóË°®Êõ¥Êñ∞Ôºâ
                    renderTasksWithoutQuickTodo();
                    debouncedUpdateTaskStats();
                    debouncedUpdateSmartSuggestions();
                    debouncedUpdateCharts();
                    debouncedUpdateQuickTodoList();
                    debouncedUpdateQuickTodoListTop();
                }
            }
        }

        // ÊòæÁ§∫‰ªªÂä°ÂÆåÊàêÂä®Áîª
        function showTaskCompletionAnimation() {
            // ÂàõÂª∫ÁÆÄÊ¥ÅÁöÑÂä®ÁîªÂÆπÂô®
            const celebration = document.createElement('div');
            celebration.className = 'fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-[9999] pointer-events-none';
            celebration.style.cssText = `
                animation: simpleFadeIn 0.3s ease-out;
            `;
            
            // ÂàõÂª∫ÂúÜÂΩ¢ÊâìÂãæÂä®Áîª - Êõ¥ÁÅµÂä®ÁöÑÁâàÊú¨
            celebration.innerHTML = `
                <div class="w-16 h-16 rounded-full border-4 border-green-500 flex items-center justify-center" style="animation: circleScale 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);">
                    <div class="text-3xl text-green-500" style="animation: checkmarkDraw 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55) 0.1s both;">
                        ‚úì
                    </div>
                </div>
                <div class="absolute inset-0 flex items-center justify-center pointer-events-none">
                    <div class="w-20 h-20 rounded-full border-2 border-green-400 opacity-60" style="animation: rippleExpand 0.8s ease-out 0.2s both;"></div>
                </div>
            `;
            
            // Ê∑ªÂä†ÁÆÄÊ¥ÅÁöÑÂä®ÁîªÊ†∑Âºè
            const style = document.createElement('style');
            style.textContent = `
                @keyframes simpleFadeIn {
                    from {
                        opacity: 0;
                        transform: translate(-50%, -50%) scale(0.8);
                    }
                    to {
                        opacity: 1;
                        transform: translate(-50%, -50%) scale(1);
                    }
                }
                
                @keyframes circleScale {
                    from {
                        transform: scale(0);
                        opacity: 0;
                    }
                    to {
                        transform: scale(1);
                        opacity: 1;
                    }
                }
                
                @keyframes rippleExpand {
                    0% {
                        transform: scale(0.5);
                        opacity: 0.8;
                    }
                    100% {
                        transform: scale(2);
                        opacity: 0;
                    }
                }
                
                @keyframes checkmarkDraw {
                    from {
                        opacity: 0;
                        transform: scale(0.5) rotate(-45deg);
                    }
                    to {
                        opacity: 1;
                        transform: scale(1) rotate(0deg);
                    }
                }
            `;
            
            // Â∞ÜÊ†∑ÂºèÊ∑ªÂä†Âà∞head‰∏≠ÔºàÂè™Ê∑ªÂä†‰∏ÄÊ¨°Ôºâ
            if (!document.getElementById('simple-completion-styles')) {
                style.id = 'simple-completion-styles';
                document.head.appendChild(style);
            }
            
            document.body.appendChild(celebration);
            
            // Êí≠ÊîæÂÆåÊàêÈü≥Êïà
            playCompletionSound();
            
            // 1ÁßíÂêéÊ∑°Âá∫
            setTimeout(() => {
                celebration.style.transition = 'opacity 0.2s ease-out';
                celebration.style.opacity = '0';
                
                setTimeout(() => {
                    celebration.remove();
                }, 200);
            }, 1000);
        }
        
        // Êí≠Êîæ‰ªªÂä°ÂÆåÊàêÈü≥Êïà
        function playCompletionSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext());
                
                // ÂàõÂª∫‰∏ÄÊ¨°‰∏ùÊªëÁöÑÊâìÂãæÈü≥Êïà
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                // ‰ΩøÁî®Ê∏ÖËÑÜÁöÑÊ≠£Âº¶Ê≥¢ÔºåÈ¢ëÁéá‰ªé‰ΩéÂà∞È´òÊ®°ÊãüÊâìÂãæÁöÑ‰∏äÂçáÊÑü
                oscillator.frequency.setValueAtTime(600, audioContext.currentTime);
                oscillator.frequency.exponentialRampToValueAtTime(1200, audioContext.currentTime + 0.1);
                
                oscillator.type = 'sine';
                
                // Èü≥ÈáèÂåÖÁªúÔºöÂø´ÈÄü‰∏äÂçáÔºåÂπ≥Êªë‰∏ãÈôç
                gainNode.gain.setValueAtTime(0, audioContext.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.3, audioContext.currentTime + 0.02);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.15);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.15);
                
            } catch (error) {
                // ÈùôÈªòÂ§ÑÁêÜÈü≥È¢ëÊí≠ÊîæÂ§±Ë¥•
            }
        }
        
        // Áå´Âí™Â£∞Èü≥ÊïàÊûú
        function playCatSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                // ÂàõÂª∫Áå´Âí™Âè´Â£∞ÁöÑÈ¢ëÁéáÂèòÂåñ
                oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
                oscillator.frequency.exponentialRampToValueAtTime(600, audioContext.currentTime + 0.1);
                oscillator.frequency.exponentialRampToValueAtTime(900, audioContext.currentTime + 0.2);
                
                oscillator.type = 'sine';
                
                gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.3);
            } catch (error) {
                // ÈùôÈªòÂ§ÑÁêÜÈü≥È¢ëÊí≠ÊîæÂ§±Ë¥•
            }
        }
        
        // Áå´Âí™Âä©ÊâãÂäüËÉΩ
        let catHappiness = 80;
        let catMood = 'ÂºÄÂøÉ';
        let catAssistantVisible = true; // Áå´Âí™Âä©ÊâãÊòæÁ§∫Áä∂ÊÄÅ
        let catAssistantInitialized = false; // Áå´Âí™Âä©ÊâãÂàùÂßãÂåñÁä∂ÊÄÅ
        let catMoodEmojis = {
            'ÂºÄÂøÉ': 'üê±',
            'ÂÖ¥Â•ã': 'üò∫',
            'Êª°Ë∂≥': 'üò∏',
            'Âõ∞ÂÄ¶': 'üò¥',
            'È••È•ø': 'üôÄ',
            'Ë∞ÉÁöÆ': 'üòº'
        };
        
        // ÂàáÊç¢Áå´Âí™Âä©ÊâãÊòæÁ§∫/ÈöêËóè
        // Êñ∞ÊâãÊïôÁ®ãÂäüËÉΩ
        // Ê≥®ÊÑèÔºöcurrentTutorialStep Âíå totalTutorialSteps Â∑≤Âú®Êñá‰ª∂ÂºÄÂ§¥ÂÆö‰πâ

        // Âú®ÊïôÁ®ã‰∏≠ÂàáÊç¢ËØ≠Ë®Ä
        function switchLanguageInTutorial(lang) {
            if (i18n.switchLanguage(lang)) {
                // Êõ¥Êñ∞ËØ≠Ë®ÄÊåâÈíÆÊ†∑Âºè
                updateLanguageButtons(lang);
                
                // ÊòæÁ§∫ÂàáÊç¢ÊàêÂäüÊèêÁ§∫
                const texts = i18n.texts[lang];
                const successMsg = lang === 'zh' ? 'ËØ≠Ë®ÄÂ∑≤ÂàáÊç¢‰∏∫‰∏≠Êñá' : 'Language switched to English';
                showNotification(texts.success || 'Success', successMsg, 'success');
                
                // ÈáçÊñ∞Â∫îÁî®ËØ≠Ë®ÄÂà∞ÊïôÁ®ãÂÜÖÂÆπ
                setTimeout(() => {
                    i18n.applyLanguage();
                    // Êõ¥Êñ∞ÊïôÁ®ãÊ≠•È™§ÂÜÖÂÆπ
                    updateTutorialStepContent();
                    // Êõ¥Êñ∞Êó•ÊúüÊòæÁ§∫
                    setCurrentDate();
                    // Êõ¥Êñ∞ÂõæË°®
                    updateCharts();
                    // Êõ¥Êñ∞‰ªªÂä°ÁªüËÆ°
                    updateTaskStats();
                }, 100);
            }
        }
        
        // ËÆæÁΩÆÈù¢ÊùøËØ≠Ë®ÄÂàáÊç¢ÂáΩÊï∞
        function switchLanguageInSettings(lang) {
            if (i18n.switchLanguage(lang)) {
                // Êõ¥Êñ∞ËÆæÁΩÆÈù¢ÊùøËØ≠Ë®ÄÊåâÈíÆÊ†∑Âºè
                updateSettingsLanguageButtons(lang);
                
                // ÊòæÁ§∫ÂàáÊç¢ÊàêÂäüÊèêÁ§∫
                showNotification(i18n.t('languageSaved'), i18n.t('languageSaved'), 'success');
                
                // ÈáçÊñ∞Â∫îÁî®ËØ≠Ë®ÄÂà∞Êï¥‰∏™È°µÈù¢
                setTimeout(() => {
                    i18n.applyLanguage();
                    // Êõ¥Êñ∞Êó•ÊúüÊòæÁ§∫
                    setCurrentDate();
                    // Êõ¥Êñ∞ÂõæË°®
                    updateCharts();
                    // Êõ¥Êñ∞‰ªªÂä°ÁªüËÆ°
                    updateTaskStats();
                }, 100);
            }
        }
        
        // Êõ¥Êñ∞ËÆæÁΩÆÈù¢ÊùøËØ≠Ë®ÄÊåâÈíÆÊ†∑Âºè
        function updateSettingsLanguageButtons(currentLang) {
            const zhBtn = document.getElementById('lang-zh-btn');
            const enBtn = document.getElementById('lang-en-btn');
            
            if (zhBtn && enBtn) {
                if (currentLang === 'zh') {
                    zhBtn.classList.remove('bg-gray-100', 'text-gray-700', 'hover:bg-gray-200');
                    zhBtn.classList.add('bg-indigo-100', 'text-indigo-700', 'hover:bg-indigo-200');
                    enBtn.classList.remove('bg-indigo-100', 'text-indigo-700', 'hover:bg-indigo-200');
                    enBtn.classList.add('bg-gray-100', 'text-gray-700', 'hover:bg-gray-200');
                } else {
                    enBtn.classList.remove('bg-gray-100', 'text-gray-700', 'hover:bg-gray-200');
                    enBtn.classList.add('bg-indigo-100', 'text-indigo-700', 'hover:bg-indigo-200');
                    zhBtn.classList.remove('bg-indigo-100', 'text-indigo-700', 'hover:bg-indigo-200');
                    zhBtn.classList.add('bg-gray-100', 'text-gray-700', 'hover:bg-gray-200');
                }
            }
        }
        
        // Êõ¥Êñ∞ËØ≠Ë®ÄÊåâÈíÆÊ†∑Âºè
        function updateLanguageButtons(currentLang) {
            // Êõ¥Êñ∞ÊïôÁ®ã‰∏≠ÁöÑËØ≠Ë®ÄÊåâÈíÆ
            const zhTutorialBtn = document.getElementById('lang-zh-tutorial-btn');
            const enTutorialBtn = document.getElementById('lang-en-tutorial-btn');
            
            if (zhTutorialBtn && enTutorialBtn) {
                if (currentLang === 'zh') {
                    zhTutorialBtn.classList.remove('border-gray-300', 'bg-white', 'hover:border-blue-300');
                    zhTutorialBtn.classList.add('border-blue-500', 'bg-blue-50', 'shadow-md');
                    enTutorialBtn.classList.remove('border-blue-500', 'bg-blue-50', 'shadow-md');
                    enTutorialBtn.classList.add('border-gray-300', 'bg-white', 'hover:border-blue-300');
                } else {
                    enTutorialBtn.classList.remove('border-gray-300', 'bg-white', 'hover:border-blue-300');
                    enTutorialBtn.classList.add('border-blue-500', 'bg-blue-50', 'shadow-md');
                    zhTutorialBtn.classList.remove('border-blue-500', 'bg-blue-50', 'shadow-md');
                    zhTutorialBtn.classList.add('border-gray-300', 'bg-white', 'hover:border-blue-300');
                }
            }
        }

        // ÂàùÂßãÂåñÊñ∞ÊâãÊïôÁ®ã
        function initTutorial() {
            const tutorialModal = document.getElementById('tutorial-modal');
            const tutorialContent = document.getElementById('tutorial-content');
            
            // Ê£ÄÊü•ÊòØÂê¶ÊòØÈ¶ñÊ¨°ËÆøÈóÆ
            const hasVisitedBefore = localStorage.getItem('speedlist-tutorial-completed');
            
            // Â¶ÇÊûúÊòØÈ¶ñÊ¨°ËÆøÈóÆÔºåÊòæÁ§∫ÊïôÁ®ã
            if (!hasVisitedBefore) {
                setTimeout(() => {
                    showTutorial();
                }, 1000);
            }
            
            // ÁªëÂÆöÊïôÁ®ãÊéßÂà∂‰∫ã‰ª∂
            document.getElementById('tutorial-close').addEventListener('click', hideTutorial);
            document.getElementById('tutorial-skip').addEventListener('click', hideTutorial);
            document.getElementById('tutorial-prev').addEventListener('click', prevTutorialStep);
            document.getElementById('tutorial-next').addEventListener('click', nextTutorialStep);
            document.getElementById('tutorial-finish').addEventListener('click', finishTutorial);
            
            // ÁªëÂÆöÊïôÁ®ãÊåâÈíÆ‰∫ã‰ª∂
            document.getElementById('tutorial-btn').addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                showTutorial();
            });
        }

        // ÊòæÁ§∫Êñ∞ÊâãÊïôÁ®ã
        function showTutorial() {
            const tutorialModal = document.getElementById('tutorial-modal');
            const tutorialContent = document.getElementById('tutorial-content');
            
            if (!tutorialModal || !tutorialContent) {
                return;
            }
            
            // Èò≤Ê≠¢ÈáçÂ§çÊòæÁ§∫
            if (!tutorialModal.classList.contains('hidden')) {
                return;
            }
            
            currentTutorialStep = 0; // ÈáçÁΩÆÂà∞Á¨¨‰∏ÄÊ≠•
            tutorialModal.classList.remove('hidden');
            
            // Á°Æ‰øùÊ®°ÊÄÅÊ°ÜÂú®È°∂Â±Ç
            tutorialModal.style.zIndex = '70';
            
            // Ëß¶ÂèëÂä®Áîª
            setTimeout(() => {
                tutorialContent.classList.remove('scale-95', 'opacity-0');
                tutorialContent.classList.add('scale-100', 'opacity-100');
            }, 50);
            
            // ÂàùÂßãÂåñËØ≠Ë®ÄÊåâÈíÆÁä∂ÊÄÅ
            updateLanguageButtons(i18n.getCurrentLanguage());
            
            // Â∫îÁî®ÂΩìÂâçËØ≠Ë®ÄÂà∞ÊïôÁ®ãÂÜÖÂÆπ
            i18n.applyLanguage();
            
            updateTutorialStep();
        }

        // ÈöêËóèÊñ∞ÊâãÊïôÁ®ã
        function hideTutorial() {
            const tutorialModal = document.getElementById('tutorial-modal');
            const tutorialContent = document.getElementById('tutorial-content');
            
            if (!tutorialModal || !tutorialContent) {
                return;
            }
            
            tutorialContent.classList.remove('scale-100', 'opacity-100');
            tutorialContent.classList.add('scale-95', 'opacity-0');
            
            setTimeout(() => {
                tutorialModal.classList.add('hidden');
            }, 300);
            
            // Ê†áËÆ∞ÊïôÁ®ãÂ∑≤ÂÆåÊàê
            localStorage.setItem('speedlist-tutorial-completed', 'true');
        }

        // Êõ¥Êñ∞ÊïôÁ®ãÊ≠•È™§
        function updateTutorialStep() {
            // ÈöêËóèÊâÄÊúâÊ≠•È™§
            document.querySelectorAll('.tutorial-step').forEach(step => {
                step.classList.add('hidden');
            });
            
            // ÊòæÁ§∫ÂΩìÂâçÊ≠•È™§
            const currentStepElement = document.getElementById(`tutorial-step-${currentTutorialStep}`);
            if (currentStepElement) {
                currentStepElement.classList.remove('hidden');
            } else {
                return;
            }
            
            // Êõ¥Êñ∞ËøõÂ∫¶ÊåáÁ§∫Âô®
            document.querySelectorAll('[data-step]').forEach((indicator, index) => {
                if (index === currentTutorialStep) {
                    indicator.classList.remove('bg-gray-300');
                    indicator.classList.add('bg-primary');
                } else {
                    indicator.classList.remove('bg-primary');
                    indicator.classList.add('bg-gray-300');
                }
            });
            
            // Êõ¥Êñ∞ÂØºËà™ÊåâÈíÆÁä∂ÊÄÅ
            const prevBtn = document.getElementById('tutorial-prev');
            const nextBtn = document.getElementById('tutorial-next');
            const finishBtn = document.getElementById('tutorial-finish');
            
            if (prevBtn) {
                prevBtn.disabled = currentTutorialStep === 0;
                prevBtn.classList.toggle('opacity-50', currentTutorialStep === 0);
                prevBtn.classList.toggle('cursor-not-allowed', currentTutorialStep === 0);
            }
            
            if (nextBtn && finishBtn) {
                if (currentTutorialStep === totalTutorialSteps - 1) {
                    nextBtn.classList.add('hidden');
                    finishBtn.classList.remove('hidden');
                } else {
                    nextBtn.classList.remove('hidden');
                    finishBtn.classList.add('hidden');
                }
            }
        }
        
        // Êõ¥Êñ∞ÊïôÁ®ãÊ≠•È™§ÂÜÖÂÆπÔºàÁî®‰∫éËØ≠Ë®ÄÂàáÊç¢Ôºâ
        function updateTutorialStepContent() {
            const texts = i18n.texts[i18n.currentLanguage];
            
            // Êõ¥Êñ∞ÊïôÁ®ãÊ†áÈ¢ò
            const tutorialTitle = document.querySelector('#tutorial-modal h3');
            if (tutorialTitle) {
                tutorialTitle.textContent = texts.tutorialTitle || 'Êñ∞ÊâãÊïôÁ®ã';
            }
            
            // Êõ¥Êñ∞ÊïôÁ®ãÊåâÈíÆtitleÂ±ûÊÄßÔºà‰∏çÊîπÂèòÂõæÊ†áÔºâ
            const tutorialBtn = document.getElementById('tutorial-btn');
            if (tutorialBtn) {
                tutorialBtn.title = texts.tutorial || 'Êñ∞ÊâãÊïôÁ®ã';
                tutorialBtn.setAttribute('data-i18n-title', 'nav.tutorial');
            }
            
            // Êõ¥Êñ∞ÂØºËà™ÊåâÈíÆÊñáÊú¨
            const prevBtn = document.getElementById('tutorial-prev');
            const nextBtn = document.getElementById('tutorial-next');
            const finishBtn = document.getElementById('tutorial-finish');
            const skipBtn = document.getElementById('tutorial-skip');
            const closeBtn = document.getElementById('tutorial-close');
            
            if (prevBtn) prevBtn.textContent = texts.previous || '‰∏ä‰∏ÄÊ≠•';
            if (nextBtn) nextBtn.textContent = texts.next || '‰∏ã‰∏ÄÊ≠•';
            if (finishBtn) finishBtn.textContent = texts.finish || 'ÂÆåÊàê';
            if (skipBtn) skipBtn.textContent = texts.skip || 'Ë∑≥Ëøá';
            if (closeBtn) closeBtn.textContent = texts.close || 'ÂÖ≥Èó≠';
            
            // Êõ¥Êñ∞ÊïôÁ®ãÊ≠•È™§ÂÜÖÂÆπ
            const stepContents = [
                {
                    title: texts.tutorialStep1 || 'ÊûÅÈÄüÊ∑ªÂä†',
                    subtitle: texts.tutorialStep1Desc || 'Êô∫ËÉΩËØÜÂà´Êó∂Èó¥Ôºå‰∏ÄÈîÆÂàõÂª∫‰ªªÂä°',
                    features: [
                        texts.tutorialSmartTime || 'Êô∫ËÉΩÊó∂Èó¥ËØÜÂà´',
                        texts.tutorialQuickAdd || 'ÊûÅÈÄü‰ªªÂä°ÁÆ°ÁêÜ',
                        texts.tutorialAutoSave || 'Ëá™Âä®‰øùÂ≠ò'
                    ]
                },
                {
                    title: texts.tutorialStep2 || 'Êô∫ËÉΩÂàÜÊûê',
                    subtitle: texts.tutorialStep2Desc || 'ÂÆûÊó∂ÁªüËÆ°Ôºå‰∫ÜËß£‰Ω†ÁöÑÊïàÁéá',
                    features: [
                        texts.tutorialRealTimeStats || 'ÂÆûÊó∂ÁªüËÆ°',
                        texts.tutorialEfficiencyAnalysis || 'ÊïàÁéáÂàÜÊûê',
                        texts.tutorialSmartSuggestions || 'Êô∫ËÉΩÂª∫ËÆÆ'
                    ]
                },
                {
                    title: texts.tutorialStep3 || '‰∏™ÊÄßÂåñËÆæÁΩÆ',
                    subtitle: texts.tutorialStep3Desc || 'ÂÆöÂà∂‰Ω†ÁöÑ‰∏ìÂ±û‰ΩìÈ™å',
                    features: [
                        texts.tutorialCustomSettings || 'Ëá™ÂÆö‰πâËÆæÁΩÆ',
                        texts.tutorialWorkHours || 'Â∑•‰ΩúÊó∂Èó¥',
                        texts.tutorialKeywords || 'ÂÖ≥ÈîÆËØç'
                    ]
                }
            ];
            
            // Êõ¥Êñ∞ÊØè‰∏™Ê≠•È™§ÁöÑÂÜÖÂÆπ
            stepContents.forEach((content, index) => {
                const stepElement = document.getElementById(`tutorial-step-${index}`);
                if (stepElement) {
                    const titleElement = stepElement.querySelector('h4');
                    const subtitleElement = stepElement.querySelector('p');
                    const featureElements = stepElement.querySelectorAll('li');
                    
                    if (titleElement) titleElement.textContent = content.title;
                    if (subtitleElement) subtitleElement.textContent = content.subtitle;
                    
                    featureElements.forEach((featureElement, featureIndex) => {
                        if (content.features[featureIndex]) {
                            featureElement.textContent = content.features[featureIndex];
                        }
                    });
                }
            });
        }

        // ‰∏ä‰∏ÄÊ≠•
        function prevTutorialStep() {
            if (currentTutorialStep > 0) {
                currentTutorialStep--;
                updateTutorialStep();
            }
        }

        // ‰∏ã‰∏ÄÊ≠•
        function nextTutorialStep() {
            if (currentTutorialStep < totalTutorialSteps - 1) {
                currentTutorialStep++;
                updateTutorialStep();
            }
        }

        // ÂÆåÊàêÊïôÁ®ã
        function finishTutorial() {
            hideTutorial();
            showNotification('ÊïôÁ®ãÂÆåÊàê', 'Ê¨¢ËøéÂºÄÂßã‰ΩøÁî®ÈÄüÂ∫¶Ê∏ÖÂçïÔºÅÁ•ùÊÇ®Â∑•‰ΩúÈ´òÊïàÔºåÁîüÊ¥ªÊÑâÂø´ÔºÅüöÄ', 'success');
        }

        // ‰∏ªËèúÂçïÂ±ïÂºÄ/Êî∂Áº©ÂäüËÉΩ
        function toggleMainMenu() {
            const menuContent = document.getElementById('main-menu-content');
            const chevron = document.getElementById('main-menu-chevron');
            
            if (menuContent.classList.contains('hidden')) {
                // Â±ïÂºÄËèúÂçï
                menuContent.classList.remove('hidden');
                chevron.style.transform = 'rotate(180deg)';
                
                // Ê∑ªÂä†Â±ïÂºÄÂä®Áîª
                menuContent.style.maxHeight = '0px';
                menuContent.style.opacity = '0';
                menuContent.style.transition = 'all 0.3s ease-out';
                
                setTimeout(() => {
                    menuContent.style.maxHeight = menuContent.scrollHeight + 'px';
                    menuContent.style.opacity = '1';
                }, 10);
                
                // Êõ¥Êñ∞Âø´Êç∑ÁªüËÆ°Êï∞Â≠ó
                updateMenuStats();
            } else {
                // Êî∂Áº©ËèúÂçï
                menuContent.style.maxHeight = '0px';
                menuContent.style.opacity = '0';
                chevron.style.transform = 'rotate(0deg)';
                
                setTimeout(() => {
                    menuContent.classList.add('hidden');
                    menuContent.style.maxHeight = '';
                    menuContent.style.opacity = '';
                }, 300);
            }
        }
        
        // Êõ¥Êñ∞ËèúÂçï‰∏≠ÁöÑÂø´Êç∑ÁªüËÆ°Êï∞Â≠ó
        function updateMenuStats() {
            const completedCount = document.getElementById('menu-completed-count');
            const remainingCount = document.getElementById('menu-remaining-count');
            
            if (completedCount && remainingCount) {
                const completed = taskManager.tasks.filter(task => task.completed).length;
                const remaining = taskManager.tasks.filter(task => !task.completed).length;
                
                completedCount.textContent = completed;
                remainingCount.textContent = remaining;
            }
        }
        
        // ÁÇπÂáªÂ§ñÈÉ®Âå∫ÂüüÊî∂Ëµ∑ËèúÂçï
        document.addEventListener('click', function(event) {
            const menuContainer = document.querySelector('.mb-6 > .glass-card');
            const menuContent = document.getElementById('main-menu-content');
            
            if (menuContainer && !menuContainer.contains(event.target) && !menuContent.classList.contains('hidden')) {
                toggleMainMenu();
            }
        });
        
        // ÂàáÊç¢Áå´Âí™Âä©ÊâãÈù¢ÊùøÊòæÁ§∫/ÈöêËóè
        function toggleCatAssistant() {
            const catPanel = document.getElementById('catAssistantPanel');
            const catToggleBtn = document.getElementById('catToggleBtn');
            
            if (!catPanel || !catToggleBtn) {
                return;
            }
            
            catAssistantVisible = !catAssistantVisible;
            
            if (catAssistantVisible) {
                catPanel.classList.add('show');
                // ÂàùÂßãÂåñÁå´Âí™Âä©Êâã
                if (!catAssistantInitialized) {
                    initCatAssistant();
                }
            } else {
                catPanel.classList.remove('show');
            }
            
            // ‰øùÂ≠òÊòæÁ§∫Áä∂ÊÄÅÂà∞Êú¨Âú∞Â≠òÂÇ®
            Storage.set('catAssistantVisible', catAssistantVisible);
        }
        
        // Êõ¥Êñ∞Áå´Âí™Áä∂ÊÄÅ
        function updateCatStatus() {
            const catMoodElement = document.getElementById('catMood');
            const catMoodTextElement = document.getElementById('catMoodText');
            const catHappinessBarElement = document.getElementById('catHappinessBar');
            
            // Ê†πÊçÆÂøÉÊÉÖÂÄºË∞ÉÊï¥ÂøÉÊÉÖÁä∂ÊÄÅ
            if (catHappiness >= 80) {
                catMood = 'ÂºÄÂøÉ';
            } else if (catHappiness >= 60) {
                catMood = 'Êª°Ë∂≥';
            } else if (catHappiness >= 40) {
                catMood = 'Âõ∞ÂÄ¶';
            } else if (catHappiness >= 20) {
                catMood = 'È••È•ø';
            } else {
                catMood = 'Ë∞ÉÁöÆ';
            }
            
            if (catMoodElement) {
                catMoodElement.textContent = catMoodEmojis[catMood];
            }
            if (catMoodTextElement) {
                catMoodTextElement.textContent = catMood;
            }
            if (catHappinessBarElement) {
                catHappinessBarElement.style.width = catHappiness + '%';
            }
            
            // Êõ¥Êñ∞Êô∫ËÉΩÂª∫ËÆÆ
            updateCatSuggestions();
        }
        
        // Êõ¥Êñ∞Áå´Âí™Êô∫ËÉΩÂª∫ËÆÆ
        function updateCatSuggestions() {
            const suggestion1Element = document.getElementById('suggestion1');
            const suggestion2Element = document.getElementById('suggestion2');
            
            // Ëé∑Âèñ‰ªäÊó•‰ªªÂä°
            const today = new Date();
            const todayTasks = tasks.filter(task => {
                const taskDate = new Date(task.startTime);
                return taskDate.toDateString() === today.toDateString() && !task.completed;
            });
            
            const completedToday = tasks.filter(task => {
                const taskDate = new Date(task.startTime);
                return taskDate.toDateString() === today.toDateString() && task.completed;
            });
            
            // Êõ¥Êñ∞ÁªüËÆ°
            updateCatStatistics(todayTasks.length, completedToday.length);
            
            // ÁîüÊàê‰∏ªË¶ÅÂª∫ËÆÆ
            let mainSuggestion = '';
            if (todayTasks.length === 0) {
                mainSuggestion = '‰ªäÂ§©Ê≤°Êúâ‰ªªÂä°‰∫ÜÔºåÂ•ΩÂ•Ω‰ºëÊÅØÂêßÔºÅüò¥';
            } else if (todayTasks.length <= 2) {
                mainSuggestion = `‰ªäÂ§©ËøòÊúâ${todayTasks.length}‰∏™‰ªªÂä°ÔºåÂæàÂø´Â∞±ËÉΩÂÆåÊàêÔºÅüí™`;
            } else if (todayTasks.length <= 5) {
                mainSuggestion = `‰ªäÂ§©Êúâ${todayTasks.length}‰∏™‰ªªÂä°ÔºåËÆ∞ÂæóÂä≥ÈÄ∏ÁªìÂêàÂì¶ÔºÅ‚è∞`;
            } else {
                mainSuggestion = `ÂìáÔºÅ${todayTasks.length}‰∏™‰ªªÂä°ÔºåÈúÄË¶Å‰∏ìÊ≥®Âäõ‰∫ÜÔºÅüéØ`;
            }
            
            // ÁîüÊàêÊó∂Èó¥Áõ∏ÂÖ≥Âª∫ËÆÆ
            let timeSuggestion = '';
            const currentHour = new Date().getHours();
            if (currentHour < 9) {
                timeSuggestion = 'Êó©‰∏äÂ•ΩÔºÅÊñ∞ÁöÑ‰∏ÄÂ§©ÂÖÖÊª°Â∏åÊúõÔºÅ‚òÄÔ∏è';
            } else if (currentHour < 12) {
                timeSuggestion = '‰∏äÂçàÂ∑•‰ΩúÁä∂ÊÄÅÊúÄ‰Ω≥ÔºåÂä†Ê≤πÔºÅüöÄ';
            } else if (currentHour < 14) {
                timeSuggestion = 'ÂçàÈ§êÊó∂Èó¥Âà∞‰∫ÜÔºåËÆ∞Âæó‰ºëÊÅØ‰∏Ä‰∏ãÔºÅüç±';
            } else if (currentHour < 18) {
                timeSuggestion = '‰∏ãÂçà‰øùÊåÅ‰∏ìÊ≥®ÔºåËÉúÂà©Âú®ÊúõÔºÅüí™';
            } else if (currentHour < 22) {
                timeSuggestion = 'Êôö‰∏äÈÄÇÂêàÊÄªÁªìÂíåËßÑÂàíÔºÅüìù';
            } else {
                timeSuggestion = 'Â§úÊ∑±‰∫ÜÔºåÊó©ÁÇπ‰ºëÊÅØÂêßÔºÅüåô';
            }
            
            // Ê†πÊçÆÁå´Âí™ÂøÉÊÉÖÊ∑ªÂä†‰∏™ÊÄßÂåñÂª∫ËÆÆ
            if (catMood === 'È••È•ø') {
                timeSuggestion += ' ËÆ∞ÂæóÁªôÁå´Âí™ÂñÇÈ£ü~ üêü';
            } else if (catMood === 'Âõ∞ÂÄ¶') {
                timeSuggestion += ' Áå´Âí™ÊúâÁÇπÂõ∞‰∫ÜÔºåÈúÄË¶Å‰ºëÊÅØ~ üò¥';
            } else if (catMood === 'Ë∞ÉÁöÆ') {
                timeSuggestion += ' Áå´Âí™ÊÉ≥Âíå‰Ω†Áé©‰∏Ä‰ºöÂÑøÔºÅüéæ';
            }
            
            if (suggestion1Element) {
                suggestion1Element.textContent = mainSuggestion;
            }
            if (suggestion2Element) {
                suggestion2Element.textContent = timeSuggestion;
            }
        }
        
        // Êõ¥Êñ∞Áå´Âí™ÁªüËÆ°ÊòæÁ§∫
        function updateCatStatistics(remaining, completed) {
            const completedElement = document.getElementById('cat-completed-count');
            const remainingElement = document.getElementById('cat-remaining-count');
            const efficiencyElement = document.getElementById('cat-efficiency');
            
            if (completedElement) {
                completedElement.textContent = completed;
            }
            if (remainingElement) {
                remainingElement.textContent = remaining;
            }
            
            const total = completed + remaining;
            const efficiency = total > 0 ? Math.round((completed / total) * 100) : 0;
            if (efficiencyElement) {
                efficiencyElement.textContent = efficiency + '%';
            }
        }
        
        // ÊòæÁ§∫Áå´Âí™Ê∂àÊÅØ
        function showCatMessage(message) {
            // Âú®ÂéüÊúâÁå´Âí™Âä©Êâã‰ΩçÁΩÆÊòæÁ§∫Ê∂àÊÅØ
            const catMessageElement = document.getElementById('catMessage');
            const catMessageTextElement = document.getElementById('catMessageText');
            
            if (catMessageElement && catMessageTextElement) {
                catMessageTextElement.textContent = message;
                catMessageElement.classList.remove('hidden');
                
                // 3ÁßíÂêéÈöêËóèÊ∂àÊÅØ
                setTimeout(() => {
                    catMessageElement.classList.add('hidden');
                }, 3000);
            }
            
            // Âú®Â∫ïÈÉ®Áå´Âí™Âä©Êâã‰ΩçÁΩÆÊòæÁ§∫Ê∂àÊÅØ
            const catMessageBottomElement = document.getElementById('catMessageBottom');
            const catMessageTextBottomElement = document.getElementById('catMessageTextBottom');
            
            if (catMessageBottomElement && catMessageTextBottomElement) {
                catMessageTextBottomElement.textContent = message;
                catMessageBottomElement.classList.remove('hidden');
                
                // 3ÁßíÂêéÈöêËóèÊ∂àÊÅØ
                setTimeout(() => {
                    catMessageBottomElement.classList.add('hidden');
                }, 3000);
            }
        }
        
        // Êë∏Êë∏Áå´Âí™
        function petCat() {
            // ÈòªÊ≠¢‰∫ã‰ª∂ÂÜíÊ≥°ÔºåÈò≤Ê≠¢ËèúÂçïÂÖ≥Èó≠
            if (event) {
                event.preventDefault();
                event.stopPropagation();
            }
            
            // Ëé∑ÂèñÊë∏Êë∏ÊåâÈíÆÂÖÉÁ¥†
            const petBtn = document.getElementById('petBtn');
            
            // Â¢ûÂä†Êë∏Êë∏ËÆ°Êï∞
            catPetCount = (catPetCount || 0) + 1;
            
            // Êõ¥Êñ∞Êë∏Êë∏ËÆ°Êï∞ÊòæÁ§∫
            const petCountElement = document.getElementById('petCount');
            if (petCountElement) {
                petCountElement.textContent = catPetCount;
            }
            
            // ËøûÂáªÊ£ÄÊµã
            const currentTime = Date.now();
            const lastPetTime = window.lastPetTime || 0;
            const timeDiff = currentTime - lastPetTime;
            
            // Âà§Êñ≠ÊòØÂê¶‰∏∫ËøûÂáªÔºà500msÂÜÖÔºâ
            if (timeDiff < 500) {
                window.comboCount = (window.comboCount || 0) + 1;
                window.comboTimeout = clearTimeout(window.comboTimeout);
            } else {
                window.comboCount = 1;
            }
            
            // ËÆæÁΩÆËøûÂáªË∂ÖÊó∂ÈáçÁΩÆ
            window.comboTimeout = setTimeout(() => {
                window.comboCount = 0;
            }, 1000);
            
            // Â∫îÁî®ËøûÂáªÊïàÊûú
            if (petBtn) {
                // Ê∏ÖÈô§‰πãÂâçÁöÑÂä®ÁîªÁ±ª
                petBtn.classList.remove('petting', 'combo-2', 'combo-3', 'combo-5', 'combo-10');
                
                // Âº∫Âà∂ÈáçÁªò‰ª•ÈáçÂêØÂä®Áîª
                void petBtn.offsetWidth;
                
                // Ê†πÊçÆËøûÂáªÊï∞Â∫îÁî®‰∏çÂêåÊïàÊûú
                if (window.comboCount >= 10) {
                    petBtn.classList.add('combo-10');
                    showComboMessage(window.comboCount, 'üî•üî•üî• Ë∂ÖÁ•ûËøûÂáªÔºÅÔºÅÔºÅ');
                    createMassiveParticles(petBtn);
                    playComboSound(10);
                    playHapticFeedback(10);
                    playScreenShake(10);
                } else if (window.comboCount >= 5) {
                    petBtn.classList.add('combo-5');
                    showComboMessage(window.comboCount, '‚ú®‚ú®‚ú® ÁñØÁãÇËøûÂáªÔºÅ');
                    createParticles(petBtn, 8);
                    playComboSound(5);
                    playHapticFeedback(5);
                    playScreenShake(5);
                } else if (window.comboCount >= 3) {
                    petBtn.classList.add('combo-3');
                    showComboMessage(window.comboCount, '‚ö°‚ö° ËøûÂáªÔºÅ');
                    createParticles(petBtn, 5);
                    playComboSound(3);
                    playHapticFeedback(3);
                } else if (window.comboCount >= 2) {
                    petBtn.classList.add('combo-2');
                    showComboMessage(window.comboCount, 'üëè ÂèåÂáªÔºÅ');
                    createParticles(petBtn, 3);
                    playComboSound(2);
                    playHapticFeedback(2);
                } else {
                    petBtn.classList.add('petting');
                    createParticles(petBtn, 1);
                    playComboSound(1);
                    playHapticFeedback(1);
                }
            }
            
            catHappiness = Math.min(100, catHappiness + 5 + (window.comboCount * 2));
            updateCatStatus();
            
            // Ê†πÊçÆËøûÂáªÊï∞ÊòæÁ§∫‰∏çÂêåÊ∂àÊÅØ
            let messages;
            if (window.comboCount >= 10) {
                messages = [
                    'ÂñµÂñµÂñµÔºÅ',
                    'ÂñµÂñµÂñµÔºÅ',
                    'ÂñµÂñµÂñµÔºÅ',
                    'ÂñµÂñµÂñµÔºÅ'
                ];
            } else if (window.comboCount >= 5) {
                messages = [
                    'ÂñµÂñµÂñµÔºÅ',
                    'ÂñµÂñµÂñµÔºÅ',
                    'ÂñµÂñµÂñµÔºÅ',
                    'ÂñµÂñµÂñµÔºÅ'
                ];
            } else if (window.comboCount >= 2) {
                messages = [
                    'ÂñµÂñµÂñµÔºÅ',
                    'ÂñµÂñµÂñµÔºÅ',
                    'ÂñµÂñµÂñµÔºÅ',
                    'ÂñµÂñµÂñµÔºÅ'
                ];
            } else {
                messages = [
                    'ÂñµÂñµÂñµÔºÅ',
                    'ÂñµÂñµÂñµÔºÅ',
                    'ÂñµÂñµÂñµÔºÅ',
                    'ÂñµÂñµÂñµÔºÅ'
                ];
            }
            
            const randomMessage = messages[Math.floor(Math.random() * messages.length)];
            showCatMessage(randomMessage);
            
            // Ê∑ªÂä†Âä®ÁîªÊïàÊûú
            const catMoodElement = document.getElementById('catMood');
            if (catMoodElement) {
                catMoodElement.classList.add('animate-bounce');
                setTimeout(() => {
                    catMoodElement.classList.remove('animate-bounce');
                }, 1000);
            }
            
            // ‰øùÂ≠òÊë∏Êë∏ËÆ°Êï∞Âà∞Êú¨Âú∞Â≠òÂÇ®
            Storage.set('catPetCount', catPetCount);
            
            // Êõ¥Êñ∞ÊúÄÂêéÊë∏Êë∏Êó∂Èó¥
            window.lastPetTime = currentTime;
        }
        
        // ÊòæÁ§∫ËøûÂáªÊ∂àÊÅØ
        function showComboMessage(comboCount, message) {
            const petBtn = document.getElementById('petBtn');
            if (!petBtn) return;
            
            // ÁßªÈô§‰πãÂâçÁöÑËøûÂáªÊòæÁ§∫
            const oldComboDisplay = petBtn.querySelector('.combo-display');
            if (oldComboDisplay) {
                oldComboDisplay.remove();
            }
            
            // ÂàõÂª∫Êñ∞ÁöÑËøûÂáªÊòæÁ§∫
            const comboDisplay = document.createElement('div');
            comboDisplay.className = 'combo-display';
            comboDisplay.innerHTML = `${comboCount}ËøûÂáªÔºÅ${message}`;
            comboDisplay.style.fontSize = comboCount >= 10 ? '16px' : '14px';
            comboDisplay.style.color = comboCount >= 10 ? '#ef4444' : 
                                     comboCount >= 5 ? '#f59e0b' : 
                                     comboCount >= 3 ? '#10b981' : '#8b5cf6';
            
            petBtn.appendChild(comboDisplay);
            
            // 1ÁßíÂêéÁßªÈô§
            setTimeout(() => {
                if (comboDisplay.parentNode) {
                    comboDisplay.remove();
                }
            }, 1000);
        }
        
        // ÂàõÂª∫Á≤íÂ≠êÊïàÊûú
        function createParticles(element, count) {
            const particles = ['‚ù§Ô∏è', 'üíï', 'üíñ', '‚ú®', 'üåü', '‚≠ê', 'üéâ', 'üéä', 'üêæ', 'üòä'];
            
            for (let i = 0; i < count; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'pet-particle';
                    particle.textContent = particles[Math.floor(Math.random() * particles.length)];
                    
                    // ËÆæÁΩÆÈöèÊú∫‰ΩçÁΩÆÂíåÂä®ÁîªÂèÇÊï∞
                    const startX = 50;
                    const startY = 50;
                    const angle = (Math.PI * 2 * i) / count + Math.random() * 0.5;
                    const distance = 50 + Math.random() * 50;
                    
                    particle.style.left = startX + '%';
                    particle.style.top = startY + '%';
                    particle.style.setProperty('--tx', Math.cos(angle) * distance + 'px');
                    particle.style.setProperty('--ty', Math.sin(angle) * distance - 30 + 'px');
                    particle.style.setProperty('--tx2', Math.cos(angle) * distance * 2 + 'px');
                    particle.style.setProperty('--ty2', Math.sin(angle) * distance * 2 - 60 + 'px');
                    
                    element.appendChild(particle);
                    
                    // Âä®ÁîªÁªìÊùüÂêéÁßªÈô§Á≤íÂ≠ê
                    setTimeout(() => {
                        if (particle.parentNode) {
                            particle.remove();
                        }
                    }, 1500);
                }, i * 50);
            }
        }
        
        // ÂàõÂª∫Â§ßËßÑÊ®°Á≤íÂ≠êÊïàÊûúÔºàË∂ÖÁ•ûËøûÂáªÔºâ
        function createMassiveParticles(element) {
            const particles = ['üî•', 'üí•', '‚ú®', 'üåü', '‚≠ê', 'üéâ', 'üéä', 'üèÜ', 'üëë', 'üíé', '‚ù§Ô∏è', 'üíï', 'üíñ'];
            
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'pet-particle';
                    particle.textContent = particles[Math.floor(Math.random() * particles.length)];
                    particle.style.fontSize = Math.random() * 10 + 10 + 'px';
                    
                    const startX = 50;
                    const startY = 50;
                    const angle = (Math.PI * 2 * i) / 20 + Math.random() * 0.3;
                    const distance = 80 + Math.random() * 80;
                    
                    particle.style.left = startX + '%';
                    particle.style.top = startY + '%';
                    particle.style.setProperty('--tx', Math.cos(angle) * distance + 'px');
                    particle.style.setProperty('--ty', Math.sin(angle) * distance - 50 + 'px');
                    particle.style.setProperty('--tx2', Math.cos(angle) * distance * 3 + 'px');
                    particle.style.setProperty('--ty2', Math.sin(angle) * distance * 3 - 100 + 'px');
                    
                    element.appendChild(particle);
                    
                    setTimeout(() => {
                        if (particle.parentNode) {
                            particle.remove();
                        }
                    }, 2000);
                }, i * 30);
            }
        }
        
        // Êí≠ÊîæËøûÂáªÈü≥Êïà
        function playComboSound(comboLevel) {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                
                // Ê†πÊçÆËøûÂáªÁ≠âÁ∫ßÊí≠Êîæ‰∏çÂêåÈü≥Êïà
                const soundPatterns = {
                    1: { frequencies: [440], type: 'sine', duration: 0.2, delay: 0 },
                    2: { frequencies: [440, 523], type: 'sine', duration: 0.2, delay: 0.1 },
                    3: { frequencies: [392, 523, 659], type: 'sine', duration: 0.2, delay: 0.1 },
                    4: { frequencies: [440, 554, 659, 784], type: 'sine', duration: 0.18, delay: 0.08 },
                    5: { frequencies: [440, 554, 659, 784, 880], type: 'triangle', duration: 0.15, delay: 0.08 },
                    6: { frequencies: [440, 494, 523, 587, 659, 698], type: 'triangle', duration: 0.15, delay: 0.07 },
                    7: { frequencies: [440, 494, 523, 587, 659, 698, 784], type: 'triangle', duration: 0.14, delay: 0.07 },
                    8: { frequencies: [440, 494, 523, 587, 659, 698, 784, 880], type: 'triangle', duration: 0.13, delay: 0.06 },
                    9: { frequencies: [440, 494, 523, 587, 659, 698, 784, 880, 988], type: 'square', duration: 0.12, delay: 0.06 },
                    10: { frequencies: [523, 659, 784, 1047, 1319], type: 'square', duration: 0.15, delay: 0.08 }
                };
                
                // Ëé∑ÂèñÂØπÂ∫îÁöÑÈü≥ÊïàÊ®°Âºè
                let soundPattern;
                if (comboLevel >= 10) {
                    soundPattern = soundPatterns[10];
                } else if (comboLevel >= 5) {
                    soundPattern = soundPatterns[5];
                } else if (comboLevel >= 3) {
                    soundPattern = soundPatterns[3];
                } else if (comboLevel >= 2) {
                    soundPattern = soundPatterns[2];
                } else {
                    soundPattern = soundPatterns[1];
                }
                
                // Ê∑ªÂä†ÂíåÂº¶ÊïàÊûú
                const addChord = (baseFreq, index) => {
                    const chords = [];
                    if (comboLevel >= 5) {
                        chords.push(baseFreq * 1.25); // Â§ß‰∏âÂ∫¶
                        chords.push(baseFreq * 1.5);  // Á∫Ø‰∫îÂ∫¶
                    }
                    if (comboLevel >= 10) {
                        chords.push(baseFreq * 2);   // È´òÂÖ´Â∫¶
                    }
                    return chords;
                };
                
                // Êí≠ÊîæÈü≥Á¨¶
                soundPattern.frequencies.forEach((freq, index) => {
                    const chordFreqs = addChord(freq, index);
                    
                    chordFreqs.forEach((chordFreq, chordIndex) => {
                        const oscillator = audioContext.createOscillator();
                        const gainNode = audioContext.createGain();
                        const filter = audioContext.createBiquadFilter();
                        
                        // ËøûÊé•Èü≥È¢ëËäÇÁÇπ
                        oscillator.connect(filter);
                        filter.connect(gainNode);
                        gainNode.connect(audioContext.destination);
                        
                        // ËÆæÁΩÆÈü≥Ëâ≤
                        oscillator.type = soundPattern.type;
                        oscillator.frequency.value = chordFreq;
                        
                        // ËÆæÁΩÆÊª§Ê≥¢Âô®
                        filter.type = 'lowpass';
                        filter.frequency.value = comboLevel >= 5 ? 2000 : 1500;
                        filter.Q.value = comboLevel >= 10 ? 5 : 2;
                        
                        // ËÆæÁΩÆÈü≥ÈáèÂåÖÁªú
                        const startTime = audioContext.currentTime + index * soundPattern.delay + chordIndex * 0.02;
                        const attackTime = 0.01;
                        const decayTime = 0.05;
                        const sustainLevel = chordIndex === 0 ? 0.15 : 0.08;
                        const releaseTime = soundPattern.duration;
                        
                        gainNode.gain.setValueAtTime(0, startTime);
                        gainNode.gain.linearRampToValueAtTime(sustainLevel, startTime + attackTime);
                        gainNode.gain.linearRampToValueAtTime(sustainLevel * 0.7, startTime + attackTime + decayTime);
                        gainNode.gain.exponentialRampToValueAtTime(0.01, startTime + releaseTime);
                        
                        // Êí≠ÊîæÈü≥Á¨¶
                        oscillator.start(startTime);
                        oscillator.stop(startTime + releaseTime);
                    });
                });
                
                // Ê∑ªÂä†ÊâìÂáª‰πêÊïàÊûúÔºàÈ´òËøûÂáªÊó∂Ôºâ
                if (comboLevel >= 5) {
                    const kickOscillator = audioContext.createOscillator();
                    const kickGain = audioContext.createGain();
                    
                    kickOscillator.connect(kickGain);
                    kickGain.connect(audioContext.destination);
                    
                    kickOscillator.frequency.setValueAtTime(60, audioContext.currentTime);
                    kickOscillator.frequency.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
                    
                    kickGain.gain.setValueAtTime(0.3, audioContext.currentTime);
                    kickGain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
                    
                    kickOscillator.start(audioContext.currentTime);
                    kickOscillator.stop(audioContext.currentTime + 0.1);
                }
                
            } catch (error) {
                // Èü≥È¢ëÊí≠ÊîæÂ§±Ë¥•Êó∂ÈùôÈªòÂ§ÑÁêÜ
            }
        }
        
        // Â¢ûÂº∫Ëß¶ËßâÂèçÈ¶à
        function playHapticFeedback(comboLevel) {
            if (!navigator.vibrate) return;
            
            // Ê†πÊçÆËøûÂáªÁ≠âÁ∫ßËÆæÁΩÆ‰∏çÂêåÁöÑÈúáÂä®Ê®°Âºè
            const vibrationPatterns = {
                1: [30],                           // ÂçïÊ¨°Áü≠ÈúáÂä®
                2: [30, 50, 30],                  // ÂèåÂáªÈúáÂä®
                3: [30, 40, 30, 40, 30],          // ‰∏âËøûÂáªÈúáÂä®
                4: [25, 35, 25, 35, 25, 35, 25],  // ÂõõËøûÂáªÈúáÂä®
                5: [20, 30, 20, 30, 20, 30, 20, 30, 20], // ‰∫îËøûÂáªÈúáÂä®
                6: [20, 25, 20, 25, 20, 25, 20, 25, 20, 25, 20], // ÂÖ≠ËøûÂáªÈúáÂä®
                7: [15, 20, 15, 20, 15, 20, 15, 20, 15, 20, 15, 20, 15], // ‰∏ÉËøûÂáªÈúáÂä®
                8: [15, 18, 15, 18, 15, 18, 15, 18, 15, 18, 15, 18, 15, 18, 15], // ÂÖ´ËøûÂáªÈúáÂä®
                9: [12, 15, 12, 15, 12, 15, 12, 15, 12, 15, 12, 15, 12, 15, 12, 15, 12], // ‰πùËøûÂáªÈúáÂä®
                10: [10, 12, 10, 12, 10, 12, 10, 12, 10, 12, 10, 12, 10, 12, 10, 12, 10, 12, 10, 12] // Ë∂ÖÁ•ûËøûÂáªÈúáÂä®
            };
            
            let pattern;
            if (comboLevel >= 10) {
                pattern = vibrationPatterns[10];
            } else if (comboLevel >= 5) {
                pattern = vibrationPatterns[Math.min(comboLevel, 9)];
            } else if (comboLevel >= 3) {
                pattern = vibrationPatterns[comboLevel];
            } else if (comboLevel >= 2) {
                pattern = vibrationPatterns[2];
            } else {
                pattern = vibrationPatterns[1];
            }
            
            // Ê∑ªÂä†ÈïøÈúáÂä®ÊïàÊûúÔºàÈ´òËøûÂáªÊó∂Ôºâ
            if (comboLevel >= 5) {
                pattern = pattern.concat([100]); // Âú®Êú´Â∞æÊ∑ªÂä†ÈïøÈúáÂä®
            }
            
            navigator.vibrate(pattern);
        }
        
        // ÂàõÂª∫Â±èÂπïÈúáÂä®ÊïàÊûúÔºàÈ´òËøûÂáªÊó∂Ôºâ
        function playScreenShake(comboLevel) {
            if (comboLevel < 5) return;
            
            const body = document.body;
            const intensity = comboLevel >= 10 ? 8 : comboLevel >= 7 ? 5 : 3;
            const duration = comboLevel >= 10 ? 600 : comboLevel >= 7 ? 400 : 200;
            
            body.style.transition = 'transform 0.05s ease-in-out';
            
            let shakeCount = 0;
            const shakeInterval = setInterval(() => {
                const x = (Math.random() - 0.5) * intensity;
                const y = (Math.random() - 0.5) * intensity;
                body.style.transform = `translate(${x}px, ${y}px)`;
                
                shakeCount++;
                if (shakeCount >= duration / 50) {
                    clearInterval(shakeInterval);
                    body.style.transform = 'translate(0, 0)';
                }
            }, 50);
            
            setTimeout(() => {
                body.style.transition = '';
            }, duration + 50);
        }
        
        // Áå´Âí™Ë∑≥Ëàû
        function catDance() {
            // ÈòªÊ≠¢‰∫ã‰ª∂ÂÜíÊ≥°ÔºåÈò≤Ê≠¢ËèúÂçïÂÖ≥Èó≠
            if (event) {
                event.preventDefault();
                event.stopPropagation();
            }
            
            catHappiness = Math.min(100, catHappiness + 12);
            updateCatStatus();
            
            const messages = [
                'ËÆ©Êàë‰ª¨‰∏ÄËµ∑Ë∑≥ËàûÂêßÔºÅüíÉüï∫',
                'Èü≥‰πêÂìçËµ∑ÔºåÁå´Âí™Ëµ∑ËàûÔºÅüéµ',
                'Ë∑≥ËàûËÆ©ÊàëÂ•ΩÂºÄÂøÉÔºÅ‚ú®',
                '‰∏ª‰∫∫ÁöÑËàû‰º¥Â∞±ÊòØÊàëÔºÅüåü'
            ];
            const randomMessage = messages[Math.floor(Math.random() * messages.length)];
            showCatMessage(randomMessage);
            
            // Ê∑ªÂä†Ë∑≥ËàûÂä®ÁîªÊïàÊûú
            const catMoodElement = document.getElementById('catMood');
            catMoodElement.classList.add('animate-pulse');
            setTimeout(() => {
                catMoodElement.classList.add('animate-bounce');
                setTimeout(() => {
                    catMoodElement.classList.remove('animate-pulse', 'animate-bounce');
                }, 1000);
            }, 500);
            
            // ÊòæÁ§∫Èü≥Á¨¶Âä®Áîª
            showMusicNotes();
        }
        
        // ÊòæÁ§∫Èü≥Á¨¶Âä®Áîª
        function showMusicNotes() {
            const catContainer = document.getElementById('cat-assistant-container');
            const notes = ['üéµ', 'üé∂', 'üé§', 'üé∏'];
            
            for (let i = 0; i < 4; i++) {
                setTimeout(() => {
                    const note = document.createElement('div');
                    note.textContent = notes[i];
                    note.className = 'absolute text-xl animate-bounce';
                    note.style.left = Math.random() * 100 + '%';
                    note.style.top = '20px';
                    note.style.animation = 'float-up 2s ease-out forwards';
                    
                    catContainer.style.position = 'relative';
                    catContainer.appendChild(note);
                    
                    setTimeout(() => {
                        note.remove();
                    }, 2000);
                }, i * 200);
            }
        }
        
        // ‰ªªÂä°ÂÆåÊàêÊó∂Áå´Âí™ÂèçÂ∫î
        function onTaskComplete() {
            catHappiness = Math.min(100, catHappiness + 15);
            updateCatStatus();
            
            const messages = [
                '‰∏ª‰∫∫Â•ΩÊ£íÔºÅ‰ªªÂä°ÂÆåÊàê‰∫ÜÔºÅüéâ',
                'Â§™ÂéâÂÆ≥‰∫ÜÔºÅ‰∏∫‰Ω†È™ÑÂÇ≤ÔºÅüåü',
                'Âèà‰∏Ä‰∏™‰ªªÂä°ÂÆåÊàê‰∫ÜÔºÅÁªßÁª≠Âä†Ê≤πÔºÅüí™',
                '‰∏ª‰∫∫ÊòØÊúÄÊ£íÁöÑÔºÅüèÜ'
            ];
            const randomMessage = messages[Math.floor(Math.random() * messages.length)];
            showCatMessage(randomMessage);
            
            // Êõ¥Êñ∞Êô∫ËÉΩÂàÜÊûêÂíåÈºìÂä±‰ø°ÊÅØ
            performIntelligentAnalysis();
            generateEncouragement();
        }
        
        // Êô∫ËÉΩÂàÜÊûêÂäüËÉΩ
        function performIntelligentAnalysis() {
            const analysis = analyzeTaskPatterns();
            updateIntelligentAnalysisUI(analysis);
        }

        // ÂàÜÊûê‰ªªÂä°Ê®°Âºè
        function analyzeTaskPatterns() {
            const today = new Date();
            const weekAgo = new Date(today.getTime() - 7 * 24 * 60 * 60 * 1000);
            
            // Ëé∑ÂèñÊúÄËøë7Â§©ÁöÑ‰ªªÂä°
            const recentTasks = tasks.filter(task => {
                const taskDate = new Date(task.startTime);
                return taskDate >= weekAgo;
            });

            // Ëé∑Âèñ‰ªäÊó•‰ªªÂä°
            const todayTasks = tasks.filter(task => {
                const taskDate = new Date(task.startTime);
                return taskDate.toDateString() === today.toDateString();
            });

            const completedToday = todayTasks.filter(task => task.completed);
            const pendingToday = todayTasks.filter(task => !task.completed);

            // ÂàÜÊûêÂÆåÊàêÊïàÁéá
            const totalRecent = recentTasks.length;
            const completedRecent = recentTasks.filter(task => task.completed).length;
            const efficiency = totalRecent > 0 ? Math.round((completedRecent / totalRecent) * 100) : 0;

            // ÂàÜÊûêÊúÄ‰Ω≥Â∑•‰ΩúÊó∂Èó¥
            const completionTimes = recentTasks
                .filter(task => task.completed)
                .map(task => {
                    const startTime = new Date(task.startTime);
                    return {
                        hour: startTime.getHours(),
                        duration: 3600000 // ÈªòËÆ§1Â∞èÊó∂
                    };
                });

            const bestWorkHour = findBestWorkHour(completionTimes);

            // ÂàÜÊûê‰ªªÂä°Á±ªÂûãÂÅèÂ•Ω
            const taskCategories = categorizeTasks(recentTasks);
            const preferredCategory = findPreferredCategory(taskCategories);

            // ÁîüÊàêÊô∫ËÉΩÂª∫ËÆÆ
            const suggestions = generateSmartSuggestions(efficiency, bestWorkHour, preferredCategory, pendingToday.length);

            return {
                efficiency,
                totalTasks: totalRecent,
                completedTasks: completedRecent,
                todayTotal: todayTasks.length,
                todayCompleted: completedToday.length,
                todayPending: pendingToday.length,
                bestWorkHour,
                preferredCategory,
                suggestions,
                trend: calculateTrend(recentTasks)
            };
        }

        // Êü•ÊâæÊúÄ‰Ω≥Â∑•‰ΩúÊó∂Èó¥
        function findBestWorkHour(completionTimes) {
            if (completionTimes.length === 0) return 9; // ÈªòËÆ§‰∏äÂçà9ÁÇπ

            const hourEfficiency = {};
            completionTimes.forEach(({ hour, duration }) => {
                if (!hourEfficiency[hour]) {
                    hourEfficiency[hour] = { count: 0, totalDuration: 0 };
                }
                hourEfficiency[hour].count++;
                hourEfficiency[hour].totalDuration += duration;
            });

            let bestHour = 9;
            let bestEfficiency = 0;

            Object.keys(hourEfficiency).forEach(hour => {
                const avgDuration = hourEfficiency[hour].totalDuration / hourEfficiency[hour].count;
                const efficiency = hourEfficiency[hour].count / (avgDuration / 3600000); // ÊØèÂ∞èÊó∂ÂÆåÊàêÊï∞
                if (efficiency > bestEfficiency) {
                    bestEfficiency = efficiency;
                    bestHour = parseInt(hour);
                }
            });

            return bestHour;
        }

        // ‰ªªÂä°ÂàÜÁ±ª
        function categorizeTasks(tasks) {
            const categories = {
                'Â∑•‰Ωú': ['Â∑•‰Ωú', '‰ºöËÆÆ', 'È°πÁõÆ', 'Êä•Âëä', 'ÂºÄÂèë'],
                'Â≠¶‰π†': ['Â≠¶‰π†', 'ËØæÁ®ã', 'ÈòÖËØª', 'ÁªÉ‰π†', 'Á†îÁ©∂'],
                'ÁîüÊ¥ª': ['Ë¥≠Áâ©', 'ËøêÂä®', '‰ºëÊÅØ', 'Â®±‰πê', 'ÂÆ∂Âä°'],
                'ÂÅ•Â∫∑': ['ÈîªÁÇº', 'ÂÅ•Ë∫´', 'ÂåªÁñó', 'Ê£ÄÊü•', 'ËøêÂä®']
            };

            const categorized = {};
            Object.keys(categories).forEach(cat => {
                categorized[cat] = 0;
            });

            tasks.forEach(task => {
                let found = false;
                Object.keys(categories).forEach(cat => {
                    if (categories[cat].some(keyword => task.title.includes(keyword))) {
                        categorized[cat]++;
                        found = true;
                    }
                });
                if (!found) {
                    categorized['ÂÖ∂‰ªñ'] = (categorized['ÂÖ∂‰ªñ'] || 0) + 1;
                }
            });

            return categorized;
        }

        // Êü•ÊâæÂÅèÂ•ΩÁ±ªÂà´
        function findPreferredCategory(taskCategories) {
            let maxCount = 0;
            let preferredCategory = 'Â∑•‰Ωú';

            Object.keys(taskCategories).forEach(category => {
                if (taskCategories[category] > maxCount) {
                    maxCount = taskCategories[category];
                    preferredCategory = category;
                }
            });

            return preferredCategory;
        }

        // ËÆ°ÁÆóË∂ãÂäø
        function calculateTrend(recentTasks) {
            const threeDaysAgo = new Date(Date.now() - 3 * 24 * 60 * 60 * 1000);
            const last3Days = recentTasks.filter(task => {
                const taskDate = new Date(task.startTime);
                return taskDate >= threeDaysAgo;
            });

            const sevenDaysAgo = new Date(Date.now() - 7 * 24 * 60 * 60 * 1000);
            const last7Days = recentTasks.filter(task => {
                const taskDate = new Date(task.startTime);
                return taskDate >= sevenDaysAgo && taskDate < threeDaysAgo;
            });

            const recentCompletion = last3Days.filter(task => task.completed).length / Math.max(last3Days.length, 1);
            const previousCompletion = last7Days.filter(task => task.completed).length / Math.max(last7Days.length, 1);

            if (recentCompletion > previousCompletion + 0.1) return '‰∏äÂçá';
            if (recentCompletion < previousCompletion - 0.1) return '‰∏ãÈôç';
            return 'Á®≥ÂÆö';
        }

        // ÁîüÊàêÊô∫ËÉΩÂª∫ËÆÆ
        function generateSmartSuggestions(efficiency, bestWorkHour, preferredCategory, pendingCount) {
            const suggestions = [];

            // Âü∫‰∫éÊïàÁéáÁöÑÂª∫ËÆÆ
            if (efficiency < 50) {
                suggestions.push('Âª∫ËÆÆË∞ÉÊï¥‰ªªÂä°ËÆ°ÂàíÔºåÊèêÈ´òÂÆåÊàêÊïàÁéá');
            } else if (efficiency > 80) {
                suggestions.push('ÊïàÁéáÂæàÈ´òÔºÅ‰øùÊåÅËøô‰∏™ÂäøÂ§¥');
            }

            // Âü∫‰∫éÂ∑•‰ΩúÊó∂Èó¥ÁöÑÂª∫ËÆÆ
            if (bestWorkHour >= 9 && bestWorkHour <= 11) {
                suggestions.push('‰∏äÂçàÊòØ‰Ω†ÁöÑÈªÑÈáëÊó∂Èó¥ÔºåÂÆâÊéíÈáçË¶Å‰ªªÂä°');
            } else if (bestWorkHour >= 14 && bestWorkHour <= 16) {
                suggestions.push('‰∏ãÂçàÁä∂ÊÄÅÊúÄ‰Ω≥ÔºåÈÄÇÂêà‰∏ìÊ≥®Â∑•‰Ωú');
            } else if (bestWorkHour >= 19 && bestWorkHour <= 21) {
                suggestions.push('Êôö‰∏äÊïàÁéá‰∏çÈîôÔºåÈÄÇÂêàÂ≠¶‰π†ÂíåÊÄªÁªì');
            }

            // Âü∫‰∫é‰ªªÂä°ÂÅèÂ•ΩÁöÑÂª∫ËÆÆ
            if (preferredCategory === 'Â∑•‰Ωú') {
                suggestions.push('Â∑•‰ΩúÁ±ª‰ªªÂä°ÂÆåÊàêÂá∫Ëâ≤ÔºåÂèØ‰ª•ÈÄÇÂΩìÂ¢ûÂä†ÁîüÊ¥ªÂπ≥Ë°°');
            } else if (preferredCategory === 'Â≠¶‰π†') {
                suggestions.push('Â≠¶‰π†ÁßØÊûÅÊÄßÂæàÈ´òÔºåÁªßÁª≠‰øùÊåÅÊàêÈïøÂøÉÊÄÅ');
            }

            // Âü∫‰∫éÂæÖÂäûÊï∞ÈáèÁöÑÂª∫ËÆÆ
            if (pendingCount > 5) {
                suggestions.push('‰ªäÊó•‰ªªÂä°ËæÉÂ§öÔºåÂª∫ËÆÆ‰ºòÂÖàÂ§ÑÁêÜÈáçË¶Å‰∫ãÈ°π');
            } else if (pendingCount === 0) {
                suggestions.push('‰ªäÊó•‰ªªÂä°ÂÖ®ÈÉ®ÂÆåÊàêÔºÅÂ•ΩÂ•Ω‰ºëÊÅØ');
            }

            // Êõ¥Êñ∞Âª∫ËÆÆÊòæÁ§∫
            const suggestionsContainer = document.getElementById('suggestionsContainer');
            if (suggestionsContainer) {
                suggestionsContainer.innerHTML = suggestions.slice(0, 3).map(suggestion => 
                    `<div class="flex items-start space-x-2">
                        <span class="text-blue-500 mt-1">‚Ä¢</span>
                        <span class="text-sm text-gray-600">${suggestion}</span>
                    </div>`
                ).join('');
            }

            return suggestions.slice(0, 3); // ÊúÄÂ§öËøîÂõû3‰∏™Âª∫ËÆÆ
        }

        // Êõ¥Êñ∞Êô∫ËÉΩÂàÜÊûêUI
        function updateIntelligentAnalysisUI(analysis) {
            // Êõ¥Êñ∞‰ªäÊó•ÂÆåÊàêÊï∞
            const todayCompletedElement = document.getElementById('todayCompleted');
            if (todayCompletedElement) {
                todayCompletedElement.textContent = analysis.todayCompleted;
            }

            // Êõ¥Êñ∞ÂæÖÂäû‰ªªÂä°Êï∞
            const remainingTasksElement = document.getElementById('remainingTasks');
            if (remainingTasksElement) {
                remainingTasksElement.textContent = analysis.todayPending;
            }

            // Êõ¥Êñ∞ÂÆåÊàêÊïàÁéá
            const completionRateElement = document.getElementById('completionRate');
            if (completionRateElement) {
                completionRateElement.textContent = analysis.efficiency + '%';
            }
        }

        // ÈºìÂä±ÂäüËÉΩÂõûË∞É
        function generateEncouragement() {
            const situation = analyzeCurrentSituation();
            const encouragement = createEncouragementMessage(situation);
            updateEncouragementUI(encouragement);
        }

        // ÂàÜÊûêÂΩìÂâçÊÉÖÂÜµ
        function analyzeCurrentSituation() {
            const today = new Date();
            const todayTasks = tasks.filter(task => {
                const taskDate = new Date(task.startTime);
                return taskDate.toDateString() === today.toDateString();
            });

            const completedToday = todayTasks.filter(task => task.completed);
            const pendingToday = todayTasks.filter(task => !task.completed);
            const overdueTasks = tasks.filter(task => {
                return !task.completed && new Date(task.startTime) < today;
            });

            const currentHour = today.getHours();
            const timeOfDay = currentHour < 12 ? 'morning' : currentHour < 18 ? 'afternoon' : 'evening';

            return {
                completedCount: completedToday.length,
                pendingCount: pendingToday.length,
                overdueCount: overdueTasks.length,
                totalCount: todayTasks.length,
                timeOfDay,
                catMood: catMood
            };
        }

        // ÂàõÂª∫ÈºìÂä±‰ø°ÊÅØ
        function createEncouragementMessage(situation) {
            // ‰ΩøÁî®ÁøªËØëÁ≥ªÁªüËé∑ÂèñÊøÄÂä±Ê∂àÊÅØ
            const currentLang = i18n.getCurrentLanguage();
            
            if (!i18n.texts[currentLang] || !i18n.texts[currentLang].encouragement) {
                console.error('Encouragement texts not found for language:', currentLang);
                return 'ÁªßÁª≠Âä†Ê≤πÔºÅ';
            }
            
            const messages = i18n.texts[currentLang].encouragement;

            let level = 'medium';
            const completionRate = situation.totalCount > 0 ? situation.completedCount / situation.totalCount : 0;
            
            if (completionRate >= 0.8) level = 'high';
            else if (completionRate < 0.3) level = 'low';

            if (!messages[situation.timeOfDay] || !messages[situation.timeOfDay][level]) {
                console.error('Time messages not found for:', situation.timeOfDay, level);
                return 'ÁªßÁª≠Âä†Ê≤πÔºÅ';
            }

            const timeMessages = messages[situation.timeOfDay][level];
            const baseMessage = timeMessages[Math.floor(Math.random() * timeMessages.length)];

            // Ê†πÊçÆÁå´Âí™ÂøÉÊÉÖË∞ÉÊï¥ - ‰ΩøÁî®ÁøªËØëÁ≥ªÁªü
            const catMoodMessages = i18n.texts[currentLang].catMood;
            let catMessage = '';
            if (situation.catMood === 'ÂºÄÂøÉ') {
                catMessage = catMoodMessages.happy;
            } else if (situation.catMood === 'È••È•ø') {
                catMessage = catMoodMessages.hungry;
            } else if (situation.catMood === 'Âõ∞ÂÄ¶') {
                catMessage = catMoodMessages.sleepy;
            }

            // Ê†πÊçÆÂæÖÂäûÊï∞ÈáèÊ∑ªÂä†Âª∫ËÆÆ - ‰ΩøÁî®ÁøªËØëÁ≥ªÁªü
            const taskAdviceMessages = i18n.texts[currentLang].taskAdvice;
            let taskAdvice = '';
            if (situation.pendingCount > 5) {
                taskAdvice = taskAdviceMessages.tooMany;
            } else if (situation.overdueCount > 0) {
                taskAdvice = taskAdviceMessages.overdue;
            } else if (situation.pendingCount === 0) {
                taskAdvice = taskAdviceMessages.allDone;
            }

            return baseMessage + catMessage + taskAdvice;
        }

        // Êõ¥Êñ∞ÈºìÂä±UI
        function updateEncouragementUI(encouragement) {
            const encouragementMessageElement = document.getElementById('encouragementMessage');
            if (encouragementMessageElement) {
                encouragementMessageElement.textContent = encouragement;
            }
        }

        // ÂàùÂßãÂåñÁå´Âí™Âä©Êâã
        function initCatAssistant() {
            // ‰ªéÊú¨Âú∞Â≠òÂÇ®ÊÅ¢Â§çÊòæÁ§∫Áä∂ÊÄÅ
            catAssistantVisible = Storage.get('catAssistantVisible', true);
            
            // Ê†πÊçÆÁä∂ÊÄÅËÆæÁΩÆÊòæÁ§∫
            const catAssistantPanel = document.getElementById('catAssistantPanel');
            
            if (catAssistantPanel) {
                if (!catAssistantVisible) {
                    catAssistantPanel.classList.remove('show');
                } else {
                    catAssistantPanel.classList.add('show');
                }
            }
            
            // ÂàùÂßãÂåñÁå´Âí™Áä∂ÊÄÅ
            updateCatStatus();
            
            // Êõ¥Êñ∞ÁªüËÆ°‰ø°ÊÅØ
            updateCatStatistics();
            
            // Êõ¥Êñ∞Âª∫ËÆÆ
            updateCatSuggestions();
            
            // ÂàùÂßãÂåñÊô∫ËÉΩÂàÜÊûêÂíåÈºìÂä±ÂäüËÉΩ
            performIntelligentAnalysis();
            generateEncouragement();
            
            // ËÆæÁΩÆÂÆöÊó∂Êõ¥Êñ∞ - ‰ΩøÁî®Áªü‰∏ÄÁöÑÂÆöÊó∂Âô®ÁÆ°ÁêÜÂô®
            if (window.timerManager) {
                window.timerManager.setTimer('catStatus', () => {
                    updateCatStatus();
                    updateCatSuggestions();
                }, 30000); // ÊØè30ÁßíÊõ¥Êñ∞‰∏ÄÊ¨°
            } else {
                // Â§áÁî®ÊñπÊ°àÔºö‰ΩøÁî®‰º†ÁªüsetInterval
                setInterval(() => {
                    updateCatStatus();
                    updateCatSuggestions();
                }, 30000);
            }
            
            // Ê†áËÆ∞Áå´Âí™Âä©ÊâãÂ∑≤ÂàùÂßãÂåñ
            catAssistantInitialized = true;
        }

        // Ê≥®ÊÑèÔºöshowTutorial ÂáΩÊï∞Â∑≤Âú®Êñá‰ª∂ÂâçÈù¢ÂÆö‰πâÔºåËøôÈáåÂà†Èô§ÈáçÂ§çÂÆö‰πâ
        
        // Âà†Èô§‰ªªÂä°
        function deleteTask(taskId) {
            const taskIndex = tasks.findIndex(t => t.id === taskId);
            if (taskIndex !== -1) {
                const deletedTask = tasks.splice(taskIndex, 1)[0];
                saveTasks();
                // ‰ΩøÁî®Èò≤Êäñ‰ºòÂåñÊ∏≤Êüì
                debouncedRenderTasks();
                debouncedUpdateTaskStats();
                debouncedUpdateSmartSuggestions();
                debouncedUpdateCharts();
                debouncedUpdateQuickTodoList();
                
                showNotification('‰ªªÂä°Â∑≤Âà†Èô§', `Â∑≤Âà†Èô§‰ªªÂä°: ${deletedTask.title}`, 'info');
                return true;
            }
            return false;
        }
        
        // Ê∏ÖÈô§Â∑≤ÂÆåÊàê‰ªªÂä°
        function clearCompletedTasks() {
            const completedCount = tasks.filter(task => task.completed).length;
            if (completedCount === 0) {
                showNotification('Ê≤°ÊúâÂèØÊ∏ÖÈô§ÁöÑ‰ªªÂä°', 'ÂΩìÂâçÊ≤°ÊúâÂ∑≤ÂÆåÊàêÁöÑ‰ªªÂä°', 'info');
                return;
            }
            
            tasks = tasks.filter(task => !task.completed);
            saveTasks();
            // ‰ΩøÁî®Èò≤Êäñ‰ºòÂåñÊ∏≤Êüì
            debouncedRenderTasks();
            debouncedUpdateTaskStats();
            debouncedUpdateSmartSuggestions();
            debouncedUpdateCharts();
            debouncedUpdateQuickTodoList();
            
            showNotification('Â∑≤Ê∏ÖÈô§ÂÆåÊàê‰ªªÂä°', `Â∑≤Ê∏ÖÈô§${completedCount}‰∏™Â∑≤ÂÆåÊàê‰ªªÂä°`, 'success');
        }
        
        // ÊâìÂºÄ‰ªªÂä°ËØ¶ÊÉÖÊ®°ÊÄÅÊ°Ü
        // ÈÄöÁî®Ê®°ÊÄÅÊ°ÜÊéßÂà∂ÂáΩÊï∞
        function showModal(modalId, contentId = null) {
            const modal = document.getElementById(modalId);
            if (!modal) return;
            
            modal.classList.remove('hidden');
            
            if (contentId) {
                const modalContent = document.getElementById(contentId);
                if (modalContent) {
                    setTimeout(() => {
                        modalContent.classList.remove('scale-95', 'opacity-0');
                        modalContent.classList.add('scale-100', 'opacity-100');
                    }, 10);
                }
            }
        }
        
        function hideModal(modalId, contentId = null) {
            const modal = document.getElementById(modalId);
            if (!modal) return;
            
            if (contentId) {
                const modalContent = document.getElementById(contentId);
                if (modalContent) {
                    modalContent.classList.remove('scale-100', 'opacity-100');
                    modalContent.classList.add('scale-95', 'opacity-0');
                }
            }
            
            setTimeout(() => {
                modal.classList.add('hidden');
            }, contentId ? 300 : 0);
        }
        
        // ‰ªªÂä°ËØ¶ÊÉÖÊ®°ÊÄÅÊ°Ü
        function openTaskDetailModal(taskId) {
            const task = tasks.find(t => t.id === taskId);
            if (task) {
                currentTaskId = taskId;
                
                document.getElementById('task-title').value = task.title;
                document.getElementById('task-description').value = task.description || '';
                document.getElementById('task-start-time').value = task.startTime;
                document.getElementById('task-priority').value = task.priority;
                document.getElementById('task-completed').checked = task.completed;
                
                // ËÆæÁΩÆÊèêÈÜíÁõ∏ÂÖ≥Â≠óÊÆµ
                const reminderEnabled = document.getElementById('task-reminder-enabled');
                const reminderSettings = document.getElementById('reminder-settings');
                const reminderTime = document.getElementById('reminder-time');
                const reminderAdvance = document.getElementById('reminder-advance');
                
                if (task.reminderEnabled) {
                    reminderEnabled.checked = true;
                    reminderSettings.classList.remove('hidden');
                    reminderTime.value = task.reminderTime || '';
                    reminderAdvance.value = task.reminderAdvance || '5';
                } else {
                    reminderEnabled.checked = false;
                    reminderSettings.classList.add('hidden');
                    reminderTime.value = '';
                    reminderAdvance.value = '5';
                }
                
                showModal('task-detail-modal', 'modal-content');
            }
        }
        
        // ÂÖ≥Èó≠‰ªªÂä°ËØ¶ÊÉÖÊ®°ÊÄÅÊ°Ü
        function closeTaskDetailModal() {
            hideModal('task-detail-modal', 'modal-content');
            currentTaskId = null;
        }
        
        // ÊòæÁ§∫ÂÜ≤Á™ÅÊ®°ÊÄÅÊ°Ü
        function showConflictModal(conflictingTasks) {
            const listContainer = document.getElementById('conflicting-tasks-list');
            listContainer.innerHTML = '';
            
            conflictingTasks.forEach(task => {
                const taskEl = document.createElement('div');
                const startTime = new Date(task.startTime);
                const timeText = startTime.toLocaleString('zh-CN', { month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' });
                
                taskEl.className = 'p-3 bg-gray-50 rounded-xl border border-gray-100';
                taskEl.innerHTML = `
                    <h4 class="font-medium text-gray-800">${task.title}</h4>
                    <p class="text-sm text-gray-500 mt-1">Êó∂Èó¥: ${timeText}</p>
                `;
                
                listContainer.appendChild(taskEl);
            });
            
            showModal('conflict-modal', 'conflict-modal-content');
            
            // Ê∑ªÂä†EnterÈîÆÁõëÂê¨Âô®ÔºåËá™Âä®ÈÄâÊã©"Ëá™Âä®Ë∞ÉÊï¥Êó∂Èó¥"
            const handleEnterKey = (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    resolveConflict();
                }
            };
            
            // ÁªëÂÆö‰∫ã‰ª∂ÁõëÂê¨Âô®
            document.addEventListener('keydown', handleEnterKey);
            
            // ‰øùÂ≠ò‰∫ã‰ª∂ÁõëÂê¨Âô®ÂºïÁî®Ôºå‰ª•‰æøÂú®ÂÖ≥Èó≠Ê®°ÊÄÅÊ°ÜÊó∂ÁßªÈô§
            const modal = document.getElementById('conflict-modal');
            modal._handleEnterKey = handleEnterKey;
        }
        
        // ÂÖ≥Èó≠ÂÜ≤Á™ÅÊ®°ÊÄÅÊ°Ü
        function closeConflictModal() {
            hideModal('conflict-modal', 'conflict-modal-content');
            
            // ÁßªÈô§EnterÈîÆÁõëÂê¨Âô®
            const modal = document.getElementById('conflict-modal');
            if (modal._handleEnterKey) {
                document.removeEventListener('keydown', modal._handleEnterKey);
                delete modal._handleEnterKey;
            }
            
            taskToAdd = null;
        }
        
        // Ëá™Âä®Ëß£ÂÜ≥ÂÜ≤Á™Å
        function resolveConflict() {
            if (!taskToAdd) return;
            
            // ÁÆÄÂçïÁ≠ñÁï•ÔºöÂ∞ÜÊñ∞‰ªªÂä°ÂÆâÊéíÂú®ÂÜ≤Á™Å‰ªªÂä°‰πãÂêé30ÂàÜÈíü
            let newTaskStart = new Date(taskToAdd.startTime);
            
            // ÊâæÂà∞ÊúÄÊñ∞ÁöÑÂÜ≤Á™Å‰ªªÂä°ÂºÄÂßãÊó∂Èó¥
            const conflictingTasks = tasks.filter(task => {
                if (task.completed) return false;
                
                const existingStart = new Date(task.startTime);
                const timeDiff = Math.abs(newTaskStart - existingStart);
                
                return timeDiff < 30 * 60 * 1000; // 30ÂàÜÈíüÂÜÖÁÆóÂÜ≤Á™Å
            });
            
            if (conflictingTasks.length > 0) {
                const latestStartTime = new Date(Math.max(...conflictingTasks.map(task => {
                    return new Date(task.startTime).getTime();
                })));
                
                // ËÆæÁΩÆÊñ∞‰ªªÂä°ÂºÄÂßãÊó∂Èó¥‰∏∫ÊúÄÊñ∞ÂºÄÂßãÊó∂Èó¥Âêé30ÂàÜÈíü
                newTaskStart = new Date(latestStartTime.getTime() + 30 * 60 * 1000);
                taskToAdd.startTime = formatLocalDateTime(newTaskStart);
            }
            
            // Ê∑ªÂä†Ë∞ÉÊï¥ÂêéÁöÑ‰ªªÂä°
            addTask(taskToAdd);
            closeConflictModal();
            
            // Ê∏ÖÁ©∫ËæìÂÖ•Ê°Ü
            clearTaskInputs();
            
            showNotification('ÂÜ≤Á™ÅÂ∑≤Ëß£ÂÜ≥', '‰ªªÂä°Â∑≤Ëá™Âä®Ë∞ÉÊï¥Êó∂Èó¥Âπ∂Ê∑ªÂä†', 'success');
        }
        
        // ËÆæÁΩÆÂºπÁ™óÁõ∏ÂÖ≥ÂáΩÊï∞
        function openSettingsModal() {
            const modal = document.getElementById('settingsModal');
            const modalContent = document.getElementById('settingsModalContent');
            
            modal.classList.remove('hidden');
            setTimeout(() => {
                modalContent.classList.remove('scale-95', 'opacity-0');
                modalContent.classList.add('scale-100', 'opacity-100');
            }, 10);
            
            // Âä†ËΩΩËÆæÁΩÆÂà∞ÂºπÁ™óË°®Âçï
            loadSettingsToModal();
            
            // Ê∑ªÂä†ESCÈîÆÂÖ≥Èó≠ÂäüËÉΩ
            document.addEventListener('keydown', handleEscapeKey);
        }
        
        function closeSettingsModal() {
            const modal = document.getElementById('settingsModal');
            const modalContent = document.getElementById('settingsModalContent');
            
            modalContent.classList.remove('scale-100', 'opacity-100');
            modalContent.classList.add('scale-95', 'opacity-0');
            
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 300);
            
            // ÁßªÈô§ESCÈîÆÁõëÂê¨
            document.removeEventListener('keydown', handleEscapeKey);
        }
        
        function handleEscapeKey(e) {
            if (e.key === 'Escape') {
                closeSettingsModal();
            }
        }
        
        function loadSettingsToModal() {
            // Âä†ËΩΩËØ≠Ë®ÄËÆæÁΩÆ
            updateLanguageButtons(i18n.getCurrentLanguage());
            updateSettingsLanguageButtons(i18n.getCurrentLanguage());
            
            // ÁªëÂÆöËØ≠Ë®ÄÂàáÊç¢ÊåâÈíÆ‰∫ã‰ª∂
            const langZhBtn = document.getElementById('lang-zh-btn');
            const langEnBtn = document.getElementById('lang-en-btn');
            
            // ÁßªÈô§ÊóßÁöÑ‰∫ã‰ª∂ÁõëÂê¨Âô®ÔºàÈò≤Ê≠¢ÈáçÂ§çÁªëÂÆöÔºâ
            const newLangZhBtn = langZhBtn.cloneNode(true);
            const newLangEnBtn = langEnBtn.cloneNode(true);
            langZhBtn.parentNode.replaceChild(newLangZhBtn, langZhBtn);
            langEnBtn.parentNode.replaceChild(newLangEnBtn, langEnBtn);
            
            // Ê∑ªÂä†Êñ∞ÁöÑ‰∫ã‰ª∂ÁõëÂê¨Âô®
            newLangZhBtn.addEventListener('click', () => {
                i18n.switchLanguage('zh');
                updateLanguageButtons('zh');
                updateSettingsLanguageButtons('zh');
                const message = i18n.getCurrentLanguage() === 'zh' ? 'ËØ≠Ë®ÄÂ∑≤ÂàáÊç¢‰∏∫‰∏≠Êñá' : 'Language switched to Chinese';
                showNotification(message, 'success');
            });
            
            newLangEnBtn.addEventListener('click', () => {
                i18n.switchLanguage('en');
                updateLanguageButtons('en');
                updateSettingsLanguageButtons('en');
                const message = i18n.getCurrentLanguage() === 'zh' ? 'ËØ≠Ë®ÄÂ∑≤ÂàáÊç¢‰∏∫Ëã±Êñá' : 'Language switched to English';
                showNotification(message, 'success');
            });
            
            // Âä†ËΩΩÂ∑•‰ΩúÊó∂Èó¥
            const workHours = JSON.parse(localStorage.getItem('workHours') || '{"start": "09:00", "end": "18:00"}');
            document.getElementById('work-hours-start-modal').value = workHours.start;
            document.getElementById('work-hours-end-modal').value = workHours.end;
            
            // Âä†ËΩΩÁπÅÂøôÊó∂Èó¥ÊÆµ
            const busyTimes = JSON.parse(localStorage.getItem('busyTimes') || '[]');
            const busyTimeSlotsModal = document.getElementById('busy-time-slots-modal');
            busyTimeSlotsModal.innerHTML = '';
            
            busyTimes.forEach((busyTime, index) => {
                const busyTimeSlot = createBusyTimeSlotModal(busyTime.start, busyTime.end, busyTime.days, index);
                busyTimeSlotsModal.appendChild(busyTimeSlot);
            });
            
            // Âä†ËΩΩÊó∂Èó¥ÂÖ≥ÈîÆËØçËÆæÁΩÆ
            const timeKeywords = JSON.parse(localStorage.getItem('timeKeywords') || '{}');
            document.getElementById('morning-keywords-modal').value = timeKeywords.morning?.keywords || '';
            document.getElementById('morning-default-time-modal').value = timeKeywords.morning?.defaultTime || '09:00';
            document.getElementById('afternoon-keywords-modal').value = timeKeywords.afternoon?.keywords || '';
            document.getElementById('afternoon-default-time-modal').value = timeKeywords.afternoon?.defaultTime || '14:00';
            document.getElementById('evening-keywords-modal').value = timeKeywords.evening?.keywords || '';
            document.getElementById('evening-default-time-modal').value = timeKeywords.evening?.defaultTime || '19:00';
            
            // Âä†ËΩΩËá™ÂÆö‰πâÂÖ≥ÈîÆËØç
            const customKeywords = timeKeywords.custom || {};
            const customKeywordsText = Object.entries(customKeywords)
                .map(([keyword, time]) => `${keyword}=${time}`)
                .join('\n');
            document.getElementById('custom-keywords-modal').value = customKeywordsText;
            
            // Âä†ËΩΩÈÄöÁü•ËÆæÁΩÆ
            const notificationSettings = JSON.parse(localStorage.getItem('notificationSettings') || '{}');
            document.getElementById('notification-reminder-modal').checked = notificationSettings.reminder !== false;
            document.getElementById('notification-sound-modal').checked = notificationSettings.sound !== false;
            
            // Âä†ËΩΩËá™Âä®ÂøΩÁï•ÂÜ≤Á™ÅËÆæÁΩÆ
            const autoIgnoreConflicts = Storage.get('autoIgnoreConflicts', false);
            document.getElementById('auto-ignore-conflicts-modal').checked = autoIgnoreConflicts;
            
            // Êõ¥Êñ∞ÈÄöÁü•ÊùÉÈôêÁä∂ÊÄÅ
            updateNotificationStatusModal();
        }
        
        function createBusyTimeSlotModal(startTime = '09:00', endTime = '18:00', days = [1, 2, 3, 4, 5], index = null) {
            const busyTimeSlot = document.createElement('div');
            busyTimeSlot.className = 'flex items-center space-x-3 p-3 bg-gray-50 rounded-lg';
            
            const dayOptions = ['Âë®‰∏Ä', 'Âë®‰∫å', 'Âë®‰∏â', 'Âë®Âõõ', 'Âë®‰∫î', 'Âë®ÂÖ≠', 'Âë®Êó•'];
            const dayCheckboxes = dayOptions.map((day, i) => 
                `<label class="flex items-center">
                    <input type="checkbox" class="mr-1 rounded" value="${i}" ${days.includes(i) ? 'checked' : ''}>
                    <span class="text-sm">${day}</span>
                </label>`
            ).join('');
            
            busyTimeSlot.innerHTML = `
                <input type="time" class="px-3 py-2 rounded-lg border border-gray-300 text-sm" value="${startTime}" data-index="${index}" data-field="start">
                <span class="text-gray-500">Ëá≥</span>
                <input type="time" class="px-3 py-2 rounded-lg border border-gray-300 text-sm" value="${endTime}" data-index="${index}" data-field="end">
                <div class="flex flex-wrap gap-2">
                    ${dayCheckboxes}
                </div>
                <button class="ml-auto text-red-500 hover:text-red-700" onclick="removeBusyTimeSlotModal(this)">
                    <i class="fa fa-trash"></i>
                </button>
            `;
            
            return busyTimeSlot;
        }
        
        function removeBusyTimeSlotModal(button) {
            button.closest('.flex').remove();
        }
        
        function saveSettingsFromModal() {
            // ‰øùÂ≠òÂ∑•‰ΩúÊó∂Èó¥
            const workHours = {
                start: document.getElementById('work-hours-start-modal').value,
                end: document.getElementById('work-hours-end-modal').value
            };
            localStorage.setItem('workHours', JSON.stringify(workHours));
            
            // ‰øùÂ≠òÁπÅÂøôÊó∂Èó¥ÊÆµ
            const busyTimeSlots = document.querySelectorAll('#busy-time-slots-modal .flex');
            const busyTimes = [];
            busyTimeSlots.forEach(slot => {
                const startTime = slot.querySelector('input[data-field="start"]').value;
                const endTime = slot.querySelector('input[data-field="end"]').value;
                const dayCheckboxes = slot.querySelectorAll('input[type="checkbox"]:checked');
                const days = Array.from(dayCheckboxes).map(cb => parseInt(cb.value));
                busyTimes.push({ start: startTime, end: endTime, days });
            });
            localStorage.setItem('busyTimes', JSON.stringify(busyTimes));
            
            // ‰øùÂ≠òÊó∂Èó¥ÂÖ≥ÈîÆËØçËÆæÁΩÆ
            const timeKeywords = {
                morning: {
                    keywords: document.getElementById('morning-keywords-modal').value,
                    defaultTime: document.getElementById('morning-default-time-modal').value
                },
                afternoon: {
                    keywords: document.getElementById('afternoon-keywords-modal').value,
                    defaultTime: document.getElementById('afternoon-default-time-modal').value
                },
                evening: {
                    keywords: document.getElementById('evening-keywords-modal').value,
                    defaultTime: document.getElementById('evening-default-time-modal').value
                }
            };
            
            // Ëß£ÊûêËá™ÂÆö‰πâÂÖ≥ÈîÆËØç
            const customKeywordsText = document.getElementById('custom-keywords-modal').value;
            const customKeywords = {};
            customKeywordsText.split('\n').forEach(line => {
                const [keyword, time] = line.split('=');
                if (keyword && time) {
                    customKeywords[keyword.trim()] = time.trim();
                }
            });
            timeKeywords.custom = customKeywords;
            
            localStorage.setItem('timeKeywords', JSON.stringify(timeKeywords));
            
            // ‰øùÂ≠òÈÄöÁü•ËÆæÁΩÆ
            const notificationSettings = {
                reminder: document.getElementById('notification-reminder-modal').checked,
                sound: document.getElementById('notification-sound-modal').checked
            };
            localStorage.setItem('notificationSettings', JSON.stringify(notificationSettings));
            
            // ‰øùÂ≠òËá™Âä®ÂøΩÁï•ÂÜ≤Á™ÅËÆæÁΩÆ
            const autoIgnoreConflicts = document.getElementById('auto-ignore-conflicts-modal').checked;
            Storage.set('autoIgnoreConflicts', autoIgnoreConflicts);
            
            // ÂêåÊ≠•Âà∞‰æßËæπÊ†èÁöÑËÆæÁΩÆ
            document.getElementById('auto-ignore-conflicts').checked = autoIgnoreConflicts;
            
            showNotification('ËÆæÁΩÆÂ∑≤‰øùÂ≠ò', 'success');
            closeSettingsModal();
        }
        
        function updateNotificationStatusModal() {
            const statusElement = document.getElementById('notification-status-modal');
            if ('Notification' in window) {
                if (Notification.permission === 'granted') {
                    statusElement.className = 'w-2 h-2 rounded-full bg-green-500';
                } else if (Notification.permission === 'denied') {
                    statusElement.className = 'w-2 h-2 rounded-full bg-red-500';
                } else {
                    statusElement.className = 'w-2 h-2 rounded-full bg-yellow-500';
                }
            } else {
                statusElement.className = 'w-2 h-2 rounded-full bg-gray-400';
            }
        }

        // ÊòæÁ§∫ÈÄöÁü•
        function showNotification(title, message, type = 'info') {
            const notification = document.getElementById('notification');
            const icon = document.getElementById('notification-icon-i');
            const iconContainer = document.getElementById('notification-icon');
            
            // ËÆæÁΩÆÈÄöÁü•Á±ªÂûãÊ†∑Âºè
            iconContainer.className = 'flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center mr-3';
            if (type === 'success') {
                iconContainer.classList.add('bg-success');
                icon.className = 'fa fa-check text-white';
            } else if (type === 'error') {
                iconContainer.classList.add('bg-danger');
                icon.className = 'fa fa-times text-white';
            } else if (type === 'warning') {
                iconContainer.classList.add('bg-warning');
                icon.className = 'fa fa-exclamation text-white';
            } else {
                iconContainer.classList.add('bg-primary');
                icon.className = 'fa fa-info text-white';
            }
            
            // ËÆæÁΩÆÂÜÖÂÆπ
            document.getElementById('notification-title').textContent = title;
            document.getElementById('notification-message').textContent = message;
            
            // ÊòæÁ§∫ÈÄöÁü• - ‰ΩøÁî®Êõ¥‰∏çÂπ≤Êâ∞ÁöÑÊñπÂºè
            notification.classList.remove('translate-y-20', 'opacity-0');
            notification.classList.add('translate-y-0', 'opacity-90'); // Á®çÂæÆÈôç‰Ωé‰∏çÈÄèÊòéÂ∫¶
            
            // 3ÁßíÂêéËá™Âä®ÂÖ≥Èó≠
            setTimeout(() => {
                closeNotification();
            }, 3000);
        }
        
        // ÂÖ≥Èó≠ÈÄöÁü•
        function closeNotification() {
            const notification = document.getElementById('notification');
            notification.classList.remove('translate-y-0', 'opacity-100');
            notification.classList.add('translate-y-20', 'opacity-0');
        }
        
        // ÂÖ®Êñ∞ËèúÂçïÁ≥ªÁªü - ÂÆåÂÖ®ÈáçÊûÑÁâàÊú¨
        class MenuManager {
            constructor() {
                this.userDropdown = null;
                this.featurePanel = null;
                this.panelBackdrop = null;
                this.isInitialized = false;
                this.currentPanel = null;
                this.currentNavigation = 'home';
            }
            
            // ÂàùÂßãÂåñËèúÂçïÁ≥ªÁªü
            init() {
                if (this.isInitialized) return;
                
                // Ëé∑ÂèñDOMÂÖÉÁ¥†
                this.userDropdown = document.getElementById('user-dropdown');
                this.featurePanel = document.getElementById('feature-panel');
                
                // ÂàõÂª∫ËÉåÊôØÈÅÆÁΩ©
                this.createBackdrops();
                
                // ÁªëÂÆöÊâÄÊúâ‰∫ã‰ª∂
                this.bindEvents();
                
                // ÂàùÂßãÂåñÂÆåÊàê
                this.isInitialized = true;
            }
            
            // ÂàõÂª∫ËÉåÊôØÈÅÆÁΩ©
            createBackdrops() {
                // Èù¢ÊùøËÉåÊôØÈÅÆÁΩ©
                if (!this.panelBackdrop) {
                    this.panelBackdrop = document.createElement('div');
                    this.panelBackdrop.id = 'panel-backdrop';
                    this.panelBackdrop.className = 'fixed inset-0 bg-black bg-opacity-30 z-[45] hidden transition-opacity duration-300';
                    this.panelBackdrop.addEventListener('click', () => {
                        this.closeCurrentPanel();
                    });
                    document.body.appendChild(this.panelBackdrop);
                }
            }
            
            // ÁªëÂÆöÊâÄÊúâ‰∫ã‰ª∂
            bindEvents() {
                // Áî®Êà∑ËèúÂçïÊåâÈíÆ
                this.bindUserMenu();
                
                // È°∂ÈÉ®ÊåâÈíÆÔºàÁªüËÆ°„ÄÅÂª∫ËÆÆ„ÄÅËÆæÁΩÆÔºâ
                this.bindTopButtons();
                
                // ÂÖ≥Èó≠ÊåâÈíÆ
                this.bindCloseButtons();
                
                // ÂÖ®Â±ÄÁÇπÂáª‰∫ã‰ª∂
                this.bindGlobalEvents();
            }
            
            // ÁªëÂÆöÁî®Êà∑ËèúÂçï
            bindUserMenu() {
                const userMenuBtn = document.getElementById('user-menu-btn');
                if (userMenuBtn) {
                    userMenuBtn.addEventListener('click', (e) => {
                        e.preventDefault();
                        e.stopPropagation();
                        this.toggleUserDropdown();
                    });
                }
            }
            
            // ÁªëÂÆöÈ°∂ÈÉ®ÊåâÈíÆ
            bindTopButtons() {
                // ÁªüËÆ°ÊåâÈíÆ
                const statsBtn = document.getElementById('stats-btn');
                if (statsBtn) {
                    statsBtn.addEventListener('click', (e) => {
                        e.preventDefault();
                        e.stopPropagation();
                        this.openPanel('stats-panel', '‰ªªÂä°ÁªüËÆ°');
                    });
                }
                
                // Âª∫ËÆÆÊåâÈíÆ
                const suggestionsBtn = document.getElementById('suggestions-btn');
                if (suggestionsBtn) {
                    suggestionsBtn.addEventListener('click', (e) => {
                        e.preventDefault();
                        e.stopPropagation();
                        this.openPanel('suggestions-panel', 'Êó∂Èó¥Âª∫ËÆÆ');
                    });
                }
                
                // ËÆæÁΩÆÊåâÈíÆ
                const settingsBtn = document.getElementById('settings-btn');
                if (settingsBtn) {
                    settingsBtn.addEventListener('click', (e) => {
                        e.preventDefault();
                        e.stopPropagation();
                        openSettingsModal();
                    });
                }
            }
            
            // ÁªëÂÆöÂÖ≥Èó≠ÊåâÈíÆ
            bindCloseButtons() {
                // Èù¢ÊùøÂÖ≥Èó≠ÊåâÈíÆ
                const closePanelBtn = document.getElementById('close-panel-btn');
                if (closePanelBtn) {
                    closePanelBtn.addEventListener('click', (e) => {
                        e.preventDefault();
                        e.stopPropagation();
                        this.closeCurrentPanel();
                    });
                }
            }
            
            // ÁªëÂÆöÂÖ®Â±Ä‰∫ã‰ª∂
            bindGlobalEvents() {
                // ÁÇπÂáªÂ§ñÈÉ®ÂÖ≥Èó≠ËèúÂçï
                document.addEventListener('click', (e) => {
                    // ÂÖ≥Èó≠Áî®Êà∑‰∏ãÊãâËèúÂçï
                    if (this.userDropdown && !this.userDropdown.classList.contains('hidden')) {
                        const userBtn = document.getElementById('user-menu-btn');
                        if (!this.userDropdown.contains(e.target) && !userBtn.contains(e.target)) {
                            this.closeUserDropdown();
                        }
                    }
                });
                
                // ESCÈîÆÂÖ≥Èó≠ÂΩìÂâçÈù¢Êùø
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') {
                        this.closeCurrentPanel();
                    }
                });
            }
            
            // Êõ¥Êñ∞ÂØºËà™ÊåâÈíÆÊ¥ªÂä®Áä∂ÊÄÅ
            updateActiveNavigation(activeType) {
                this.currentNavigation = activeType;
                
                // Êõ¥Êñ∞ÂØºËà™ÊåâÈíÆÊ†∑Âºè
                const navButtons = document.querySelectorAll('.nav-btn');
                navButtons.forEach(btn => {
                    btn.classList.remove('bg-purple-50', 'border-purple-300', 'shadow-md');
                    btn.classList.add('bg-white', 'border-gray-200');
                });
                
                // È´ò‰∫ÆÂΩìÂâçÂØºËà™ÊåâÈíÆ
                const activeButton = document.querySelector(`[onclick="showNavigation('${activeType}')"]`);
                if (activeButton) {
                    activeButton.classList.remove('bg-white', 'border-gray-200');
                    activeButton.classList.add('bg-purple-50', 'border-purple-300', 'shadow-md');
                }
            }
            
            // ÂàáÊç¢Áî®Êà∑‰∏ãÊãâËèúÂçï
            toggleUserDropdown() {
                if (!this.userDropdown) return;
                
                const isHidden = this.userDropdown.classList.contains('hidden');
                
                // ÂÖ≥Èó≠ÂÖ∂‰ªñËèúÂçï
                this.closeCurrentPanel();
                
                if (isHidden) {
                    this.userDropdown.classList.remove('hidden');
                    this.userDropdown.classList.add('animate-fade-in');
                } else {
                    this.closeUserDropdown();
                }
            }
            
            // ÂÖ≥Èó≠Áî®Êà∑‰∏ãÊãâËèúÂçï
            closeUserDropdown() {
                if (!this.userDropdown) return;
                
                this.userDropdown.classList.add('hidden');
                this.userDropdown.classList.remove('animate-fade-in');
            }
            
            // ÊâìÂºÄÈù¢Êùø - Áªü‰∏ÄÈù¢ÊùøÁÆ°ÁêÜ
            openPanel(panelId, title) {
                if (!this.featurePanel) {
                    return;
                }
                
                // ËÆ∞ÂΩïÂΩìÂâçÈù¢Êùø
                this.currentPanel = panelId;
                
                // ÈöêËóèÊâÄÊúâÈù¢ÊùøÂÜÖÂÆπ
                const panels = ['stats-panel', 'suggestions-panel', 'todo-panel', 'settings-panel'];
                panels.forEach(panel => {
                    const panelElement = document.getElementById(panel);
                    if (panelElement) {
                        panelElement.classList.add('hidden');
                    }
                });
                
                // ÈöêËóè‰∏ªÂÜÖÂÆπÂå∫Âüü
                const mainContent = document.querySelector('main');
                if (mainContent) {
                    mainContent.classList.add('hidden');
                }
                
                // ÊòæÁ§∫ÁõÆÊ†áÈù¢Êùø
                const targetPanel = document.getElementById(panelId);
                if (targetPanel) {
                    targetPanel.classList.remove('hidden');
                    
                    // ÂàùÂßãÂåñÈù¢ÊùøÂÜÖÂÆπ
                    this.initializePanel(panelId);
                }
                
                // Êõ¥Êñ∞Èù¢ÊùøÊ†áÈ¢ò
                const panelTitle = document.getElementById('panel-title');
                if (panelTitle) {
                    panelTitle.textContent = title;
                }
                
                // ÊòæÁ§∫ÂäüËÉΩÈù¢Êùø
                this.featurePanel.classList.remove('translate-x-full', 'hidden');
                this.featurePanel.classList.add('z-[50]');
                
                // ÊòæÁ§∫ËÉåÊôØÈÅÆÁΩ©
                this.showPanelBackdrop();
            }
            
            // ÂàùÂßãÂåñÈù¢ÊùøÂÜÖÂÆπ
            initializePanel(panelId) {
                switch (panelId) {
                    case 'todo-panel':
                        if (typeof renderTodoList === 'function') {
                            renderTodoList();
                        }
                        break;
                    case 'suggestions-panel':
                        if (typeof updateSmartSuggestions === 'function') {
                            updateSmartSuggestions();
                        }
                        break;
                    case 'settings-panel':
                        if (typeof loadSettingsConfig === 'function') {
                            loadSettingsConfig();
                        }
                        // ÁªëÂÆöÊï∞ÊçÆÁÆ°ÁêÜÊåâÈíÆ‰∫ã‰ª∂
                        if (typeof bindSettingsModalEvents === 'function') {
                            setTimeout(() => {
                                bindSettingsModalEvents();
                            }, 100);
                        }
                        break;
                    case 'stats-panel':
                        if (typeof updateSmartSummary === 'function') {
                            updateSmartSummary();
                        }
                        if (typeof updateCharts === 'function') {
                            updateCharts();
                        }
                        if (typeof showCompletedTasksHistory === 'function') {
                            showCompletedTasksHistory('all');
                        }
                        break;
                }
            }
            
            // ÂÖ≥Èó≠ÂΩìÂâçÈù¢Êùø
            closeCurrentPanel() {
                if (!this.featurePanel) return;
                
                // ÈöêËóèÂäüËÉΩÈù¢Êùø
                this.featurePanel.classList.add('translate-x-full');
                this.featurePanel.classList.remove('z-[50]');
                
                // ÊòæÁ§∫‰∏ªÂÜÖÂÆπÂå∫Âüü
                const mainContent = document.querySelector('main');
                if (mainContent) {
                    mainContent.classList.remove('hidden');
                }
                
                // ÈöêËóèËÉåÊôØÈÅÆÁΩ©
                this.hidePanelBackdrop();
                
                // Ê∏ÖÈô§ÂΩìÂâçÈù¢ÊùøËÆ∞ÂΩï
                this.currentPanel = null;
            }
            
            // ÊòæÁ§∫Èù¢ÊùøËÉåÊôØÈÅÆÁΩ©
            showPanelBackdrop() {
                if (this.panelBackdrop) {
                    this.panelBackdrop.classList.remove('hidden');
                    setTimeout(() => {
                        this.panelBackdrop.classList.add('opacity-100');
                    }, 10);
                }
                
                // Á¶ÅÊ≠¢ËÉåÊôØÈ°µÈù¢ÊªöÂä®
                document.body.style.overflow = 'hidden';
            }
            
            // ÈöêËóèÈù¢ÊùøËÉåÊôØÈÅÆÁΩ©
            hidePanelBackdrop() {
                if (this.panelBackdrop) {
                    this.panelBackdrop.classList.remove('opacity-100');
                    setTimeout(() => {
                        this.panelBackdrop.classList.add('hidden');
                    }, 300);
                }
                
                // ÊÅ¢Â§çËÉåÊôØÈ°µÈù¢ÊªöÂä®
                document.body.style.overflow = '';
            }
            
            // ÂÖ≥Èó≠ÊâÄÊúâËèúÂçï
            closeAllMenus() {
                this.closeSidebar();
                this.closeUserDropdown();
                this.closeCurrentPanel();
            }
        }
        
        // ÂàõÂª∫ÂÖ®Â±ÄËèúÂçïÁÆ°ÁêÜÂô®ÂÆû‰æã
        const menuManager = new MenuManager();
        
        // ÂÖºÂÆπÊÄßÂáΩÊï∞ - ‰øùÊåÅÂêëÂêéÂÖºÂÆπ
        function toggleSidebar() {
            menuManager.toggleSidebar();
        }
        
        function toggleUserDropdown() {
            menuManager.toggleUserDropdown();
        }
        
        function showFeaturePanel(panelId, title) {
            menuManager.showFeaturePanel(panelId, title);
        }
        
        function closeFeaturePanel() {
            menuManager.closeFeaturePanel();
        }
        
        // ÂàùÂßãÂåñ‰∫ã‰ª∂ÁõëÂê¨ - ÁÆÄÂåñÁâàÊú¨ÔºàËèúÂçï‰∫ã‰ª∂Â∑≤Áî±MenuManagerÂ§ÑÁêÜÔºâ
        function initEventListeners() {
            // Âè≥‰∏äËßíÊåâÈíÆ‰∫ã‰ª∂Â∑≤Áî±MenuManagerÁöÑbindTopButtonsÊñπÊ≥ïÂ§ÑÁêÜÔºåËøôÈáå‰∏çÂÜçÈáçÂ§çÁªëÂÆö
            
            // Áî®Êà∑ËèúÂçïÁõ∏ÂÖ≥
            document.getElementById('edit-username-btn').addEventListener('click', showEditUsernameModal);
            document.getElementById('logout-btn').addEventListener('click', handleLogout);
            
            // ÁºñËæëÂßìÂêçÊ®°ÊÄÅÊ°Ü
            document.getElementById('close-edit-username-btn').addEventListener('click', closeEditUsernameModal);
            document.getElementById('cancel-edit-username-btn').addEventListener('click', closeEditUsernameModal);
            document.getElementById('edit-username-form').addEventListener('submit', saveUsername);
            
            // Ê∑ªÂä†‰ªªÂä°ÊåâÈíÆ
            domCache.addTaskBtn.addEventListener('click', () => {
                addTaskFromInput(domCache.taskInput);
            });
            
            domCache.addTaskBtnWithTasks.addEventListener('click', () => {
                addTaskFromInput(domCache.taskInputWithTasks);
            });
            
            // ËæìÂÖ•Ê°ÜÂõûËΩ¶Êèê‰∫§
            domCache.taskInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    addTaskFromInput(e.target);
                }
            });
            
            domCache.taskInputWithTasks.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    addTaskFromInput(e.target);
                }
            });
            
            // ‰ºòÂÖàÁ∫ßÂàáÊç¢ÂºÄÂÖ≥ÂäüËÉΩ
            const priorityButtons = document.querySelectorAll('.priority-btn');
            const todoPrioritySelect = document.getElementById('todo-priority');
            
            priorityButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    const priority = btn.dataset.priority;
                    
                    // Êõ¥Êñ∞ÊåâÈíÆÊ†∑Âºè
                    priorityButtons.forEach(b => {
                        b.classList.remove('bg-primary', 'text-white');
                        b.classList.add('text-gray-600', 'hover:text-gray-800');
                    });
                    btn.classList.remove('text-gray-600', 'hover:text-gray-800');
                    btn.classList.add('bg-primary', 'text-white');
                    
                    // Êõ¥Êñ∞ÈöêËóèÁöÑÈÄâÊã©Âô®
                    todoPrioritySelect.value = priority;
                    
                    // Ê∑ªÂä†ÁÇπÂáªÂä®Áîª
                    btn.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        btn.style.transform = 'scale(1)';
                    }, 100);
                });
            });
            
            // ‰ªªÂä°ËØ¶ÊÉÖË°®ÂçïÊèê‰∫§
            domCache.taskDetailForm.addEventListener('submit', (e) => {
                e.preventDefault();
                
                if (currentTaskId) {
                    const task = tasks.find(t => t.id === currentTaskId);
                    if (task) {
                        const oldTitle = task.title;
                        
                        task.title = document.getElementById('task-title').value;
                        task.description = document.getElementById('task-description').value;
                        task.startTime = document.getElementById('task-start-time').value;
                        task.priority = document.getElementById('task-priority').value;
                        task.completed = document.getElementById('task-completed').checked;
                        
                        // ‰øùÂ≠òÊèêÈÜíËÆæÁΩÆ
                        const reminderEnabled = document.getElementById('task-reminder-enabled').checked;
                        task.reminderEnabled = reminderEnabled;
                        
                        if (reminderEnabled) {
                            task.reminderTime = document.getElementById('reminder-time').value;
                            task.reminderAdvance = document.getElementById('reminder-advance').value;
                            
                            // ÈáçÊñ∞ÂÆâÊéíÊèêÈÜí
                            scheduleTaskReminder(currentTaskId);
                        } else {
                            // ÂèñÊ∂àÊèêÈÜí
                            cancelTaskReminder(currentTaskId);
                            delete task.reminderTime;
                            delete task.reminderAdvance;
                        }
                        
                        saveTasks();
                        renderTasks();
                        updateTaskStats();
                        updateSmartSuggestions();
                        updateCharts();
                        
                        showNotification('‰ªªÂä°Â∑≤Êõ¥Êñ∞', `Â∑≤Êõ¥Êñ∞‰ªªÂä°: ${oldTitle}`, 'success');
                        closeTaskDetailModal();
                    }
                }
            });
            
            // ÂÖ≥Èó≠‰ªªÂä°ËØ¶ÊÉÖÊ®°ÊÄÅÊ°Ü
            document.getElementById('close-modal-btn').addEventListener('click', closeTaskDetailModal);
            
            // ÊèêÈÜíÂºÄÂÖ≥ÂàáÊç¢
            document.getElementById('task-reminder-enabled').addEventListener('change', (e) => {
                const reminderSettings = document.getElementById('reminder-settings');
                if (e.target.checked) {
                    reminderSettings.classList.remove('hidden');
                    // ËÆæÁΩÆÈªòËÆ§ÊèêÈÜíÊó∂Èó¥‰∏∫‰ªªÂä°ÂºÄÂßãÊó∂Èó¥
                    const taskStartTime = document.getElementById('task-start-time').value;
                    if (taskStartTime && !document.getElementById('reminder-time').value) {
                        document.getElementById('reminder-time').value = taskStartTime;
                    }
                } else {
                    reminderSettings.classList.add('hidden');
                }
            });
            
            // ÊèêÈÜíÊó∂Èó¥ÂèòÂåñÊó∂Ëá™Âä®ËÆæÁΩÆÊèêÂâçÊèêÈÜí
            document.getElementById('reminder-time').addEventListener('change', (e) => {
                const reminderTime = e.target.value;
                const taskStartTime = document.getElementById('task-start-time').value;
                
                if (reminderTime && taskStartTime) {
                    // ËÆ°ÁÆóÊó∂Èó¥Â∑ÆÔºåËÆæÁΩÆÂêàÈÄÇÁöÑÊèêÂâçÊèêÈÜíÊó∂Èó¥
                    const reminderDate = new Date(reminderTime);
                    const taskStartDate = new Date(taskStartTime);
                    const diffMinutes = (taskStartDate - reminderDate) / (1000 * 60);
                    
                    // Ê†πÊçÆÊó∂Èó¥Â∑ÆËÆæÁΩÆÈªòËÆ§ÊèêÂâçÊèêÈÜíÈÄâÈ°π
                    let defaultAdvance = '5'; // ÈªòËÆ§5ÂàÜÈíü
                    if (diffMinutes >= 1440) {
                        defaultAdvance = '1440'; // 1Â§©
                    } else if (diffMinutes >= 60) {
                        defaultAdvance = '60'; // 1Â∞èÊó∂
                    } else if (diffMinutes >= 30) {
                        defaultAdvance = '30'; // 30ÂàÜÈíü
                    } else if (diffMinutes >= 15) {
                        defaultAdvance = '15'; // 15ÂàÜÈíü
                    } else if (diffMinutes >= 10) {
                        defaultAdvance = '10'; // 10ÂàÜÈíü
                    }
                    
                    document.getElementById('reminder-advance').value = defaultAdvance;
                }
            });
            
            // Âà†Èô§‰ªªÂä°ÊåâÈíÆ
            document.getElementById('delete-task-btn').addEventListener('click', () => {
                if (currentTaskId) {
                    deleteTask(currentTaskId);
                    currentTaskId = null;
                    closeTaskDetailModal();
                }
            });
            
            // ÂÖ≥Èó≠Âà†Èô§Á°ÆËÆ§Ê®°ÊÄÅÊ°Ü
            document.getElementById('close-delete-modal-btn').addEventListener('click', () => {
                const modalContent = document.getElementById('delete-modal-content');
                modalContent.classList.remove('scale-100', 'opacity-100');
                modalContent.classList.add('scale-95', 'opacity-0');
                
                setTimeout(() => {
                    document.getElementById('delete-confirm-modal').classList.add('hidden');
                }, 300);
            });
            
            // ÂèñÊ∂àÂà†Èô§
            document.getElementById('cancel-delete-btn').addEventListener('click', () => {
                document.getElementById('close-delete-modal-btn').click();
            });
            
            // Á°ÆËÆ§Âà†Èô§
            document.getElementById('confirm-delete-btn').addEventListener('click', () => {
                if (currentTaskId) {
                    deleteTask(currentTaskId);
                    currentTaskId = null;
                }
                
                document.getElementById('close-delete-modal-btn').click();
            });
            
            // Ê∏ÖÈô§Â∑≤ÂÆåÊàê‰ªªÂä°ÊåâÈíÆ
        const clearCompletedBtn = document.getElementById('clear-completed-btn');
        if (clearCompletedBtn) {
            clearCompletedBtn.addEventListener('click', clearCompletedTasks);
        }
        
        // ËèúÂçï‰∏≠ÁöÑÊ∏ÖÈô§Â∑≤ÂÆåÊàê‰ªªÂä°ÊåâÈíÆ
        const menuClearCompletedBtn = document.getElementById('menu-clear-completed-btn');
        if (menuClearCompletedBtn) {
            menuClearCompletedBtn.addEventListener('click', clearCompletedTasks);
        }
            
            // ÂÜ≤Á™ÅÊ®°ÊÄÅÊ°ÜÊåâÈíÆ
            document.getElementById('close-conflict-modal-btn').addEventListener('click', closeConflictModal);
            document.getElementById('resolve-conflict-btn').addEventListener('click', resolveConflict);
            document.getElementById('ignore-conflict-btn').addEventListener('click', () => {
                if (taskToAdd) {
                    addTaskWithoutConflictCheck(taskToAdd);
                }
                closeConflictModal();
            });
            
            // ÂÖ≥Èó≠ÈÄöÁü•
            document.getElementById('close-notification').addEventListener('click', closeNotification);
            
            // Âä†ËΩΩËÆæÁΩÆÈÖçÁΩÆ
            function loadSettingsConfig() {
                // Âä†ËΩΩÂ∑•‰ΩúÊó∂Èó¥
                const workHours = Storage.get('workHours', {});
                if (workHours.start) {
                    document.getElementById('work-hours-start').value = workHours.start;
                }
                if (workHours.end) {
                    document.getElementById('work-hours-end').value = workHours.end;
                }
                
                // Âä†ËΩΩÁπÅÂøôÊó∂Èó¥ÊÆµ
                const busyTimeSlots = Storage.get('busyTimeSlots', []);
                renderBusyTimeSlots(busyTimeSlots);
                
                // Âä†ËΩΩÊó∂Èó¥ÂÖ≥ÈîÆËØçÈÖçÁΩÆ
                const timeKeywordsConfig = Storage.get('timeKeywordsConfig', {});
                
                if (timeKeywordsConfig.morning) {
                    document.getElementById('morning-keywords').value = timeKeywordsConfig.morning.keywords.join(', ');
                    document.getElementById('morning-default-time').value = timeKeywordsConfig.morning.defaultTime;
                }
                
                if (timeKeywordsConfig.afternoon) {
                    document.getElementById('afternoon-keywords').value = timeKeywordsConfig.afternoon.keywords.join(', ');
                    document.getElementById('afternoon-default-time').value = timeKeywordsConfig.afternoon.defaultTime;
                }
                
                if (timeKeywordsConfig.evening) {
                    document.getElementById('evening-keywords').value = timeKeywordsConfig.evening.keywords.join(', ');
                    document.getElementById('evening-default-time').value = timeKeywordsConfig.evening.defaultTime;
                }
                
                if (timeKeywordsConfig.custom) {
                    const customLines = Object.entries(timeKeywordsConfig.custom)
                        .map(([keyword, time]) => `${keyword}=${time}`)
                        .join('\n');
                    document.getElementById('custom-keywords').value = customLines;
                }
                
                // Âä†ËΩΩËá™Âä®ÂøΩÁï•ÂÜ≤Á™ÅËÆæÁΩÆ
                const autoIgnoreConflicts = Storage.get('autoIgnoreConflicts', false);
                document.getElementById('auto-ignore-conflicts').checked = autoIgnoreConflicts;
            }
            
            // ‰øùÂ≠òËÆæÁΩÆ
            document.getElementById('save-settings-btn').addEventListener('click', () => {
                // ‰øùÂ≠òÂ∑•‰ΩúÊó∂Èó¥ËÆæÁΩÆ
                const workHoursStart = document.getElementById('work-hours-start').value;
                const workHoursEnd = document.getElementById('work-hours-end').value;
                
                // ‰øùÂ≠òÁπÅÂøôÊó∂Èó¥ÊÆµËÆæÁΩÆ
                const busyTimeSlots = [];
                const busySlotElements = document.querySelectorAll('.busy-time-slot');
                busySlotElements.forEach(element => {
                    const startTime = element.querySelector('.busy-start-time').value;
                    const endTime = element.querySelector('.busy-end-time').value;
                    const days = Array.from(element.querySelectorAll('.busy-day-checkbox:checked'))
                        .map(cb => cb.value);
                    
                    if (startTime && endTime && days.length > 0) {
                        busyTimeSlots.push({
                            startTime,
                            endTime,
                            days
                        });
                    }
                });
                
                // ‰øùÂ≠òÊó∂Èó¥ÂÖ≥ÈîÆËØçËÆæÁΩÆ
                const timeKeywordsConfig = {
                    morning: {
                        keywords: document.getElementById('morning-keywords').value.split(',').map(k => k.trim()).filter(k => k),
                        defaultTime: document.getElementById('morning-default-time').value
                    },
                    afternoon: {
                        keywords: document.getElementById('afternoon-keywords').value.split(',').map(k => k.trim()).filter(k => k),
                        defaultTime: document.getElementById('afternoon-default-time').value
                    },
                    evening: {
                        keywords: document.getElementById('evening-keywords').value.split(',').map(k => k.trim()).filter(k => k),
                        defaultTime: document.getElementById('evening-default-time').value
                    },
                    custom: {}
                };
                
                // Ëß£ÊûêËá™ÂÆö‰πâÂÖ≥ÈîÆËØç
                const customKeywordsText = document.getElementById('custom-keywords').value.trim();
                if (customKeywordsText) {
                    const lines = customKeywordsText.split('\n');
                    lines.forEach(line => {
                        const [keyword, time] = line.split('=').map(s => s.trim());
                        if (keyword && time) {
                            timeKeywordsConfig.custom[keyword] = time;
                        }
                    });
                }
                
                // ‰øùÂ≠òËá™Âä®ÂøΩÁï•ÂÜ≤Á™ÅËÆæÁΩÆ
                const autoIgnoreConflicts = document.getElementById('auto-ignore-conflicts').checked;
                
                // ‰øùÂ≠òÂà∞localStorage
                Storage.set('workHours', {
                    start: workHoursStart,
                    end: workHoursEnd
                });
                Storage.set('busyTimeSlots', busyTimeSlots);
                Storage.set('timeKeywordsConfig', timeKeywordsConfig);
                Storage.set('autoIgnoreConflicts', autoIgnoreConflicts);
                
                // ÊòæÁ§∫ÈÄöÁü•
                showNotification('ËÆæÁΩÆÂ∑≤‰øùÂ≠ò', '‰Ω†ÁöÑËÆæÁΩÆÂ∑≤Êõ¥Êñ∞', 'success');
                closeFeaturePanel();
            });
            
            // Âà†Èô§ÈÄæÊúü‰ªªÂä°ÊåâÈíÆ
            document.getElementById('delete-overdue-tasks-btn').addEventListener('click', () => {
                deleteOverdueTasks();
            });
            
            // Ê∏ÖÁêÜÂ∑≤ÂÆåÊàê‰ªªÂä°ÊåâÈíÆ
            document.getElementById('clear-completed-tasks-btn').addEventListener('click', () => {
                const completedTasks = taskManager.tasks.filter(task => task.completed);
                if (completedTasks.length === 0) {
                    showNotification('Ê≤°ÊúâÂ∑≤ÂÆåÊàê‰ªªÂä°', 'ÂΩìÂâçÊ≤°ÊúâÂ∑≤ÂÆåÊàêÁöÑ‰ªªÂä°ÈúÄË¶ÅÊ∏ÖÁêÜ', 'info');
                    return;
                }
                
                CustomDialog.confirm({
                    title: 'Ê∏ÖÁêÜÂ∑≤ÂÆåÊàê‰ªªÂä°',
                    message: `Á°ÆÂÆöË¶ÅÊ∏ÖÁêÜÊâÄÊúâÂ∑≤ÂÆåÊàêÁöÑ‰ªªÂä°ÂêóÔºüÊ≠§Êìç‰ΩúÊó†Ê≥ïÊí§ÈîÄ„ÄÇ`,
                    details: `Â∞ÜÂà†Èô§ ${completedTasks.length} ‰∏™Â∑≤ÂÆåÊàêÁöÑ‰ªªÂä°`,
                    type: 'warning',
                    okText: 'Á°ÆËÆ§Ê∏ÖÁêÜ',
                    cancelText: 'ÂèñÊ∂à'
                }).then(confirmed => {
                    if (confirmed) {
                        completedTasks.forEach(task => {
                            taskManager.deleteTask(task.id);
                        });
                        
                        renderTasks();
                        updateTaskStats();
                        showNotification('Ê∏ÖÁêÜÂÆåÊàê', `Â∑≤Âà†Èô§ ${completedTasks.length} ‰∏™Â∑≤ÂÆåÊàêÁöÑ‰ªªÂä°`, 'success');
                    }
                });
            });
            
            // ÈÄöÁü•ÊùÉÈôêËØ∑Ê±ÇÊåâÈíÆ
            document.getElementById('request-notification-permission').addEventListener('click', async () => {
                const permission = await Notification.requestPermission();
                updateNotificationStatus();
                
                if (permission === 'granted') {
                    showNotification('ÈÄöÁü•ÊùÉÈôêÂ∑≤Êéà‰∫à', '‰Ω†Áé∞Âú®ÂèØ‰ª•Êé•Êî∂‰ªªÂä°ÊèêÈÜíÈÄöÁü•‰∫Ü', 'success');
                } else if (permission === 'denied') {
                    showNotification('ÈÄöÁü•ÊùÉÈôêË¢´ÊãíÁªù', 'ËØ∑Âú®ÊµèËßàÂô®ËÆæÁΩÆ‰∏≠ÂÖÅËÆ∏ÈÄöÁü•‰ª•Êé•Êî∂‰ªªÂä°ÊèêÈÜí', 'warning');
                }
            });
            
            // ‰ªªÂä°ÊèêÈÜíÂºÄÂÖ≥
            const notificationReminder = document.getElementById('notification-reminder');
            if (notificationReminder) {
                notificationReminder.addEventListener('change', (e) => {
                    const isEnabled = e.target.checked;
                    Storage.set('notificationReminder', isEnabled);
                    
                    if (isEnabled) {
                        // ÈáçÊñ∞ÂÆâÊéíÊâÄÊúâÊèêÈÜí
                        rescheduleAllReminders();
                        showNotification('‰ªªÂä°ÊèêÈÜíÂ∑≤ÂêØÁî®', '‰Ω†Â∞ÜÊî∂Âà∞‰ªªÂä°ÊèêÈÜíÈÄöÁü•', 'success');
                    } else {
                        // ÂèñÊ∂àÊâÄÊúâÊèêÈÜí
                        Object.keys(reminderTimers).forEach(taskId => {
                            cancelTaskReminder(taskId);
                        });
                        showNotification('‰ªªÂä°ÊèêÈÜíÂ∑≤ÂÖ≥Èó≠', '‰Ω†Â∞Ü‰∏çÂÜçÊî∂Âà∞‰ªªÂä°ÊèêÈÜíÈÄöÁü•', 'info');
                    }
                });
            }
            
            // Â£∞Èü≥ÊèêÈÜíÂºÄÂÖ≥
            const notificationSound = document.getElementById('notification-sound');
            if (notificationSound) {
                notificationSound.addEventListener('change', (e) => {
                    const isEnabled = e.target.checked;
                    Storage.set('notificationSound', isEnabled);
                    
                    if (isEnabled) {
                        // ÊµãËØïÂ£∞Èü≥
                        playNotificationSound();
                        showNotification('Â£∞Èü≥ÊèêÈÜíÂ∑≤ÂêØÁî®', '‰ªªÂä°ÊèêÈÜíÊó∂Â∞ÜÊí≠ÊîæÊèêÁ§∫Èü≥', 'success');
                    } else {
                        showNotification('Â£∞Èü≥ÊèêÈÜíÂ∑≤ÂÖ≥Èó≠', '‰ªªÂä°ÊèêÈÜíÊó∂Â∞Ü‰∏çÂÜçÊí≠ÊîæÊèêÁ§∫Èü≥', 'info');
                    }
                });
            }
            
            // ÂæÖÂäûÊ∏ÖÂçïÁõ∏ÂÖ≥‰∫ã‰ª∂
            document.getElementById('add-todo-btn').addEventListener('click', () => {
                const input = document.getElementById('todo-input');
                addTodoItem(input.value.trim());
                input.value = '';
            });
            
            document.getElementById('todo-input').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    const input = e.target;
                    addTodoItem(input.value.trim());
                    input.value = '';
                }
            });
            
            document.getElementById('clear-completed-todos-btn').addEventListener('click', () => {
                clearCompletedTodos();
            });
            
            document.getElementById('clear-all-todos-btn').addEventListener('click', () => {
                CustomDialog.confirm({
                    title: 'Ê∏ÖÁ©∫ÂæÖÂäû‰∫ãÈ°π',
                    message: 'Á°ÆÂÆöË¶ÅÊ∏ÖÁ©∫ÊâÄÊúâÂæÖÂäû‰∫ãÈ°πÂêóÔºüÊ≠§Êìç‰ΩúÊó†Ê≥ïÊí§ÈîÄ„ÄÇ',
                    type: 'danger',
                    okText: 'Á°ÆËÆ§Ê∏ÖÁ©∫',
                    cancelText: 'ÂèñÊ∂à'
                }).then(confirmed => {
                    if (confirmed) {
                        clearAllTodos();
                    }
                });
            });
            
            // Âø´ÈÄüÂæÖÂäûÂäüËÉΩ - Êó∂Èó¥ÂàÜÁ±ªÊåâÈíÆ
            const timeFilterBtns = document.querySelectorAll('.time-filter-btn');
            timeFilterBtns.forEach(btn => {
                btn.addEventListener('click', (e) => {
                    // Êõ¥Êñ∞ÊåâÈíÆÊ†∑Âºè
                    timeFilterBtns.forEach(b => {
                        b.classList.remove('bg-primary', 'text-white');
                        b.classList.add('bg-gray-100', 'text-gray-600', 'hover:bg-gray-200');
                    });
                    e.target.classList.remove('bg-gray-100', 'text-gray-600', 'hover:bg-gray-200');
                    e.target.classList.add('bg-primary', 'text-white');
                    
                    // Êõ¥Êñ∞È°∂ÈÉ®Âø´ÈÄüÂæÖÂäûÂàóË°® - ‰ΩøÁî®Èò≤Êäñ‰ºòÂåñ
                    debouncedUpdateQuickTodoListTop();
                });
            });
            
            // Áå´Âí™Âä©ÊâãÁõ∏ÂÖ≥‰∫ã‰ª∂ - Ê≥®ÊÑèÔºöÊåâÈíÆÂ∑≤Âú®HTML‰∏≠ËÆæÁΩÆ‰∫ÜonclickÔºå‰∏çÈúÄË¶ÅÈáçÂ§çÁªëÂÆö
            // const catToggleIcon = document.getElementById('cat-toggle-icon');
            // if (catToggleIcon) {
            //     catToggleIcon.addEventListener('click', toggleCatAssistant);
            // }
            
            // Áå´Âí™‰∫íÂä®ÊåâÈíÆ
            const petCatBtn = document.getElementById('pet-cat-btn');
            if (petCatBtn) {
                petCatBtn.addEventListener('click', petCat);
            }
            
            const feedCatBtn = document.getElementById('feed-cat-btn');
            if (feedCatBtn) {
                feedCatBtn.addEventListener('click', feedCat);
            }
            
            const playCatBtn = document.getElementById('play-cat-btn');
            if (playCatBtn) {
                playCatBtn.addEventListener('click', playWithCat);
            }
            
            const catDanceBtn = document.getElementById('cat-dance-btn');
            if (catDanceBtn) {
                catDanceBtn.addEventListener('click', catDance);
            }
            
            // ÁπÅÂøôÊó∂Èó¥ÊÆµÊ∑ªÂä†ÊåâÈíÆ
            const addBusyTimeBtn = document.getElementById('add-busy-time-btn');
            if (addBusyTimeBtn) {
                addBusyTimeBtn.addEventListener('click', addBusyTimeSlot);
            }
            
            // Â∑≤ÂÆåÊàê‰ªªÂä°ÂéÜÂè≤Á≠õÈÄâÊåâÈíÆ
            const filterAllBtn = document.getElementById('show-all-completed');
            if (filterAllBtn) {
                filterAllBtn.addEventListener('click', () => {
                    showCompletedTasksHistory('all');
                    // Êõ¥Êñ∞ÊåâÈíÆÊ†∑Âºè
                    updateFilterButtons('all');
                });
            }
            
            const filterTodayBtn = document.getElementById('show-today-completed');
            if (filterTodayBtn) {
                filterTodayBtn.addEventListener('click', () => {
                    showCompletedTasksHistory('today');
                    // Êõ¥Êñ∞ÊåâÈíÆÊ†∑Âºè
                    updateFilterButtons('today');
                });
            }
            
            const filterYesterdayBtn = document.getElementById('show-yesterday-completed');
            if (filterYesterdayBtn) {
                filterYesterdayBtn.addEventListener('click', () => {
                    showCompletedTasksHistory('yesterday');
                    // Êõ¥Êñ∞ÊåâÈíÆÊ†∑Âºè
                    updateFilterButtons('yesterday');
                });
            }
            
            const filterWeekBtn = document.getElementById('show-week-completed');
            if (filterWeekBtn) {
                filterWeekBtn.addEventListener('click', () => {
                    showCompletedTasksHistory('week');
                    // Êõ¥Êñ∞ÊåâÈíÆÊ†∑Âºè
                    updateFilterButtons('week');
                });
            }
        }
        
        // ‰ªéËæìÂÖ•Ê°ÜÊ∑ªÂä†‰ªªÂä°
        function addTaskFromInput(inputElement) {
            const inputText = inputElement.value.trim();
            if (!inputText) return;
            
            // Ê£ÄÊü•ÊòØÂê¶ÂåÖÂê´Êó∂Èó¥ÂÖ≥ÈîÆËØçÔºàÂåÖÊã¨Â§çÂêàÂÖ≥ÈîÆËØçÔºâ - ‰øÆÂ§çÈáçÂ§çÂÖ≥ÈîÆËØçÂπ∂‰ºòÂåñÂåπÈÖç
            const hasTimeKeywords = /(‰ªäÂ§©|ÊòéÂ§©|ÂêéÂ§©|Êó©‰∏ä|‰∏äÂçà|‰∏≠Âçà|‰∏ãÂçà|Êôö‰∏ä|‰ªäÊôö|\d{1,2}ÁÇπ|\d{1,2}:\d{2}|Âë®‰∏Ä|Âë®‰∫å|Âë®‰∏â|Âë®Âõõ|Âë®‰∫î|Âë®ÂÖ≠|Âë®Êó•|Âë®Êú´|‰∏ãÂë®|‰∏äÂë®|\d{1,2}Êúà\d{1,2}Êó•|\d{1,2}\/\d{1,2}|\d{1,2}-\d{1,2}|ÊòéÊó©|ÊòéÊô®|Êòé‰∏äÂçà|ÊòéÂçà|Êòé‰∏≠Âçà|Êòé‰∏ãÂçà|ÊòéÂçàÂêé|ÊòéÊôö|ÊòéÂ§úÊôö|ÊòéÂ§úÈó¥|ÊòéÂ§ú|ÊòéÂáåÊô®|ÊòéÊ∑±Â§ú)/.test(inputText);
            
            if (!hasTimeKeywords) {
                // Êó†Êó∂Èó¥‰ªªÂä°ÔºåÊ∑ªÂä†Âà∞ÂæÖÂäûÊ∏ÖÂçï
                const todoTask = {
                    id: generateId(),
                    title: inputText,
                    description: '',
                    completed: false,
                    createdAt: new Date().toISOString(),
                    isTodoItem: true // Ê†áËÆ∞‰∏∫ÂæÖÂäûÊ∏ÖÂçïÈ°πÁõÆ
                };
                
                // Ëé∑ÂèñÂæÖÂäûÊ∏ÖÂçï
                let todoList = Storage.get('todoList', []);
                todoList.push(todoTask);
                Storage.set('todoList', todoList);
                
                // ÊòæÁ§∫ÈÄöÁü•
                showNotification('Â∑≤Ê∑ªÂä†Âà∞ÂæÖÂäûÊ∏ÖÂçï', inputText, 'success');
                
                // Ê∏ÖÁ©∫ËæìÂÖ•Ê°Ü
                inputElement.value = '';
                
                // Êõ¥Êñ∞ÂæÖÂäûÊ∏ÖÂçïÊòæÁ§∫
                renderTodoList();
                
                // Êõ¥Êñ∞È°∂ÈÉ®Âø´ÈÄüÂæÖÂäûÂàóË°® - ‰ΩøÁî®Èò≤Êäñ‰ºòÂåñ
                debouncedUpdateQuickTodoListTop();
                return;
            }
            
            // Ëß£ÊûêËá™ÁÑ∂ËØ≠Ë®Ä
            const parsed = parseNaturalLanguageTime(inputText);
            
            // Ê£ÄÊü•Ëß£ÊûêÁªìÊûúÊòØÂê¶ÊúâÊïà
            if (!parsed || !parsed.startTime) {
                // Êó∂Èó¥Ëß£ÊûêÂ§±Ë¥•ÔºåÊ∑ªÂä†Âà∞ÂæÖÂäûÊ∏ÖÂçï
                const todoTask = {
                    id: generateId(),
                    title: inputText,
                    description: '',
                    completed: false,
                    createdAt: new Date().toISOString(),
                    isTodoItem: true // Ê†áËÆ∞‰∏∫ÂæÖÂäûÊ∏ÖÂçïÈ°πÁõÆ
                };
                
                // Ëé∑ÂèñÂæÖÂäûÊ∏ÖÂçï
                let todoList = Storage.get('todoList', []);
                todoList.push(todoTask);
                Storage.set('todoList', todoList);
                
                // ÊòæÁ§∫ÈÄöÁü• - ‰ΩøÁî®Êõ¥Ê∏©ÂíåÁöÑÊèêÁ§∫
                showNotification('Â∑≤Ê∑ªÂä†Âà∞ÂæÖÂäûÊ∏ÖÂçï', inputText, 'info');
                
                // Ê∏ÖÁ©∫ËæìÂÖ•Ê°Ü
                inputElement.value = '';
                
                // Êõ¥Êñ∞ÂæÖÂäûÊ∏ÖÂçïÊòæÁ§∫
                renderTodoList();
                
                // Êõ¥Êñ∞È°∂ÈÉ®Âø´ÈÄüÂæÖÂäûÂàóË°® - ‰ΩøÁî®Èò≤Êäñ‰ºòÂåñ
                debouncedUpdateQuickTodoListTop();
                return;
            }
            
            // ÂàõÂª∫‰ªªÂä°Êï∞ÊçÆ
            const taskData = {
                title: parsed.name || inputText,
                startTime: parsed.startTime
            };
            
            // Ê∑ªÂä†‰ªªÂä°
            const added = addTask(taskData);
            
            // Â¶ÇÊûúÊ∑ªÂä†ÊàêÂäüÔºåÊ∏ÖÁ©∫ËæìÂÖ•Ê°Ü
            if (added) {
                inputElement.value = '';
            }
        }
        
        // ÁπÅÂøôÊó∂Èó¥ÊÆµÁÆ°ÁêÜÂáΩÊï∞
        function renderBusyTimeSlots(busyTimeSlots) {
            const container = document.getElementById('busy-time-slots');
            container.innerHTML = '';
            
            busyTimeSlots.forEach((slot, index) => {
                const slotElement = createBusyTimeSlotElement(slot, index);
                container.appendChild(slotElement);
            });
        }
        
        function createBusyTimeSlotElement(slot, index) {
            const div = document.createElement('div');
            div.className = 'busy-time-slot bg-gray-50 p-3 rounded-lg border border-gray-200';
            div.innerHTML = `
                <div class="flex items-center justify-between mb-2">
                    <span class="text-sm font-medium text-gray-700">Êó∂Èó¥ÊÆµ ${index + 1}</span>
                    <button type="button" class="text-red-500 hover:text-red-700 text-sm" onclick="removeBusyTimeSlot(this)">
                        <i class="fa fa-trash"></i> Âà†Èô§
                    </button>
                </div>
                <div class="grid grid-cols-2 gap-2 mb-2">
                    <div>
                        <label class="block text-xs font-medium text-gray-600 mb-1">ÂºÄÂßãÊó∂Èó¥</label>
                        <input type="time" value="${slot.startTime}" class="busy-start-time w-full px-2 py-1 text-sm border border-gray-300 rounded">
                    </div>
                    <div>
                        <label class="block text-xs font-medium text-gray-600 mb-1">ÁªìÊùüÊó∂Èó¥</label>
                        <input type="time" value="${slot.endTime}" class="busy-end-time w-full px-2 py-1 text-sm border border-gray-300 rounded">
                    </div>
                </div>
                <div>
                    <label class="block text-xs font-medium text-gray-600 mb-1">ÈáçÂ§çÊó•Êúü</label>
                    <div class="flex flex-wrap gap-2">
                        <label class="flex items-center text-xs">
                            <input type="checkbox" value="1" class="busy-day-checkbox mr-1" ${slot.days.includes('1') ? 'checked' : ''}> Âë®‰∏Ä
                        </label>
                        <label class="flex items-center text-xs">
                            <input type="checkbox" value="2" class="busy-day-checkbox mr-1" ${slot.days.includes('2') ? 'checked' : ''}> Âë®‰∫å
                        </label>
                        <label class="flex items-center text-xs">
                            <input type="checkbox" value="3" class="busy-day-checkbox mr-1" ${slot.days.includes('3') ? 'checked' : ''}> Âë®‰∏â
                        </label>
                        <label class="flex items-center text-xs">
                            <input type="checkbox" value="4" class="busy-day-checkbox mr-1" ${slot.days.includes('4') ? 'checked' : ''}> Âë®Âõõ
                        </label>
                        <label class="flex items-center text-xs">
                            <input type="checkbox" value="5" class="busy-day-checkbox mr-1" ${slot.days.includes('5') ? 'checked' : ''}> Âë®‰∫î
                        </label>
                        <label class="flex items-center text-xs">
                            <input type="checkbox" value="6" class="busy-day-checkbox mr-1" ${slot.days.includes('6') ? 'checked' : ''}> Âë®ÂÖ≠
                        </label>
                        <label class="flex items-center text-xs">
                            <input type="checkbox" value="0" class="busy-day-checkbox mr-1" ${slot.days.includes('0') ? 'checked' : ''}> Âë®Êó•
                        </label>
                    </div>
                </div>
            `;
            return div;
        }
        
        function addBusyTimeSlot() {
            const container = document.getElementById('busy-time-slots');
            const newSlot = {
                startTime: '12:00',
                endTime: '13:00',
                days: ['1', '2', '3', '4', '5'] // ÈªòËÆ§Â∑•‰ΩúÊó•
            };
            
            const slotElement = createBusyTimeSlotElement(newSlot, container.children.length);
            container.appendChild(slotElement);
        }
        
        function removeBusyTimeSlot(button) {
            button.closest('.busy-time-slot').remove();
        }
        
        function isInBusyTimeSlot(date) {
            const busyTimeSlots = Storage.get('busyTimeSlots', []);
            const dayOfWeek = date.getDay().toString();
            const timeString = date.toTimeString().slice(0, 5); // HH:MM format
            
            return busyTimeSlots.some(slot => {
                if (!slot.days.includes(dayOfWeek)) return false;
                
                const startTime = slot.startTime;
                const endTime = slot.endTime;
                
                return timeString >= startTime && timeString <= endTime;
            });
        }
        
        // Ë∞ÉËäÇ‰ªªÂä°Êó∂Èó¥
        // ‰ºòÂåñÁöÑ‰ªªÂä°Ê∏≤ÊüìÔºàÈÅøÂÖçËß¶ÂèëÂø´ÈÄüÂæÖÂäûÂàóË°®Êõ¥Êñ∞Ôºâ
        function renderTasksWithoutQuickTodo() {
            // ÂàùÂßãÂåñÊ∏≤ÊüìÁõ∏ÂÖ≥ÁöÑDOMÁºìÂ≠ò
            if (!domCache.tasksContainer) {
                domCache.tasksContainer = document.getElementById('tasks-container');
                domCache.emptyState = document.getElementById('empty-state');
                domCache.tasksState = document.getElementById('tasks-state');
                domCache.rocketMotivator = document.getElementById('rocket-motivator');
            }

            // ÈáçÊñ∞Ëé∑ÂèñÊúÄÊñ∞ÁöÑ‰ªªÂä°Êï∞ÊçÆÔºåÁ°Æ‰øùÊï∞ÊçÆÂêåÊ≠•
            const currentTasks = Storage.get('smartScheduleTasks', []);
            
            // ÂàÜÁ¶ªÂ∑≤ÂÆåÊàêÂíåÊú™ÂÆåÊàêÁöÑ‰ªªÂä°
            const activeTasks = [];
            const completedTasks = [];
            
            currentTasks.forEach(task => {
                if (task.completed) {
                    completedTasks.push(task);
                } else {
                    activeTasks.push(task);
                }
            });
            
            // ÊåâÊó∂Èó¥ÊéíÂ∫èÊâÄÊúâÊ¥ªË∑É‰ªªÂä°Ôºà‰ªäÊó•ÂíåÊú™Êù•ÂêàÂπ∂Ôºâ
            activeTasks.sort((a, b) => new Date(a.startTime) - new Date(b.startTime));
            
            // Â∑≤ÂÆåÊàê‰ªªÂä°ÊåâÂÆåÊàêÊó∂Èó¥ÊéíÂ∫èÔºàÊúÄÊñ∞ÁöÑÂú®ÂâçÈù¢Ôºâ
            completedTasks.sort((a, b) => new Date(b.completedTime || 0) - new Date(a.completedTime || 0));
            
            // ÂêàÂπ∂ÊâÄÊúâ‰ªªÂä°ÔºöÊ¥ªË∑É‰ªªÂä°Âú®ÂâçÔºåÂ∑≤ÂÆåÊàê‰ªªÂä°Âú®Âêé
            const allTasks = [...activeTasks, ...completedTasks];
            
            // Êõ¥Êñ∞ÊòæÁ§∫Áä∂ÊÄÅ
            const hasTasks = allTasks.length > 0;
            
            if (hasTasks) {
                domCache.emptyState.classList.add('hidden');
                domCache.tasksState.classList.remove('hidden');
                domCache.rocketMotivator.classList.add('hidden');
                
                // ÊâπÈáèÊ∏≤ÊüìÊâÄÊúâ‰ªªÂä°Ôºà‰ΩøÁî®ÂéüÂßãÁöÑrenderTaskListÂáΩÊï∞Ôºâ
                renderTaskList(domCache.tasksContainer, allTasks, 'all');
            } else {
                domCache.emptyState.classList.remove('hidden');
                domCache.tasksState.classList.add('hidden');
                domCache.rocketMotivator.classList.remove('hidden');
            }
            
            // Êõ¥Êñ∞‰ªªÂä°ÁªüËÆ°
            updateTaskStats();
        }
        
        // Êõ¥Êñ∞Âçï‰∏™‰ªªÂä°ÂÖÉÁ¥†ÔºàÈÅøÂÖçËß¶ÂèëÂÆåÊï¥ÈáçÊñ∞Ê∏≤ÊüìÔºâ
        function updateSingleTaskElement(taskId) {
            const currentTasks = Storage.get('smartScheduleTasks', []);
            const task = currentTasks.find(t => t.id === taskId);
            if (!task) return;
            
            // Êü•ÊâæÁé∞ÊúâÁöÑ‰ªªÂä°ÂÖÉÁ¥†
            const existingElement = document.querySelector(`[data-id="${taskId}"]`);
            if (existingElement) {
                // Êõ¥Êñ∞Áé∞ÊúâÂÖÉÁ¥†ÁöÑÂÜÖÂÆπ
                const startTime = new Date(task.startTime);
                const timeOptions = { hour: '2-digit', minute: '2-digit' };
                const dateOptions = { month: 'short', day: 'numeric' };
                const isToday = isSameDay(startTime, new Date());
                
                let timeText = startTime.toLocaleTimeString('zh-CN', timeOptions);
                if (!isToday) {
                    timeText = `${startTime.toLocaleDateString('zh-CN', dateOptions)} ${timeText}`;
                }
                
                // Êõ¥Êñ∞Êó∂Èó¥ÊòæÁ§∫
                const timeElement = existingElement.querySelector('.fa-clock-o').parentElement;
                if (timeElement) {
                    timeElement.innerHTML = `<i class="fa fa-clock-o mr-1"></i> ${timeText}`;
                }
                
                // Êõ¥Êñ∞‰ºòÂÖàÁ∫ßÊòæÁ§∫
                const priorityElement = existingElement.querySelector('.px-1\\.5');
                if (priorityElement) {
                    priorityElement.className = `ml-2 px-1.5 py-0.5 rounded text-xs ${priorityConfig[task.priority].badge}`;
                    priorityElement.textContent = priorityConfig[task.priority].text;
                }
                
                // Êõ¥Êñ∞‰ºòÂÖàÁ∫ßÊåâÈíÆÁä∂ÊÄÅ
                const priorityBtns = existingElement.querySelectorAll('.priority-quick-btn');
                priorityBtns.forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.priority === task.priority);
                });
            }
        }
        
        function adjustTaskTime(taskId, minutes) {
            // Á°Æ‰øù‰ΩøÁî®ÊúÄÊñ∞ÁöÑ‰ªªÂä°Êï∞ÊçÆ
            const currentTasks = Storage.get('smartScheduleTasks', []);
            const task = currentTasks.find(t => t.id === taskId);
            if (!task) return;
            
            const originalTime = new Date(task.startTime);
            const timeDifference = minutes * 60000;
            const newTime = new Date(originalTime.getTime() + timeDifference);
            const formattedTime = formatLocalDateTime(newTime);
            
            // È™åËØÅÂÆûÈôÖÊó∂Èó¥Â∑Æ
            const actualDifference = (newTime - originalTime) / 60000;
            
            if (Math.abs(actualDifference - minutes) > 0.1) {
                // ÈùôÈªòÂ§ÑÁêÜÊó∂Èó¥ËÆ°ÁÆóËØØÂ∑Æ
            }
            
            // Ê£ÄÊü•Êó∂Èó¥ÂÜ≤Á™Å
            const hasConflict = currentTasks.some(t => {
                if (t.id === taskId || t.completed) return false;
                const existingTime = new Date(t.startTime);
                return Math.abs(existingTime - newTime) < 30 * 60000; // 30ÂàÜÈíüÂÜÖÁÆóÂÜ≤Á™Å
            });
            
            if (hasConflict) {
                showNotification('Ë∞ÉÊï¥ÂêéÁöÑÊó∂Èó¥‰∏éÁé∞Êúâ‰ªªÂä°ÂÜ≤Á™ÅÔºÅ', 'warning');
                return;
            }
            
            // Êõ¥Êñ∞‰ªªÂä°Êó∂Èó¥
            task.startTime = formattedTime;
            Storage.set('smartScheduleTasks', currentTasks);
            
            // Êõ¥Êñ∞ÂÖ®Â±ÄtasksÂèòÈáè‰ª•‰øùÊåÅÂêåÊ≠•
            tasks = currentTasks;
            
            // Âè™Êõ¥Êñ∞Âçï‰∏™‰ªªÂä°ÂÖÉÁ¥†ÔºåÈÅøÂÖçËß¶ÂèëÂÆåÊï¥ÁöÑÈáçÊñ∞Ê∏≤Êüì
            updateSingleTaskElement(taskId);
            
            // Êõ¥Êñ∞ÁªüËÆ°‰ø°ÊÅØÔºà‰ΩøÁî®Èò≤ÊäñÔºâ
            debouncedUpdateTaskStats();
            
            // ÊòæÁ§∫ÊàêÂäüÈÄöÁü•
            const direction = minutes > 0 ? 'Êé®Ëøü' : 'ÊèêÂâç';
            const absMinutes = Math.abs(minutes);
            showNotification(`‰ªªÂä°Â∑≤${direction} ${absMinutes} ÂàÜÈíü`, 'success');
        }
        
        // Êõ¥Êîπ‰ªªÂä°‰ºòÂÖàÁ∫ß
        function changeTaskPriority(taskId, newPriority) {
            const task = tasks.find(t => t.id === taskId);
            if (!task) return;
            
            const oldPriority = task.priority;
            
            // Â¶ÇÊûú‰ºòÂÖàÁ∫ßÊ≤°ÊúâÂèòÂåñÔºåÁõ¥Êé•ËøîÂõû
            if (oldPriority === newPriority) return;
            
            // Êõ¥Êñ∞‰ªªÂä°‰ºòÂÖàÁ∫ß
            task.priority = newPriority;
            Storage.set('smartScheduleTasks', tasks);
            
            // Êõ¥Êñ∞Âø´Êç∑ÊåâÈíÆÁöÑÊøÄÊ¥ªÁä∂ÊÄÅ
            const taskElement = document.querySelector(`[data-id="${taskId}"]`);
            if (taskElement) {
                // ÁßªÈô§ÊâÄÊúâÂø´Êç∑ÊåâÈíÆÁöÑÊøÄÊ¥ªÁä∂ÊÄÅ
                taskElement.querySelectorAll('.priority-quick-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                
                // ÊøÄÊ¥ªÂΩìÂâçÈÄâ‰∏≠ÁöÑÊåâÈíÆ
                const activeBtn = taskElement.querySelector(`.priority-quick-btn[data-priority="${newPriority}"]`);
                if (activeBtn) {
                    activeBtn.classList.add('active');
                }
            }
            
            // ÈáçÊñ∞Ê∏≤Êüì‰ªªÂä°ÂàóË°® - ‰ΩøÁî®Èò≤Êäñ‰ºòÂåñ
            debouncedRenderTasks();
            debouncedUpdateTaskStats();
            debouncedUpdateQuickTodoList();
            
            // ÊòæÁ§∫ÊàêÂäüÈÄöÁü•
            const priorityText = priorityConfig[newPriority].text;
            showNotification(`‰ªªÂä°‰ºòÂÖàÁ∫ßÂ∑≤Êõ¥Êîπ‰∏∫${priorityText}`, 'success');
        }
        
        // Âø´Êç∑ÈîÆÊîØÊåÅÔºöÂø´ÈÄüÂàáÊç¢‰ªªÂä°‰ºòÂÖàÁ∫ß
        function setupPriorityKeyboardShortcuts() {
            document.addEventListener('keydown', (e) => {
                // Âè™ÊúâÂΩìÁÑ¶ÁÇπÂú®ËæìÂÖ•Ê°ÜÂ§ñÊó∂ÊâçÂ§ÑÁêÜÂø´Êç∑ÈîÆ
                if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;
                
                // Ctrl/Cmd + 1/2/3 Âø´ÈÄüÂàáÊç¢ÈÄâ‰∏≠‰ªªÂä°ÁöÑ‰ºòÂÖàÁ∫ß
                if ((e.ctrlKey || e.metaKey) && (e.key === '1' || e.key === '2' || e.key === '3')) {
                    e.preventDefault();
                    
                    // Ëé∑ÂèñÂΩìÂâçÈÄâ‰∏≠ÁöÑ‰ªªÂä°ÔºàÂ¶ÇÊûúÊúâÔºâ
                    const selectedTask = document.querySelector('.task-card.selected, .card[data-id].selected');
                    if (selectedTask) {
                        const taskId = selectedTask.dataset.id;
                        const priorityMap = { '1': 'high', '2': 'medium', '3': 'low' };
                        const newPriority = priorityMap[e.key];
                        
                        if (newPriority) {
                            changeTaskPriority(taskId, newPriority);
                        }
                    } else {
                        // Â¶ÇÊûúÊ≤°ÊúâÈÄâ‰∏≠‰ªªÂä°ÔºåÊòæÁ§∫ÊèêÁ§∫
                        showNotification('ËØ∑ÂÖàÈÄâÊã©‰∏Ä‰∏™‰ªªÂä°', 'info');
                    }
                }
                
                // Alt + H/M/L Âø´ÈÄüÂàáÊç¢Èº†Ê†áÊÇ¨ÂÅú‰ªªÂä°ÁöÑ‰ºòÂÖàÁ∫ß
                if (e.altKey && (e.key === 'h' || e.key === 'H' || e.key === 'm' || e.key === 'M' || e.key === 'l' || e.key === 'L')) {
                    e.preventDefault();
                    
                    // Ëé∑ÂèñÈº†Ê†áÊÇ¨ÂÅúÁöÑ‰ªªÂä°
                    const hoveredTask = document.querySelector('.task-card:hover, .card[data-id]:hover');
                    if (hoveredTask) {
                        const taskId = hoveredTask.dataset.id;
                        const priorityMap = { 'h': 'high', 'm': 'medium', 'l': 'low' };
                        const newPriority = priorityMap[e.key.toLowerCase()];
                        
                        if (newPriority) {
                            changeTaskPriority(taskId, newPriority);
                        }
                    }
                }
            });
        }
        
        // ÂàáÊç¢Âø´Êç∑ÁªüËÆ°ÊòæÁ§∫
        function toggleQuickStats(type) {
            const detailsContainer = document.getElementById('quick-stats-details');
            const completedDetails = document.getElementById('completed-details');
            const remainingDetails = document.getElementById('remaining-details');
            const completedChevron = document.getElementById('completed-chevron');
            const remainingChevron = document.getElementById('remaining-chevron');
            
            if (type === 'completed') {
                const isVisible = !completedDetails.classList.contains('hidden');
                
                if (isVisible) {
                    // ÈöêËóèÂ∑≤ÂÆåÊàêËØ¶ÊÉÖ
                    completedDetails.classList.add('hidden');
                    completedChevron.style.transform = 'rotate(0deg)';
                    
                    // Â¶ÇÊûúÂâ©‰ΩôËØ¶ÊÉÖ‰πüÈöêËóèÔºåÂàôÈöêËóèÊï¥‰∏™ÂÆπÂô®
                    if (remainingDetails.classList.contains('hidden')) {
                        detailsContainer.classList.add('hidden');
                    }
                } else {
                    // ÊòæÁ§∫Â∑≤ÂÆåÊàêËØ¶ÊÉÖ
                    completedDetails.classList.remove('hidden');
                    completedChevron.style.transform = 'rotate(180deg)';
                    detailsContainer.classList.remove('hidden');
                    
                    // ÈöêËóèÂâ©‰ΩôËØ¶ÊÉÖ
                    remainingDetails.classList.add('hidden');
                    remainingChevron.style.transform = 'rotate(0deg)';
                    
                    // Ê∏≤ÊüìÂ∑≤ÂÆåÊàê‰ªªÂä°ÂàóË°®
                    renderCompletedTasksList();
                }
            } else if (type === 'remaining') {
                const isVisible = !remainingDetails.classList.contains('hidden');
                
                if (isVisible) {
                    // ÈöêËóèÂâ©‰ΩôËØ¶ÊÉÖ
                    remainingDetails.classList.add('hidden');
                    remainingChevron.style.transform = 'rotate(0deg)';
                    
                    // Â¶ÇÊûúÂ∑≤ÂÆåÊàêËØ¶ÊÉÖ‰πüÈöêËóèÔºåÂàôÈöêËóèÊï¥‰∏™ÂÆπÂô®
                    if (completedDetails.classList.contains('hidden')) {
                        detailsContainer.classList.add('hidden');
                    }
                } else {
                    // ÊòæÁ§∫Ââ©‰ΩôËØ¶ÊÉÖ
                    remainingDetails.classList.remove('hidden');
                    remainingChevron.style.transform = 'rotate(180deg)';
                    detailsContainer.classList.remove('hidden');
                    
                    // ÈöêËóèÂ∑≤ÂÆåÊàêËØ¶ÊÉÖ
                    completedDetails.classList.add('hidden');
                    completedChevron.style.transform = 'rotate(0deg)';
                    
                    // Ê∏≤ÊüìÂâ©‰Ωô‰ªªÂä°ÂàóË°®
                    renderRemainingTasksList();
                }
            }
        }
        
        // Ê∏≤ÊüìÂ∑≤ÂÆåÊàê‰ªªÂä°ÂàóË°®
        function renderCompletedTasksList() {
            const completedTasks = tasks.filter(task => task.completed).sort((a, b) => new Date(b.completedAt || b.startTime) - new Date(a.completedAt || a.startTime));
            const container = document.getElementById('completed-tasks-list');
            
            if (completedTasks.length === 0) {
                container.innerHTML = '<p class="text-gray-400 text-sm text-center py-4">ÊöÇÊó†Â∑≤ÂÆåÊàê‰ªªÂä°</p>';
                return;
            }
            
            container.innerHTML = completedTasks.map(task => {
                const completedTime = task.completedAt ? new Date(task.completedAt) : new Date(task.startTime);
                const timeStr = completedTime.toLocaleString('zh-CN', { 
                    month: 'short', 
                    day: 'numeric', 
                    hour: '2-digit', 
                    minute: '2-digit' 
                });
                
                return `
                    <div class="flex items-center justify-between p-2 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                        <div class="flex-1">
                            <p class="text-sm font-medium text-gray-700 ${task.completed ? 'line-through' : ''}">${task.title}</p>
                            <p class="text-xs text-gray-500">${timeStr}</p>
                        </div>
                        <span class="text-xs px-2 py-1 rounded ${priorityConfig[task.priority].badge}">${priorityConfig[task.priority].text}</span>
                    </div>
                `;
            }).join('');
        }
        
        // Ê∏≤ÊüìÂâ©‰Ωô‰ªªÂä°ÂàóË°®
        function renderRemainingTasksList() {
            const remainingTasks = tasks.filter(task => !task.completed).sort((a, b) => new Date(a.startTime) - new Date(b.startTime));
            const container = document.getElementById('remaining-tasks-list');
            
            if (remainingTasks.length === 0) {
                container.innerHTML = '<p class="text-gray-400 text-sm text-center py-4">ÊöÇÊó†Ââ©‰Ωô‰ªªÂä°</p>';
                return;
            }
            
            container.innerHTML = remainingTasks.map(task => {
                const taskTime = new Date(task.startTime);
                const now = new Date();
                const isOverdue = taskTime < now;
                const timeStr = taskTime.toLocaleString('zh-CN', { 
                    month: 'short', 
                    day: 'numeric', 
                    hour: '2-digit', 
                    minute: '2-digit' 
                });
                
                return `
                    <div class="flex items-center justify-between p-2 bg-white rounded-lg hover:bg-gray-50 transition-colors border ${isOverdue ? 'border-orange-200 bg-orange-50' : 'border-gray-200'}">
                        <div class="flex-1">
                            <p class="text-sm font-medium text-gray-700">${task.title}</p>
                            <p class="text-xs text-gray-500">${timeStr}</p>
                        </div>
                        <div class="flex items-center gap-2">
                            ${isOverdue ? '<span class="text-xs px-2 py-1 bg-orange-100 text-orange-600 rounded">Â∑≤ÈÄæÊúü</span>' : ''}
                            <span class="text-xs px-2 py-1 rounded ${priorityConfig[task.priority].badge}">${priorityConfig[task.priority].text}</span>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Â∑•ÂÖ∑ÂáΩÊï∞ÔºöÁîüÊàêÂîØ‰∏ÄID
        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2, 5);
        }
        
        // Â∑•ÂÖ∑ÂáΩÊï∞ÔºöÂà§Êñ≠‰∏§‰∏™Êó•ÊúüÊòØÂê¶ÊòØÂêå‰∏ÄÂ§©
        function isSameDay(date1, date2) {
            return date1.getFullYear() === date2.getFullYear() &&
                   date1.getMonth() === date2.getMonth() &&
                   date1.getDate() === date2.getDate();
        }
        
        // ÂæÖÂäûÊ∏ÖÂçïÁõ∏ÂÖ≥ÂáΩÊï∞
        function addTodoItem(title) {
            if (!title) return;
            
            const todoItem = {
                id: generateId(),
                title: title,
                description: '',
                completed: false,
                createdAt: new Date().toISOString(),
                isTodoItem: true,
                priority: 'medium' // ‰∏∫ÂæÖÂäû‰∫ãÈ°πËÆæÁΩÆÈªòËÆ§‰ºòÂÖàÁ∫ß
            };
            
            let todoList = Storage.get('todoList', []);
            todoList.push(todoItem);
            Storage.set('todoList', todoList);
            
            showNotification('Â∑≤Ê∑ªÂä†Âà∞ÂæÖÂäûÊ∏ÖÂçï', title, 'success');
            renderTodoList();
        }
        
        function renderTodoList() {
            const todoList = Storage.get('todoList', []);
            const container = document.getElementById('todo-list-container');
            const emptyState = document.getElementById('todo-empty-state');
            const countElement = document.getElementById('todo-count');
            
            // Êõ¥Êñ∞ËÆ°Êï∞
            const activeCount = todoList.filter(item => !item.completed).length;
            countElement.textContent = `${activeCount} È°π`;
            
            if (todoList.length === 0) {
                container.innerHTML = '';
                emptyState.style.display = 'block';
                return;
            }
            
            emptyState.style.display = 'none';
            
            // ÊåâÂÆåÊàêÁä∂ÊÄÅÂíåÂàõÂª∫Êó∂Èó¥ÊéíÂ∫èÔºåÂ∑≤ÂÆåÊàê‰ªªÂä°ÊåâÂÆåÊàêÊó∂Èó¥ÊéíÂ∫è
            const sortedList = [...todoList].sort((a, b) => {
                if (a.completed !== b.completed) {
                    return a.completed ? 1 : -1; // Êú™ÂÆåÊàêÁöÑÂú®Ââç
                }
                // Â¶ÇÊûúÈÉΩÊòØÊú™ÂÆåÊàêÁöÑÔºåÊåâÂàõÂª∫Êó∂Èó¥ÊéíÂ∫èÔºàÊñ∞ÂàõÂª∫ÁöÑÂú®ÂâçÔºâ
                if (!a.completed && !b.completed) {
                    return new Date(b.createdAt) - new Date(a.createdAt);
                }
                // Â¶ÇÊûúÈÉΩÊòØÂ∑≤ÂÆåÊàêÁöÑÔºåÊåâÂÆåÊàêÊó∂Èó¥ÊéíÂ∫èÔºàÊñ∞ÂÆåÊàêÁöÑÂú®ÂâçÔºâ
                if (a.completed && b.completed) {
                    const aTime = a.completedTime ? new Date(a.completedTime) : new Date(a.createdAt);
                    const bTime = b.completedTime ? new Date(b.completedTime) : new Date(b.createdAt);
                    return bTime - aTime;
                }
                return 0;
            });
            
            container.innerHTML = sortedList.map(item => {
                const priorityConfig = {
                    low: { text: '‰Ωé', color: 'bg-gray-100 text-gray-600' },
                    medium: { text: '‰∏≠', color: 'bg-yellow-100 text-yellow-700' },
                    high: { text: 'È´ò', color: 'bg-red-100 text-red-600' }
                };
                const priority = item.priority || 'medium';
                const priorityInfo = priorityConfig[priority];
                
                // Ê†πÊçÆÂÆåÊàêÁä∂ÊÄÅËÆæÁΩÆ‰∏çÂêåÁöÑÊ†∑Âºè
                const containerClass = item.completed 
                    ? 'bg-green-50 border-green-200 opacity-60' 
                    : 'bg-white border-gray-300';
                
                return `
                <div class="flex items-center justify-between p-3 rounded-lg border ${containerClass} hover:shadow-sm transition-all-300">
                    <div class="flex items-center flex-1">
                        <input type="checkbox" ${item.completed ? 'checked' : ''} 
                            onchange="toggleTodoComplete('${item.id}')"
                            class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded mr-3">
                        <div class="flex-1">
                            <div class="flex items-center gap-2">
                                <span class="${item.completed ? 'line-through text-gray-400' : 'text-gray-700'}">
                                    ${item.title}
                                </span>
                                <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${priorityInfo.color}">
                                    ${priorityInfo.text}
                                </span>
                            </div>
                            ${item.completed && item.completedTime ? `
                                <div class="text-xs text-gray-500 mt-1">
                                    ÂÆåÊàê‰∫é ${new Date(item.completedTime).toLocaleString('zh-CN', { month: '2-digit', day: '2-digit', hour: '2-digit', minute: '2-digit' })}
                                </div>
                            ` : ''}
                        </div>
                    </div>
                    <button onclick="deleteTodoItem('${item.id}')" 
                        class="text-gray-400 hover:text-danger transition-all-300 ml-2">
                        <i class="fa fa-trash-o"></i>
                    </button>
                </div>
            `}).join('');
        }
        
        function toggleTodoComplete(id) {
            let todoList = Storage.get('todoList', []);
            const item = todoList.find(item => item.id === id);
            
            if (item) {
                item.completed = !item.completed;
                if (item.completed) {
                    item.completedTime = new Date().toISOString(); // ËÆ∞ÂΩïÂÆåÊàêÊó∂Èó¥
                    showTaskCompletionAnimation(); // ÊòæÁ§∫ÂÆåÊàêÂä®Áîª
                    onTaskComplete(); // Áå´Âí™ÂèçÂ∫î
                    showNotification('Â∑≤ÂÆåÊàê', item.title, 'success');
                } else {
                    delete item.completedTime; // ÂèñÊ∂àÂÆåÊàêÁä∂ÊÄÅÊó∂Âà†Èô§ÂÆåÊàêÊó∂Èó¥
                }
                Storage.set('todoList', todoList);
                renderTodoList();
                debouncedUpdateQuickTodoListTop(); // Êõ¥Êñ∞Âø´ÈÄüÂæÖÂäûÂàóË°® - ‰ΩøÁî®Èò≤Êäñ‰ºòÂåñ
            }
        }
        
        function deleteTodoItem(id) {
            let todoList = Storage.get('todoList', []);
            const item = todoList.find(item => item.id === id);
            
            if (item) {
                CustomDialog.confirm({
                    title: 'Âà†Èô§ÂæÖÂäû‰∫ãÈ°π',
                    message: `Á°ÆÂÆöË¶ÅÂà†Èô§"${item.title}"ÂêóÔºü`,
                    type: 'warning',
                    okText: 'Á°ÆËÆ§Âà†Èô§',
                    cancelText: 'ÂèñÊ∂à'
                }).then(confirmed => {
                    if (confirmed) {
                        todoList = todoList.filter(item => item.id !== id);
                        Storage.set('todoList', todoList);
                        renderTodoList();
                        debouncedUpdateQuickTodoListTop(); // Êõ¥Êñ∞Âø´ÈÄüÂæÖÂäûÂàóË°® - ‰ΩøÁî®Èò≤Êäñ‰ºòÂåñ
                        showNotification('Â∑≤Âà†Èô§', item.title, 'info');
                    }
                });
            }
        }
        
        function clearCompletedTodos() {
            let todoList = Storage.get('todoList', []);
            const completedItems = todoList.filter(item => item.completed);
            
            if (completedItems.length === 0) {
                showNotification('Ê≤°ÊúâÂ∑≤ÂÆåÊàêÁöÑÂæÖÂäû‰∫ãÈ°π', '', 'info');
                return;
            }
            
            CustomDialog.confirm({
                title: 'Ê∏ÖÈô§Â∑≤ÂÆåÊàê‰∫ãÈ°π',
                message: `Á°ÆÂÆöË¶ÅÊ∏ÖÈô§ ${completedItems.length} ‰∏™Â∑≤ÂÆåÊàêÁöÑÂæÖÂäû‰∫ãÈ°πÂêóÔºü`,
                type: 'warning',
                okText: 'Á°ÆËÆ§Ê∏ÖÈô§',
                cancelText: 'ÂèñÊ∂à'
            }).then(confirmed => {
                if (confirmed) {
                    todoList = todoList.filter(item => !item.completed);
                    Storage.set('todoList', todoList);
                    renderTodoList();
                    debouncedUpdateQuickTodoListTop(); // Êõ¥Êñ∞Âø´ÈÄüÂæÖÂäûÂàóË°® - ‰ΩøÁî®Èò≤Êäñ‰ºòÂåñ
                    showNotification('Â∑≤Ê∏ÖÈô§', `Ê∏ÖÈô§‰∫Ü ${completedItems.length} ‰∏™Â∑≤ÂÆåÊàê‰∫ãÈ°π`, 'success');
                }
            });
        }
        
        function clearAllTodos() {
            Storage.set('todoList', []);
            renderTodoList();
            debouncedUpdateQuickTodoListTop(); // Êõ¥Êñ∞Âø´ÈÄüÂæÖÂäûÂàóË°® - ‰ΩøÁî®Èò≤Êäñ‰ºòÂåñ
            showNotification('Â∑≤Ê∏ÖÁ©∫', 'ÊâÄÊúâÂæÖÂäû‰∫ãÈ°πÂ∑≤Ê∏ÖÈô§', 'success');
        }
        
        // Áî®Êà∑ËèúÂçïÁõ∏ÂÖ≥ÂáΩÊï∞
        function toggleUserDropdown() {
            const dropdown = document.getElementById('user-dropdown');
            dropdown.classList.toggle('hidden');
            
            // ÁÇπÂáªÂ§ñÈÉ®ÂÖ≥Èó≠‰∏ãÊãâËèúÂçï
            if (!dropdown.classList.contains('hidden')) {
                setTimeout(() => {
                    document.addEventListener('click', closeUserDropdownOutside);
                }, 100);
            }
        }
        
        function closeUserDropdownOutside(event) {
            const dropdown = document.getElementById('user-dropdown');
            const userBtn = document.getElementById('user-menu-btn');
            
            if (!dropdown.contains(event.target) && !userBtn.contains(event.target)) {
                dropdown.classList.add('hidden');
                document.removeEventListener('click', closeUserDropdownOutside);
            }
        }
        
        function showEditUsernameModal() {
            const input = document.getElementById('username-input');
            
            // Ëé∑ÂèñÂΩìÂâçÁî®Êà∑Âêç
            const currentUsername = Storage.get('username', 'Áî®Êà∑');
            input.value = currentUsername === 'Áî®Êà∑' ? '' : currentUsername;
            
            showModal('edit-username-modal', 'edit-username-modal-content');
            
            // ËÅöÁÑ¶ËæìÂÖ•Ê°Ü
            setTimeout(() => {
                input.focus();
            }, 320);
            
            // ÂÖ≥Èó≠‰∏ãÊãâËèúÂçï
            document.getElementById('user-dropdown').classList.add('hidden');
        }
        
        function closeEditUsernameModal() {
            hideModal('edit-username-modal', 'edit-username-modal-content');
        }
        
        function saveUsername(event) {
            event.preventDefault();
            
            const input = document.getElementById('username-input');
            const username = input.value.trim();
            
            if (!username) {
                showNotification('ËØ∑ËæìÂÖ•ÂßìÂêç', 'ÂßìÂêç‰∏çËÉΩ‰∏∫Á©∫', 'error');
                return;
            }
            
            // ‰øùÂ≠òÁî®Êà∑Âêç
            Storage.set('username', username);
            
            // Êõ¥Êñ∞ÁïåÈù¢ÊòæÁ§∫
            updateUserDisplay(username);
            
            // ÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü
            closeEditUsernameModal();
            
            // ÊòæÁ§∫ÊàêÂäüÈÄöÁü•
            showNotification('ÂßìÂêçÂ∑≤Êõ¥Êñ∞', `Ê¨¢ËøéÔºå${username}ÔºÅ`, 'success');
        }
        
        function updateUserDisplay(username) {
            // Êõ¥Êñ∞Áî®Êà∑Â§¥ÂÉè‰∏≠ÁöÑÈ¶ñÂ≠óÊØç
            const initial = username.charAt(0).toUpperCase();
            document.getElementById('user-initial').textContent = initial;
            document.getElementById('dropdown-user-initial').textContent = initial;
            
            // Êõ¥Êñ∞ÊòæÁ§∫ÁöÑÁî®Êà∑Âêç
            document.getElementById('display-username').textContent = username;
        }
        
        function handleLogout() {
            CustomDialog.confirm({
                title: 'ÈÄÄÂá∫ÁôªÂΩï',
                message: 'Á°ÆÂÆöË¶ÅÈÄÄÂá∫ÂêóÔºüËøôÂ∞ÜÊ∏ÖÈô§ÊÇ®ÁöÑÊâÄÊúâÊï∞ÊçÆ„ÄÇ',
                details: 'Ê∏ÖÈô§ÁöÑÊï∞ÊçÆÂåÖÊã¨ÔºöÊâÄÊúâ‰ªªÂä°„ÄÅÂæÖÂäû‰∫ãÈ°π„ÄÅËÆæÁΩÆÂíåÁî®Êà∑‰ø°ÊÅØ',
                type: 'danger',
                okText: 'Á°ÆËÆ§ÈÄÄÂá∫',
                cancelText: 'ÂèñÊ∂à'
            }).then(confirmed => {
                if (confirmed) {
                    // Ê∏ÖÈô§ÊâÄÊúâÊú¨Âú∞Â≠òÂÇ®Êï∞ÊçÆ
                    Storage.clear();
                    
                    // ÈáçÁΩÆÁî®Êà∑ÊòæÁ§∫
                    updateUserDisplay('Áî®Êà∑');
                    
                    // ÊòæÁ§∫ÈÄöÁü•
                    showNotification('Â∑≤ÈÄÄÂá∫', 'ÊâÄÊúâÊï∞ÊçÆÂ∑≤Ê∏ÖÈô§', 'info');
                    
                    // ÂÖ≥Èó≠‰∏ãÊãâËèúÂçï
                    document.getElementById('user-dropdown').classList.add('hidden');
                    
                    // ÈáçÊñ∞Âä†ËΩΩÈ°µÈù¢‰ª•ÈáçÁΩÆÁä∂ÊÄÅ
                    setTimeout(() => {
                        location.reload();
                    }, 1500);
                }
            });
        }
        
        // ÂàùÂßãÂåñÁî®Êà∑ÊòæÁ§∫
        function initUserDisplay() {
            const savedUsername = Storage.get('username');
            const username = savedUsername || 'Áî®Êà∑';
            updateUserDisplay(username);
        }
        
        // Êï∞ÊçÆÂØºÂá∫ÂíåÂ§á‰ªΩÂäüËÉΩ
        function exportToJSON() {
            try {
                const data = {
                    tasks: tasks,
                    todoList: Storage.get('todoList', []),
                    settings: {
                        username: Storage.get('username'),
                        workStartTime: Storage.get('workStartTime'),
                        workEndTime: Storage.get('workEndTime'),
                        morningKeyword: Storage.get('morningKeyword'),
                        afternoonKeyword: Storage.get('afternoonKeyword'),
                        eveningKeyword: Storage.get('eveningKeyword'),
                        morningTime: Storage.get('morningTime'),
                        afternoonTime: Storage.get('afternoonTime'),
                        eveningTime: Storage.get('eveningTime')
                    },
                    exportDate: new Date().toISOString(),
                    version: '1.0'
                };
                
                const jsonString = JSON.stringify(data, null, 2);
                const blob = new Blob([jsonString], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = `task_manager_backup_${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showNotification('ÂØºÂá∫ÊàêÂäü', 'JSONÊ†ºÂºèÊï∞ÊçÆÂ∑≤ÂØºÂá∫', 'success');
            } catch (error) {
                showNotification('ÂØºÂá∫Â§±Ë¥•', 'JSONÊ†ºÂºèÂØºÂá∫Êó∂ÂèëÁîüÈîôËØØ', 'error');
            }
        }
        
        function exportToCSV() {
            try {
                const csvHeaders = ['‰ªªÂä°Ê†áÈ¢ò', 'ÊèèËø∞', 'ÂºÄÂßãÊó∂Èó¥', 'ÁªìÊùüÊó∂Èó¥', '‰ºòÂÖàÁ∫ß', 'ÂÆåÊàêÁä∂ÊÄÅ', 'ÂàõÂª∫Êó∂Èó¥'];
                const csvRows = tasks.map(task => [
                    task.title,
                    task.description || '',
                    task.startTime,
                    task.endTime || '',
                    task.priority,
                    task.completed ? 'Â∑≤ÂÆåÊàê' : 'Êú™ÂÆåÊàê',
                    task.createdAt
                ]);
                
                // Ê∑ªÂä†BOM‰ª•ÊîØÊåÅ‰∏≠Êñá
                const BOM = '\uFEFF';
                const csvContent = BOM + [
                    csvHeaders.join(','),
                    ...csvRows.map(row => row.map(cell => `"${cell}"`).join(','))
                ].join('\n');
                
                const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = `tasks_${new Date().toISOString().split('T')[0]}.csv`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showNotification('ÂØºÂá∫ÊàêÂäü', 'CSVÊ†ºÂºèÊï∞ÊçÆÂ∑≤ÂØºÂá∫', 'success');
            } catch (error) {
                showNotification('ÂØºÂá∫Â§±Ë¥•', 'CSVÊ†ºÂºèÂØºÂá∫Êó∂ÂèëÁîüÈîôËØØ', 'error');
            }
        }
        
        function backupData() {
            try {
                const backup = {
                    tasks: tasks,
                    todoList: Storage.get('todoList', []),
                    settings: {
                        username: Storage.get('username'),
                        workStartTime: Storage.get('workStartTime'),
                        workEndTime: Storage.get('workEndTime'),
                        morningKeyword: Storage.get('morningKeyword'),
                        afternoonKeyword: Storage.get('afternoonKeyword'),
                        eveningKeyword: Storage.get('eveningKeyword'),
                        morningTime: Storage.get('morningTime'),
                        afternoonTime: Storage.get('afternoonTime'),
                        eveningTime: Storage.get('eveningTime')
                    },
                    backupDate: new Date().toISOString(),
                    version: '1.0'
                };
                
                // ÂéãÁº©Êï∞ÊçÆ‰ª•ËäÇÁúÅÂ≠òÂÇ®Á©∫Èó¥
                const compressedBackup = JSON.stringify(backup);
                
                // ‰øùÂ≠òÂà∞localStorage‰Ωú‰∏∫Â§á‰ªΩ
                Storage.set('taskManagerBackup', compressedBackup);
                Storage.set('taskManagerBackupDate', new Date().toISOString());
                
                // ÂêåÊó∂Êèê‰æõ‰∏ãËΩΩ
                const blob = new Blob([compressedBackup], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = `complete_backup_${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                updateBackupStatus();
                showNotification('Â§á‰ªΩÊàêÂäü', 'Êï∞ÊçÆÂ∑≤Â§á‰ªΩÂà∞Êú¨Âú∞Â≠òÂÇ®ÂíåÊñá‰ª∂', 'success');
            } catch (error) {
                showNotification('Â§á‰ªΩÂ§±Ë¥•', 'Â§á‰ªΩËøáÁ®ã‰∏≠ÂèëÁîüÈîôËØØ', 'error');
            }
        }
        
        function restoreData() {
            const fileInput = document.getElementById('restore-file-input');
            fileInput.click();
        }
        
        function handleFileSelect(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    // È™åËØÅÊï∞ÊçÆÊ†ºÂºè
                    if (!data.tasks || !Array.isArray(data.tasks)) {
                        throw new Error('Êó†ÊïàÁöÑÊï∞ÊçÆÊ†ºÂºè');
                    }
                    
                    // Á°ÆËÆ§ÊÅ¢Â§çÊìç‰Ωú
                    CustomDialog.confirm({
                        title: 'ÊÅ¢Â§çÊï∞ÊçÆ',
                        message: 'ÊÅ¢Â§çÊï∞ÊçÆÂ∞ÜË¶ÜÁõñÂΩìÂâçÊâÄÊúâÊï∞ÊçÆÔºåÁ°ÆÂÆöË¶ÅÁªßÁª≠ÂêóÔºü',
                        details: 'ËøôÂ∞ÜÊõøÊç¢ÊÇ®ÂΩìÂâçÁöÑÊâÄÊúâ‰ªªÂä°„ÄÅÂæÖÂäû‰∫ãÈ°πÂíåËÆæÁΩÆ',
                        type: 'danger',
                        okText: 'Á°ÆËÆ§ÊÅ¢Â§ç',
                        cancelText: 'ÂèñÊ∂à'
                    }).then(confirmed => {
                        if (confirmed) {
                            // ÊÅ¢Â§ç‰ªªÂä°Êï∞ÊçÆ
                            tasks = data.tasks;
                            saveTasks();
                            
                            // ÊÅ¢Â§çÂæÖÂäû‰∫ãÈ°π
                            if (data.todoList && Array.isArray(data.todoList)) {
                                Storage.set('todoList', data.todoList);
                            }
                            
                            // ÊÅ¢Â§çËÆæÁΩÆ
                            if (data.settings) {
                                Object.keys(data.settings).forEach(key => {
                                    if (data.settings[key] !== null && data.settings[key] !== undefined) {
                                        Storage.set(key, data.settings[key]);
                                    }
                                });
                            }
                            
                            // ÈáçÊñ∞ÂàùÂßãÂåñÂ∫îÁî®
                            renderTasks();
                            updateTaskStats();
                            updateSmartSuggestions();
                            updateCharts();
                            initUserDisplay();
                            loadSettings();
                            renderTodoList();
                            
                            showNotification('ÊÅ¢Â§çÊàêÂäü', 'Êï∞ÊçÆÂ∑≤ÊàêÂäüÊÅ¢Â§ç', 'success');
                        }
                    });
                } catch (error) {
                    showNotification('ÊÅ¢Â§çÂ§±Ë¥•', 'Êñá‰ª∂Ê†ºÂºèÈîôËØØÊàñÊï∞ÊçÆÊçüÂùè', 'error');
                }
            };
            
            reader.readAsText(file);
            
            // Ê∏ÖÁ©∫Êñá‰ª∂ËæìÂÖ•
            event.target.value = '';
        }
        
        function updateBackupStatus() {
            const backupDate = Storage.get('taskManagerBackupDate');
            const statusElement = document.getElementById('backup-status');
            
            if (backupDate) {
                const date = new Date(backupDate);
                const dateStr = date.toLocaleString('zh-CN');
                statusElement.textContent = `‰∏äÊ¨°Â§á‰ªΩ: ${dateStr}`;
                statusElement.className = 'text-xs text-gray-500 mt-2';
            } else {
                statusElement.textContent = 'ÊöÇÊó†Â§á‰ªΩ';
                statusElement.className = 'text-xs text-gray-400 mt-2';
            }
        }
        
        // ÊèêÈÜíÂäüËÉΩÁõ∏ÂÖ≥ÂáΩÊï∞
        let reminderTimers = {};
        
        function initNotificationSystem() {
            // Ê£ÄÊü•ÈÄöÁü•ÊùÉÈôêÁä∂ÊÄÅ
            updateNotificationStatus();
            
            // ÂàùÂßãÂåñÊèêÈÜíËÆæÁΩÆ‰∫ã‰ª∂ÁõëÂê¨
            initReminderEventListeners();
            
            // ÂêØÂä®ÊèêÈÜíÊ£ÄÊü•Âô®
            startReminderChecker();
        }
        
        function updateNotificationStatus() {
            const statusElement = document.getElementById('notification-status');
            const requestButton = document.getElementById('request-notification-permission');
            
            if ('Notification' in window) {
                if (Notification.permission === 'granted') {
                    statusElement.className = 'w-2 h-2 rounded-full bg-green-500';
                    requestButton.textContent = 'Â∑≤ÊéàÊùÉ';
                    requestButton.disabled = true;
                    requestButton.className = 'px-3 py-1 text-xs bg-gray-300 text-gray-500 rounded-lg cursor-not-allowed';
                } else if (Notification.permission === 'denied') {
                    statusElement.className = 'w-2 h-2 rounded-full bg-red-500';
                    requestButton.textContent = 'Â∑≤ÊãíÁªù';
                    requestButton.disabled = false;
                    requestButton.className = 'px-3 py-1 text-xs bg-red-500 text-white rounded-lg hover:bg-red-600 transition-smooth';
                } else {
                    statusElement.className = 'w-2 h-2 rounded-full bg-yellow-500';
                    requestButton.textContent = 'ËØ∑Ê±ÇÊùÉÈôê';
                    requestButton.disabled = false;
                    requestButton.className = 'px-3 py-1 text-xs bg-primary text-white rounded-lg hover:bg-primary/90 transition-smooth';
                }
            } else {
                statusElement.className = 'w-2 h-2 rounded-full bg-gray-400';
                requestButton.textContent = '‰∏çÊîØÊåÅ';
                requestButton.disabled = true;
                requestButton.className = 'px-3 py-1 text-xs bg-gray-300 text-gray-500 rounded-lg cursor-not-allowed';
            }
        }
        
        async function requestNotificationPermission() {
            if ('Notification' in window) {
                try {
                    const permission = await Notification.requestPermission();
                    updateNotificationStatus();
                    
                    if (permission === 'granted') {
                        showNotification('ÈÄöÁü•ÊùÉÈôêÂ∑≤Êéà‰∫à', 'ÊÇ®Â∞ÜÊî∂Âà∞‰ªªÂä°ÊèêÈÜíÈÄöÁü•', 'success');
                        // ÂèëÈÄÅÊµãËØïÈÄöÁü•
                        new Notification('Êô∫ËÉΩ‰ªªÂä°ÁÆ°ÁêÜÁ≥ªÁªü', {
                            body: 'ÈÄöÁü•ÊùÉÈôêÂ∑≤ÊàêÂäüÂºÄÂêØÔºÅ',
                            icon: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y=".9em" font-size="90">üê±</text></svg>',
                            badge: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y=".9em" font-size="90">üê±</text></svg>'
                        });
                    } else if (permission === 'denied') {
                        showNotification('ÈÄöÁü•ÊùÉÈôêË¢´ÊãíÁªù', 'ÊÇ®ÂèØ‰ª•Âú®ÊµèËßàÂô®ËÆæÁΩÆ‰∏≠ÊâãÂä®ÂºÄÂêØÈÄöÁü•ÊùÉÈôê', 'warning');
                    }
                } catch (error) {
                    // ÈùôÈªòÂ§ÑÁêÜÈÄöÁü•ÊùÉÈôêËØ∑Ê±ÇÂ§±Ë¥•
                    showNotification('ËØ∑Ê±ÇÈÄöÁü•ÊùÉÈôêÂ§±Ë¥•', 'ËØ∑Ê£ÄÊü•ÊµèËßàÂô®ËÆæÁΩÆ', 'error');
                }
            } else {
                showNotification('ÊµèËßàÂô®‰∏çÊîØÊåÅÈÄöÁü•', 'ËØ∑‰ΩøÁî®Áé∞‰ª£ÊµèËßàÂô®‰ª•Ëé∑ÂæóÂÆåÊï¥ÂäüËÉΩ', 'warning');
            }
        }
        
        function initReminderEventListeners() {
            // ÈÄöÁü•ÊùÉÈôêËØ∑Ê±ÇÊåâÈíÆ
            const requestButton = document.getElementById('request-notification-permission');
            if (requestButton) {
                requestButton.addEventListener('click', requestNotificationPermission);
            }
            
            // ÊèêÈÜíÂêØÁî®Â§çÈÄâÊ°Ü
            const reminderEnabled = document.getElementById('task-reminder-enabled');
            if (reminderEnabled) {
                reminderEnabled.addEventListener('change', function() {
                    const reminderSettings = document.getElementById('reminder-settings');
                    if (this.checked) {
                        reminderSettings.classList.remove('hidden');
                    } else {
                        reminderSettings.classList.add('hidden');
                    }
                });
            }
        }
        
        function startReminderChecker() {
            // ÊØèÂàÜÈíüÊ£ÄÊü•‰∏ÄÊ¨°ÊèêÈÜí
            // ‰ºòÂåñÁöÑÊèêÈÜíÊ£ÄÊü•
        let lastReminderCheck = 0;
        const REMINDER_CHECK_INTERVAL = 30000; // 30ÁßíÊ£ÄÊü•‰∏ÄÊ¨°
        
        function checkReminders() {
            const now = Date.now();
            
            // Èò≤Ê≠¢È¢ëÁπÅÊ£ÄÊü•
            if (now - lastReminderCheck < REMINDER_CHECK_INTERVAL) {
                return;
            }
            
            lastReminderCheck = now;
            
            const tasksToRemind = tasks.filter(task => {
                if (task.completed || !task.reminderEnabled) return false;
                
                const taskTime = new Date(task.startTime).getTime();
                const reminderTime = taskTime - (parseInt(task.reminderAdvance || '5') * 60000);
                
                return now >= reminderTime && now < taskTime;
            });
            
            tasksToRemind.forEach(task => {
                if (!task.reminderShown) {
                    showNotification('‰ªªÂä°ÊèêÈÜí', `‰ªªÂä°"${task.title}"Âç≥Â∞ÜÂºÄÂßã`, 'warning');
                    task.reminderShown = true;
                    saveTasks();
                }
            });
        }
        
        // ‰ΩøÁî®‰ºòÂåñÁöÑÂÆöÊó∂Âô®
        timerManager.setTimer('reminders', checkReminders, 60000);
            
            // Á´ãÂç≥Ê£ÄÊü•‰∏ÄÊ¨°
            checkReminders();
        }
        
        function checkReminders() {
            const now = new Date();
            const notificationReminder = document.getElementById('notification-reminder');
            
            // Ê£ÄÊü•Áî®Êà∑ÊòØÂê¶ÂêØÁî®‰∫Ü‰ªªÂä°ÊèêÈÜí
            if (notificationReminder && !notificationReminder.checked) {
                return;
            }
            
            // Ê£ÄÊü•ÊâÄÊúâ‰ªªÂä°ÁöÑÊèêÈÜí
            tasks.forEach(task => {
                if (task.reminderEnabled && task.reminderTime && !task.completed && !task.reminderTriggered) {
                    const reminderTime = new Date(task.reminderTime);
                    const advanceMinutes = parseInt(task.reminderAdvance) || 5;
                    const actualReminderTime = new Date(reminderTime.getTime() - advanceMinutes * 60000);
                    
                    // Â¶ÇÊûúÂΩìÂâçÊó∂Èó¥Ë∂ÖËøáÊàñÁ≠â‰∫éÊèêÈÜíÊó∂Èó¥Ôºå‰∏î‰ªªÂä°Êú™ÂÆåÊàê‰∏îÊèêÈÜíÊú™Ëß¶Âèë
                    if (now >= actualReminderTime) {
                        triggerTaskReminder(task);
                        task.reminderTriggered = true;
                        saveTasks();
                    }
                }
            });
        }
        
        function triggerTaskReminder(task) {
            const notificationSound = document.getElementById('notification-sound');
            const playSound = notificationSound && notificationSound.checked;
            
            // ÊòæÁ§∫ÊµèËßàÂô®ÈÄöÁü•
            if ('Notification' in window && Notification.permission === 'granted') {
                const priorityText = {
                    'high': 'üî¥ È´ò‰ºòÂÖàÁ∫ß',
                    'medium': 'üü° ‰∏≠‰ºòÂÖàÁ∫ß',
                    'low': 'üü¢ ‰Ωé‰ºòÂÖàÁ∫ß'
                }[task.priority] || '';
                
                const notification = new Notification(`‰ªªÂä°ÊèêÈÜí: ${task.title}`, {
                    body: `${priorityText}\nÊó∂Èó¥: ${formatDateTime(new Date(task.datetime))}\n${task.description ? 'ÊèèËø∞: ' + task.description : ''}`,
                    icon: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y=".9em" font-size="90">üê±</text></svg>',
                    badge: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y=".9em" font-size="90">‚è∞</text></svg>',
                    tag: `task-${task.id}`,
                    requireInteraction: true,
                    actions: [
                        {
                            action: 'complete',
                            title: 'Ê†áËÆ∞ÂÆåÊàê'
                        },
                        {
                            action: 'snooze',
                            title: 'Á®çÂêéÊèêÈÜí'
                        }
                    ]
                });
                
                // Â§ÑÁêÜÈÄöÁü•ÁÇπÂáª
                notification.onclick = function() {
                    window.focus();
                    notification.close();
                    showTaskDetail(task.id);
                };
                
                // Â§ÑÁêÜÈÄöÁü•Êìç‰Ωú
                notification.onclose = function() {
                    // ÈÄöÁü•ÂÖ≥Èó≠Êó∂ÁöÑÂ§ÑÁêÜ
                };
            }
            
            // Êí≠ÊîæÊèêÈÜíÂ£∞Èü≥
            if (playSound) {
                playNotificationSound();
            }
            
            // ÊòæÁ§∫Â∫îÁî®ÂÜÖÈÄöÁü•
            showNotification('‰ªªÂä°ÊèêÈÜí', `${task.title} - ${formatDateTime(new Date(task.datetime))}`, 'info');
        }
        
        function playNotificationSound() {
            // ÂàõÂª∫ÁÆÄÂçïÁöÑÊèêÈÜíÂ£∞Èü≥
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = 800; // È¢ëÁéá
            oscillator.type = 'sine';
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.5);
        }
        
        function scheduleTaskReminder(task) {
            // Ê∏ÖÈô§Áé∞ÊúâÁöÑÊèêÈÜíÂÆöÊó∂Âô®
            if (reminderTimers[task.id]) {
                clearTimeout(reminderTimers[task.id]);
                delete reminderTimers[task.id];
            }
            
            // Â¶ÇÊûú‰ªªÂä°ÂêØÁî®‰∫ÜÊèêÈÜí‰∏îÊúâÊèêÈÜíÊó∂Èó¥
            if (task.reminderEnabled && task.reminderTime && !task.completed) {
                const reminderTime = new Date(task.reminderTime);
                const advanceMinutes = parseInt(task.reminderAdvance) || 5;
                const actualReminderTime = new Date(reminderTime.getTime() - advanceMinutes * 60000);
                const now = new Date();
                
                // Â¶ÇÊûúÊèêÈÜíÊó∂Èó¥Âú®Êú™Êù•
                if (actualReminderTime > now) {
                    const timeout = actualReminderTime.getTime() - now.getTime();
                    reminderTimers[task.id] = setTimeout(() => {
                        triggerTaskReminder(task);
                        task.reminderTriggered = true;
                        saveTasks();
                    }, timeout);
                }
            }
        }
        
        function cancelTaskReminder(taskId) {
            if (reminderTimers[taskId]) {
                clearTimeout(reminderTimers[taskId]);
                delete reminderTimers[taskId];
            }
        }
        
        function rescheduleAllReminders() {
            // Ê∏ÖÈô§ÊâÄÊúâÁé∞ÊúâÁöÑÊèêÈÜíÂÆöÊó∂Âô®
            Object.keys(reminderTimers).forEach(taskId => {
                clearTimeout(reminderTimers[taskId]);
            });
            reminderTimers = {};
            
            // ÈáçÊñ∞ÂÆâÊéíÊâÄÊúâ‰ªªÂä°ÁöÑÊèêÈÜí
            tasks.forEach(task => {
                scheduleTaskReminder(task);
            });
        }
        
        // Âø´ÈÄüÂæÖÂäûÂäüËÉΩ - Êõ¥Êñ∞Âø´ÈÄüÂæÖÂäûÂàóË°®
        function updateQuickTodoList() {
            const quickTodoList = document.getElementById('quick-todo-list');
            
            // Ëé∑ÂèñÊ≤°ÊúâÊó∂Èó¥ËÆæÁΩÆÁöÑ‰ªªÂä°ÔºàÂç≥ÂæÖÂäûÊ∏ÖÂçï‰∏≠ÁöÑÈ°πÁõÆÔºâ
            let todoList = Storage.get('todoList', []);
            
            // ÊåâÂàõÂª∫Êó∂Èó¥ÂíåÂÆåÊàêÁä∂ÊÄÅÊéíÂ∫èÔºöÊú™ÂÆåÊàêÁöÑÂú®ÂâçÔºåÂ∑≤ÂÆåÊàêÁöÑÂú®ÂêéÔºõÂêåÁä∂ÊÄÅÊåâÂàõÂª∫Êó∂Èó¥ÊéíÂ∫è
            todoList.sort((a, b) => {
                // ÂÖàÊåâÂÆåÊàêÁä∂ÊÄÅÊéíÂ∫è
                if (a.completed !== b.completed) {
                    return a.completed ? 1 : -1;
                }
                // ÂêåÁä∂ÊÄÅÊåâÂàõÂª∫Êó∂Èó¥ÊéíÂ∫è
                const aTime = new Date(a.createdAt || 0);
                const bTime = new Date(b.createdAt || 0);
                return aTime - bTime;
            });
            
            // ÁîüÊàêHTML
            if (todoList.length === 0) {
                quickTodoList.innerHTML = `
                    <div class="text-center py-8">
                        <i class="fa fa-check-circle text-4xl text-gray-300 mb-3"></i>
                        <p class="text-gray-500">ÊöÇÊó†ÂæÖÂäû‰ªªÂä°</p>
                    </div>
                `;
            } else {
                quickTodoList.innerHTML = todoList.map(task => {
                    const priorityConfig = {
                        low: { text: '‰Ωé', color: 'bg-gray-100 text-gray-600' },
                        medium: { text: '‰∏≠', color: 'bg-yellow-100 text-yellow-700' },
                        high: { text: 'È´ò', color: 'bg-red-100 text-red-600' }
                    };
                    const priority = task.priority || 'medium';
                    const priorityInfo = priorityConfig[priority];
                    
                    return `
                    <div class="flex items-center gap-3 p-3 bg-white rounded-lg border border-gray-100 hover:shadow-sm transition-all cursor-pointer group"
                         onclick="showTaskDetail('${task.id}')">
                        <div class="flex-shrink-0">
                            <div class="w-4 h-4 rounded-full border-2 ${task.priority === 'high' ? 'border-red-400' : task.priority === 'medium' ? 'border-yellow-400' : 'border-gray-300'}"></div>
                        </div>
                        <div class="flex-1 min-w-0">
                            <div class="flex items-center gap-2 mb-1">
                                <p class="text-sm font-medium text-gray-800 truncate">${task.title}</p>
                                <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${priorityInfo.color}">
                                    ${priorityInfo.text}
                                </span>
                            </div>
                            <p class="text-xs text-gray-500">${formatDateTime(new Date(task.startTime || task.datetime))}</p>
                        </div>
                        <div class="flex-shrink-0 flex items-center gap-1">
                            <div class="opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1">
                                <button onclick="event.stopPropagation(); changeTaskPriority('${task.id}', 'high')" 
                                        class="w-5 h-5 text-red-500 hover:bg-red-50 rounded flex items-center justify-center transition-colors" title="È´ò‰ºòÂÖàÁ∫ß">
                                    <i class="fa fa-flag text-xs"></i>
                                </button>
                                <button onclick="event.stopPropagation(); changeTaskPriority('${task.id}', 'medium')" 
                                        class="w-5 h-5 text-yellow-500 hover:bg-yellow-50 rounded flex items-center justify-center transition-colors" title="‰∏≠‰ºòÂÖàÁ∫ß">
                                    <i class="fa fa-flag text-xs"></i>
                                </button>
                                <button onclick="event.stopPropagation(); changeTaskPriority('${task.id}', 'low')" 
                                        class="w-5 h-5 text-blue-500 hover:bg-blue-50 rounded flex items-center justify-center transition-colors" title="‰Ωé‰ºòÂÖàÁ∫ß">
                                    <i class="fa fa-flag text-xs"></i>
                                </button>
                                <button onclick="event.stopPropagation(); deleteTask('${task.id}')" 
                                        class="w-5 h-5 text-red-500 hover:bg-red-50 rounded flex items-center justify-center transition-colors" title="Âà†Èô§‰ªªÂä°">
                                    <i class="fa fa-trash text-xs"></i>
                                </button>
                            </div>
                            <button onclick="event.stopPropagation(); toggleTaskComplete('${task.id}')" 
                                    class="w-6 h-6 bg-green-100 text-green-600 rounded-full flex items-center justify-center hover:bg-green-200 transition-colors">
                                <i class="fa fa-check text-xs"></i>
                            </button>
                        </div>
                    </div>
                `}).join('');
            }
        }
        
        // Êõ¥Êñ∞È°∂ÈÉ®Âø´ÈÄüÂæÖÂäûÂàóË°® - Âè™ÊòæÁ§∫Ê≤°ÊúâÊó∂Èó¥ÁöÑ‰ªªÂä°ÔºàÂæÖÂäûÊ∏ÖÂçïÔºâ
        function updateQuickTodoListTop() {
            const quickTodoListTop = document.getElementById('quick-todo-list-top');
            const quickTodoTop = document.getElementById('quick-todo-top');
            
            // Ëé∑ÂèñÂæÖÂäûÊ∏ÖÂçï‰∏≠ÁöÑÈ°πÁõÆÔºàËøô‰∫õÊòØÊ≤°ÊúâÊó∂Èó¥ÁöÑ‰ªªÂä°Ôºâ
            let todoList = Storage.get('todoList', []);
            
            // ÊåâÂàõÂª∫Êó∂Èó¥ÂíåÂÆåÊàêÁä∂ÊÄÅÊéíÂ∫èÔºöÊú™ÂÆåÊàêÁöÑÂú®ÂâçÔºåÂ∑≤ÂÆåÊàêÁöÑÂú®ÂêéÔºõÂêåÁä∂ÊÄÅÊåâÂàõÂª∫Êó∂Èó¥ÊéíÂ∫è
            todoList.sort((a, b) => {
                // ÂÖàÊåâÂÆåÊàêÁä∂ÊÄÅÊéíÂ∫è
                if (a.completed !== b.completed) {
                    return a.completed ? 1 : -1;
                }
                // ÂêåÁä∂ÊÄÅÊåâÂàõÂª∫Êó∂Èó¥ÊéíÂ∫è
                const aTime = new Date(a.createdAt || 0);
                const bTime = new Date(b.createdAt || 0);
                return aTime - bTime;
            });
            
            // Â¶ÇÊûúÊúâÂæÖÂäû‰∫ãÈ°πÔºåÊòæÁ§∫È°∂ÈÉ®Âø´ÈÄüÂæÖÂäûÔºåÂê¶ÂàôÈöêËóè
            if (todoList.length > 0 && quickTodoTop) {
                quickTodoTop.classList.remove('hidden');
                
                // ÁîüÊàêHTML
                quickTodoListTop.innerHTML = todoList.map(todo => {
                    return `
                    <div class="flex items-center gap-3 p-2 bg-white/80 rounded-lg border border-gray-100 hover:bg-white transition-all group ${todo.completed ? 'opacity-60' : ''}"
                         onclick="${todo.completed ? '' : `showTodoItemDetail(${JSON.stringify(todo).replace(/"/g, '&quot;')})`}">
                        <div class="flex-shrink-0">
                            <div class="w-5 h-5 rounded-full border-2 border-blue-400 cursor-pointer hover:scale-110 transition-transform flex items-center justify-center"
                                 onclick="event.stopPropagation(); toggleTodoComplete('${todo.id}')">
                                ${todo.completed ? '<i class="fa fa-check text-blue-600 text-xs"></i>' : ''}
                            </div>
                        </div>
                        <div class="flex-1 min-w-0">
                            <div class="flex items-center gap-2 mb-1">
                                <p class="text-xs font-medium text-gray-800 truncate ${todo.completed ? 'line-through' : ''}">${todo.title}</p>
                                <span class="inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-700">
                                    ÂæÖÂäû
                                </span>
                            </div>
                            <p class="text-xs text-gray-500">
                                ${todo.completed && todo.completedTime ? `ÂÆåÊàê‰∫é ${new Date(todo.completedTime).toLocaleDateString('zh-CN', { month: 'numeric', day: 'numeric', hour: '2-digit', minute: '2-digit' })}` : 'ÂæÖÂäû‰∫ãÈ°π'}
                            </p>
                        </div>
                        <div class="flex-shrink-0 flex items-center gap-1">
                            <button onclick="event.stopPropagation(); toggleTodoComplete('${todo.id}')" 
                                    class="w-5 h-5 bg-green-100 text-green-600 rounded-full flex items-center justify-center hover:bg-green-200 transition-colors">
                                <i class="fa fa-check text-xs"></i>
                            </button>
                            <button onclick="event.stopPropagation(); deleteTodoItem('${todo.id}')" 
                                    class="w-5 h-5 bg-red-100 text-red-600 rounded-full flex items-center justify-center hover:bg-red-200 transition-colors">
                                <i class="fa fa-trash text-xs"></i>
                            </button>
                        </div>
                    </div>
                `}).join('');
            } else if (quickTodoTop) {
                quickTodoTop.classList.add('hidden');
            }
        }
        
        function showTaskDetail(taskId) {
            // ÂÖàÂú®tasksÊï∞ÁªÑ‰∏≠Êü•Êâæ
            let task = tasks.find(t => t.id === taskId);
            let isFromTasks = !!task;
            
            // Â¶ÇÊûúÊ≤°ÊâæÂà∞ÔºåÂú®todoList‰∏≠Êü•Êâæ
            if (!task) {
                const todoList = Storage.get('todoList', []);
                task = todoList.find(t => t.id === taskId);
                isFromTasks = false; // ÊòéÁ°ÆÊ†áËÆ∞‰∏∫Êù•Ëá™ÂæÖÂäûÊ∏ÖÂçï
            }
            
            if (task) {
                // Â¶ÇÊûúÊòØÂæÖÂäû‰∫ãÈ°πÔºåÂàõÂª∫‰∏Ä‰∏™‰∏¥Êó∂ÁöÑ‰ªªÂä°ËØ¶ÊÉÖÊ®°ÊÄÅÊ°Ü
                if (!isFromTasks || task.isTodoItem || task.startTime === null) {
                    showTodoItemDetail(task);
                } else {
                    openTaskDetailModal(taskId);
                }
            }
        }
        
        function showTodoItemDetail(todoItem) {
            // ÂàõÂª∫ÁÆÄÂçïÁöÑÂæÖÂäû‰∫ãÈ°πËØ¶ÊÉÖÊòæÁ§∫
            const modalHtml = `
                <div id="todo-detail-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                    <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4">
                        <h3 class="text-lg font-semibold mb-4">ÂæÖÂäû‰∫ãÈ°πËØ¶ÊÉÖ</h3>
                        <div class="space-y-3">
                            <div>
                                <label class="text-sm text-gray-600">‰ªªÂä°ÂÜÖÂÆπ</label>
                                <p class="font-medium">${todoItem.title}</p>
                            </div>
                            <div>
                                <label class="text-sm text-gray-600">Áä∂ÊÄÅ</label>
                                <p class="font-medium">${todoItem.completed ? 'Â∑≤ÂÆåÊàê' : 'Êú™ÂÆåÊàê'}</p>
                            </div>
                            <div>
                                <label class="text-sm text-gray-600">ÂàõÂª∫Êó∂Èó¥</label>
                                <p class="font-medium">${new Date(todoItem.createdAt).toLocaleString('zh-CN')}</p>
                            </div>
                        </div>
                        <div class="mt-6 flex justify-end gap-3">
                            <button onclick="document.getElementById('todo-detail-modal').remove()" 
                                    class="px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors">
                                ÂÖ≥Èó≠
                            </button>
                            <button onclick="toggleTodoComplete('${todoItem.id}'); document.getElementById('todo-detail-modal').remove();" 
                                    class="px-4 py-2 ${todoItem.completed ? 'bg-orange-500 hover:bg-orange-600' : 'bg-green-500 hover:bg-green-600'} text-white rounded-lg transition-colors">
                                ${todoItem.completed ? 'Ê†áËÆ∞‰∏∫Êú™ÂÆåÊàê' : 'Ê†áËÆ∞‰∏∫ÂÆåÊàê'}
                            </button>
                        </div>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', modalHtml);
        }
        
        function formatDateTime(date) {
            const options = {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                hour12: false
            };
            return date.toLocaleString('zh-CN', options);
        }
        
        // Âú®È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÂàùÂßãÂåñÂ∫îÁî®
        document.addEventListener('DOMContentLoaded', function() {
            initApp();
            
            // ÂàùÂßãÂåñÊñ∞ÊâãÊïôÁ®ã
            initTutorial();
            
            // ÁªëÂÆöËÆæÁΩÆÂºπÁ™ó‰∫ã‰ª∂ÁõëÂê¨Âô®
            bindSettingsModalEvents();
            
            // ÂàùÂßãÂåñ‰ºòÂÖàÁ∫ßÂø´Êç∑ÈîÆ
            setupPriorityKeyboardShortcuts();
            
            // ÁõëÂê¨ËØ≠Ë®ÄÂàáÊç¢‰∫ã‰ª∂
            window.addEventListener('languageChanged', function(event) {
                const language = event.detail.language;
                console.log('Language changed to:', language);
                
                // Êõ¥Êñ∞ÊâÄÊúâÈúÄË¶ÅÂìçÂ∫îËØ≠Ë®ÄÂèòÂåñÁöÑÁªÑ‰ª∂
                updateComponentsAfterLanguageChange(language);
            });
            
            // Ê∑ªÂä†È°µÈù¢Âç∏ËΩΩÊó∂ÁöÑÊ∏ÖÁêÜÈÄªËæëÔºåÈò≤Ê≠¢ÂÜÖÂ≠òÊ≥ÑÊºè
            window.addEventListener('beforeunload', function() {
                // Ê∏ÖÁêÜÊâÄÊúâÊèêÈÜíÂÆöÊó∂Âô®
                Object.keys(reminderTimers).forEach(taskId => {
                    clearTimeout(reminderTimers[taskId]);
                });
                reminderTimers = {};
                
                // Ê∏ÖÁêÜÈò≤ÊäñÂÆöÊó∂Âô®
                if (window.debounceTimer) {
                    clearTimeout(window.debounceTimer);
                }
                
                // Ê∏ÖÁêÜÂÖ∂‰ªñÂèØËÉΩÁöÑÂÆöÊó∂Âô®
                if (window.autoSaveTimer) {
                    clearInterval(window.autoSaveTimer);
                }
            });
        });
        
        // ËØ≠Ë®ÄÂàáÊç¢ÂêéÊõ¥Êñ∞ÁªÑ‰ª∂
        function updateComponentsAfterLanguageChange(language) {
            // Êõ¥Êñ∞‰∏ªÈ°µÊ¨¢ËøéÊ∂àÊÅØÂíåÊøÄÂä±ËØ≠Âè•
            if (typeof updateWelcomeMessage === 'function') {
                updateWelcomeMessage();
            }
            
            // Êõ¥Êñ∞ÂõæË°®ÔºàÂ¶ÇÊûúÂ≠òÂú®Ôºâ
            if (typeof updateCharts === 'function') {
                setTimeout(() => {
                    updateCharts();
                }, 100);
            }
            
            // Êõ¥Êñ∞‰ªªÂä°ÁªüËÆ°
            if (typeof updateTaskStats === 'function') {
                updateTaskStats();
            }
            
            // Âº∫Âà∂Êõ¥Êñ∞ÁªüËÆ°ÂæΩÁ´†
            if (typeof forceUpdateStatsBadge === 'function') {
                forceUpdateStatsBadge();
            }
            
            // Êõ¥Êñ∞Êô∫ËÉΩÂª∫ËÆÆ
            if (typeof updateSmartSuggestions === 'function') {
                updateSmartSuggestions();
            }
            
            // Êõ¥Êñ∞Âø´ÈÄüÂæÖÂäûÂàóË°® - ‰ΩøÁî®Èò≤Êäñ‰ºòÂåñ
            if (typeof updateQuickTodoListTop === 'function') {
                debouncedUpdateQuickTodoListTop();
            }
            
            // Êõ¥Êñ∞Áå´Âí™Âä©ÊâãÔºàÂ¶ÇÊûúÂ≠òÂú®Ôºâ
            if (typeof updateCatAssistant === 'function') {
                updateCatAssistant();
            }
        }
        
        // ÁªëÂÆöËÆæÁΩÆÂºπÁ™ó‰∫ã‰ª∂ÁõëÂê¨Âô®
        function bindSettingsModalEvents() {
            // ËØ≠Ë®ÄÂàáÊç¢ÊåâÈíÆ‰∫ã‰ª∂
            const langZhBtn = document.getElementById('lang-zh-btn');
            if (langZhBtn) {
                langZhBtn.addEventListener('click', () => {
                    i18n.switchLanguage('zh');
                    updateLanguageButtons('zh');
                    showNotification('ËØ≠Ë®ÄÂ∑≤ÂàáÊç¢', 'ÁïåÈù¢ËØ≠Ë®ÄÂ∑≤ÂàáÊç¢‰∏∫‰∏≠Êñá', 'success');
                });
            }
            
            const langEnBtn = document.getElementById('lang-en-btn');
            if (langEnBtn) {
                langEnBtn.addEventListener('click', () => {
                    i18n.switchLanguage('en');
                    updateLanguageButtons('en');
                    showNotification('Language Changed', 'Interface language has been switched to English', 'success');
                });
            }
            
            // Êï∞ÊçÆÁÆ°ÁêÜÊåâÈíÆ‰∫ã‰ª∂ÁªëÂÆö
            const exportJsonBtn = document.getElementById('export-json-btn');
            if (exportJsonBtn) {
                exportJsonBtn.addEventListener('click', exportToJSON);
            }
            
            const exportCsvBtn = document.getElementById('export-csv-btn');
            if (exportCsvBtn) {
                exportCsvBtn.addEventListener('click', exportToCSV);
            }
            
            const backupDataBtn = document.getElementById('backup-data-btn');
            if (backupDataBtn) {
                backupDataBtn.addEventListener('click', backupData);
            }
            
            const restoreDataBtn = document.getElementById('restore-data-btn');
            if (restoreDataBtn) {
                restoreDataBtn.addEventListener('click', restoreData);
            }
            
            const restoreFileInput = document.getElementById('restore-file-input');
            if (restoreFileInput) {
                restoreFileInput.addEventListener('change', handleFileSelect);
            }
            
            // ‰øùÂ≠òËÆæÁΩÆÊåâÈíÆ
            const saveSettingsBtnModal = document.getElementById('save-settings-btn-modal');
            if (saveSettingsBtnModal) {
                saveSettingsBtnModal.addEventListener('click', saveSettingsFromModal);
            }
            
            // Ê∑ªÂä†ÁπÅÂøôÊó∂Èó¥ÊÆµÊåâÈíÆ
            const addBusyTimeBtnModal = document.getElementById('add-busy-time-btn-modal');
            if (addBusyTimeBtnModal) {
                addBusyTimeBtnModal.addEventListener('click', () => {
                    const busyTimeSlotsModal = document.getElementById('busy-time-slots-modal');
                    const busyTimeSlot = createBusyTimeSlotModal();
                    busyTimeSlotsModal.appendChild(busyTimeSlot);
                });
            }
            
            // ËØ∑Ê±ÇÈÄöÁü•ÊùÉÈôêÊåâÈíÆ
            const requestNotificationPermissionModal = document.getElementById('request-notification-permission-modal');
            if (requestNotificationPermissionModal) {
                requestNotificationPermissionModal.addEventListener('click', () => {
                    if ('Notification' in window) {
                        Notification.requestPermission().then(permission => {
                            updateNotificationStatusModal();
                            if (permission === 'granted') {
                                showNotification('ÈÄöÁü•ÊùÉÈôêÂ∑≤Êéà‰∫à', 'ÊÇ®Â∞ÜÊî∂Âà∞‰ªªÂä°ÊèêÈÜíÈÄöÁü•', 'success');
                            } else if (permission === 'denied') {
                                showNotification('ÈÄöÁü•ÊùÉÈôêË¢´ÊãíÁªù', 'ÊÇ®Â∞ÜÊó†Ê≥ïÊî∂Âà∞‰ªªÂä°ÊèêÈÜíÈÄöÁü•', 'warning');
                            }
                        });
                    } else {
                        showNotification('ÊµèËßàÂô®‰∏çÊîØÊåÅÈÄöÁü•', 'ËØ∑‰ΩøÁî®ÊîØÊåÅWeb Notification APIÁöÑÊµèËßàÂô®', 'error');
                    }
                });
            }
            
            // Âà†Èô§ÈÄæÊúü‰ªªÂä°ÊåâÈíÆ
            const deleteOverdueTasksBtnModal = document.getElementById('delete-overdue-tasks-btn-modal');
            if (deleteOverdueTasksBtnModal) {
                deleteOverdueTasksBtnModal.addEventListener('click', () => {
                    const now = new Date();
                    const overdueTasks = tasks.filter(task => {
                        return !task.completed && new Date(task.startTime) < now;
                    });
                    
                    if (overdueTasks.length === 0) {
                        showNotification('Ê≤°ÊúâÈÄæÊúü‰ªªÂä°', 'ÂΩìÂâçÊ≤°ÊúâÈúÄË¶ÅÂà†Èô§ÁöÑÈÄæÊúü‰ªªÂä°', 'info');
                        return;
                    }
                    
                    // ÂàõÂª∫Á°ÆËÆ§ÂØπËØùÊ°Ü
                    const confirmModal = document.createElement('div');
                    confirmModal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
                    confirmModal.innerHTML = `
                        <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4">
                            <h3 class="text-lg font-semibold mb-4">Á°ÆËÆ§Âà†Èô§ÈÄæÊúü‰ªªÂä°</h3>
                            <p class="text-gray-600 mb-6">ÊâæÂà∞ ${overdueTasks.length} ‰∏™ÈÄæÊúü‰ªªÂä°ÔºåÁ°ÆÂÆöË¶ÅÂà†Èô§ÂÆÉ‰ª¨ÂêóÔºüÊ≠§Êìç‰ΩúÊó†Ê≥ïÊí§ÈîÄ„ÄÇ</p>
                            <div class="flex justify-end gap-3">
                                <button onclick="this.closest('.fixed').remove()" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors">
                                    ÂèñÊ∂à
                                </button>
                                <button onclick="confirmDeleteOverdueTasks(${overdueTasks.length}); this.closest('.fixed').remove();" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors">
                                    Âà†Èô§ (${overdueTasks.length})
                                </button>
                            </div>
                        </div>
                    `;
                    document.body.appendChild(confirmModal);
                });
            }
            
            // Ê∏ÖÁêÜÂ∑≤ÂÆåÊàê‰ªªÂä°ÊåâÈíÆ
            const clearCompletedTasksBtnModal = document.getElementById('clear-completed-tasks-btn-modal');
            if (clearCompletedTasksBtnModal) {
                clearCompletedTasksBtnModal.addEventListener('click', () => {
                    const completedTasks = tasks.filter(task => task.completed);
                    
                    if (completedTasks.length === 0) {
                        showNotification('Ê≤°ÊúâÂ∑≤ÂÆåÊàê‰ªªÂä°', 'ÂΩìÂâçÊ≤°ÊúâÈúÄË¶ÅÊ∏ÖÁêÜÁöÑÂ∑≤ÂÆåÊàê‰ªªÂä°', 'info');
                        return;
                    }
                    
                    // ÂàõÂª∫Á°ÆËÆ§ÂØπËØùÊ°Ü
                    const confirmModal = document.createElement('div');
                    confirmModal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
                    confirmModal.innerHTML = `
                        <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4">
                            <h3 class="text-lg font-semibold mb-4">Á°ÆËÆ§Ê∏ÖÁêÜÂ∑≤ÂÆåÊàê‰ªªÂä°</h3>
                            <p class="text-gray-600 mb-6">ÊâæÂà∞ ${completedTasks.length} ‰∏™Â∑≤ÂÆåÊàê‰ªªÂä°ÔºåÁ°ÆÂÆöË¶ÅÊ∏ÖÁêÜÂÆÉ‰ª¨ÂêóÔºüÊ≠§Êìç‰ΩúÊó†Ê≥ïÊí§ÈîÄ„ÄÇ</p>
                            <div class="flex justify-end gap-3">
                                <button onclick="this.closest('.fixed').remove()" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors">
                                    ÂèñÊ∂à
                                </button>
                                <button onclick="confirmClearCompletedTasks(${completedTasks.length}); this.closest('.fixed').remove();" class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors">
                                    Ê∏ÖÁêÜ (${completedTasks.length})
                                </button>
                            </div>
                        </div>
                    `;
                    document.body.appendChild(confirmModal);
                });
            }
            
            // Áî®Êà∑ÂèçÈ¶àÂäüËÉΩÂ∑≤ÁßªÈô§
        }
        
        // Á°ÆËÆ§Âà†Èô§ÈÄæÊúü‰ªªÂä°
        function confirmDeleteOverdueTasks(count) {
            const now = new Date();
            const tasksToDelete = tasks.filter(task => {
                return !task.completed && new Date(task.startTime) < now;
            });
            
            tasksToDelete.forEach(task => {
                const index = tasks.findIndex(t => t.id === task.id);
                if (index > -1) {
                    tasks.splice(index, 1);
                }
            });
            
            saveTasks();
            renderTasks();
            updateTaskStats();
            debouncedUpdateQuickTodoListTop();
            showNotification('Âà†Èô§ÊàêÂäü', `Â∑≤Âà†Èô§ ${count} ‰∏™ÈÄæÊúü‰ªªÂä°`, 'success');
        }
        
        // Á°ÆËÆ§Ê∏ÖÁêÜÂ∑≤ÂÆåÊàê‰ªªÂä°
        function confirmClearCompletedTasks(count) {
            const completedTasks = tasks.filter(task => task.completed);
            
            completedTasks.forEach(task => {
                const index = tasks.findIndex(t => t.id === task.id);
                if (index > -1) {
                    tasks.splice(index, 1);
                }
            });
            
            saveTasks();
            renderTasks();
            updateTaskStats();
            debouncedUpdateQuickTodoListTop();
            showNotification('Ê∏ÖÁêÜÊàêÂäü', `Â∑≤Ê∏ÖÁêÜ ${count} ‰∏™Â∑≤ÂÆåÊàê‰ªªÂä°`, 'success');
        }
        

    </script>
    
    <script>
        // Áå´Âí™Âä©ÊâãËØ≠Ë®ÄÂàáÊç¢ÂäüËÉΩ
        function switchLanguageInCat(lang) {
            // ‰ΩøÁî®Áªü‰∏ÄÁöÑi18n.switchLanguageÊñπÊ≥ï
            if (i18n.switchLanguage(lang)) {
                // Êõ¥Êñ∞Áå´Âí™Âä©ÊâãÁöÑËØ≠Ë®ÄÊåâÈíÆÁä∂ÊÄÅ
                updateCatLanguageButtons(lang);
                
                // ÊòæÁ§∫ËØ≠Ë®ÄÂàáÊç¢ÊèêÁ§∫
                showCatMessage(lang === 'zh' ? 'ËØ≠Ë®ÄÂ∑≤ÂàáÊç¢‰∏∫‰∏≠Êñá' : 'Language switched to English', 'success');
            }
        }
        
        // Êõ¥Êñ∞Áå´Âí™Âä©ÊâãÁöÑËØ≠Ë®ÄÊåâÈíÆÁä∂ÊÄÅ
        function updateCatLanguageButtons(lang) {
            const zhBtn = document.getElementById('cat-lang-zh-btn');
            const enBtn = document.getElementById('cat-lang-en-btn');
            
            if (lang === 'zh') {
                zhBtn.classList.add('active');
                enBtn.classList.remove('active');
            } else {
                zhBtn.classList.remove('active');
                enBtn.classList.add('active');
            }
        }
        
        // Êõ¥Êñ∞Áå´Âí™Âä©ÊâãÁïåÈù¢ÊñáÊú¨
        function updateCatAssistantTexts() {
            if (typeof i18n === 'undefined' || !i18n.currentLanguage) {
                console.error('i18n is not available');
                return;
            }
            
            const texts = i18n.texts[i18n.currentLanguage];
            if (!texts) {
                console.error('Language texts not loaded for:', i18n.currentLanguage);
                return;
            }
            
            // Êõ¥Êñ∞Â§¥ÈÉ®‰ø°ÊÅØ
            const catName = document.querySelector('.cat-name');
            const catMoodText = document.getElementById('catMoodText');
            
            if (catName) catName.textContent = texts.catAssistant;
            if (catMoodText) catMoodText.textContent = texts.catMood.happy;
            
            // Êõ¥Êñ∞ÂàÜÊûêÈù¢ÊùøÊ†áÈ¢ò
            const analysisTitle = document.querySelector('.cat-analysis-section .section-title');
            if (analysisTitle) {
                analysisTitle.textContent = i18n.currentLanguage === 'zh' ? 'üìä Êô∫ËÉΩÂàÜÊûê' : 'üìä Smart Analysis';
            }
            
            // Êõ¥Êñ∞ÂàÜÊûêÊ†áÁ≠æ
            const analysisLabels = document.querySelectorAll('.analysis-label');
            if (analysisLabels.length >= 3) {
                analysisLabels[0].textContent = i18n.currentLanguage === 'zh' ? '‰ªäÊó•ÂÆåÊàê' : 'Today Completed';
                analysisLabels[1].textContent = i18n.currentLanguage === 'zh' ? 'ÂæÖÂäû‰ªªÂä°' : 'Pending Tasks';
                analysisLabels[2].textContent = i18n.currentLanguage === 'zh' ? 'ÂÆåÊàêÊïàÁéá' : 'Completion Rate';
            }
            
            // Êõ¥Êñ∞ÈºìÂä±Èù¢ÊùøÊ†áÈ¢ò
            const encouragementTitle = document.querySelector('.cat-encouragement-section .section-title');
            if (encouragementTitle) {
                encouragementTitle.textContent = i18n.currentLanguage === 'zh' ? 'üí™ Êô∫ËÉΩÈºìÂä±' : 'üí™ Smart Encouragement';
            }
            
            // Êõ¥Êñ∞Âª∫ËÆÆÈù¢ÊùøÊ†áÈ¢ò
            const suggestionsTitle = document.querySelector('.cat-suggestions-section .section-title');
            if (suggestionsTitle) {
                suggestionsTitle.textContent = i18n.currentLanguage === 'zh' ? 'üí° Êô∫ËÉΩÂª∫ËÆÆ' : 'üí° Smart Suggestions';
            }
            
            // Êõ¥Êñ∞‰∫íÂä®Âå∫ÂüüÊ†áÈ¢ò
            const interactionTitle = document.querySelector('.cat-interaction-section .section-title');
            if (interactionTitle) {
                interactionTitle.textContent = i18n.currentLanguage === 'zh' ? 'üéÆ ‰∫íÂä®' : 'üéÆ Interaction';
            }
            
            // Êõ¥Êñ∞Êë∏Êë∏ÊåâÈíÆÊñáÊú¨
            const petBtnText = document.querySelector('#petBtn .btn-text');
            if (petBtnText) {
                petBtnText.textContent = i18n.currentLanguage === 'zh' ? 'Êë∏Êë∏' : 'Pet';
            }
        }
        
        // Êõ¥Êñ∞Áå´Âí™Âä©ÊâãÂÜÖÂÆπ
        function updateCatAssistantContent() {
            // Êõ¥Êñ∞ÈºìÂä±‰ø°ÊÅØ
            updateCatEncouragement();
            
            // Êõ¥Êñ∞Êô∫ËÉΩÂª∫ËÆÆ
            updateCatSuggestions();
            
            // Êõ¥Êñ∞‰ªªÂä°ÁªüËÆ°
            updateCatTaskStats();
        }
        
        // Êõ¥Êñ∞Áå´Âí™ÈºìÂä±‰ø°ÊÅØ
        function updateCatEncouragement() {
            const encouragementMessage = document.getElementById('encouragementMessage');
            if (!encouragementMessage) return;
            
            const texts = i18n.texts[i18n.currentLanguage];
            const completedCount = tasks.filter(t => t.completed).length;
            const totalCount = tasks.length;
            
            let message = '';
            
            if (totalCount === 0) {
                message = texts.catEncouragement?.noTasks || 'Start your task management journey!';
            } else if (completedCount === totalCount && totalCount > 0) {
                message = texts.catEncouragement?.allCompleted || 'Amazing! All tasks completed!';
            } else if (completedCount > totalCount / 2) {
                message = texts.catEncouragement?.halfway || 'Keep going! Halfway there!';
            } else {
                message = texts.catEncouragement?.start || 'Keep trying, you can do it!';
            }
            
            encouragementMessage.textContent = message;
        }
        
        // Êõ¥Êñ∞Áå´Âí™Êô∫ËÉΩÂª∫ËÆÆ
        function updateCatSuggestions() {
            const suggestion1 = document.getElementById('suggestion1');
            const suggestion2 = document.getElementById('suggestion2');
            
            const texts = i18n.texts[i18n.currentLanguage];
            
            if (tasks.length === 0) {
                if (suggestion1) suggestion1.textContent = texts.catSuggestions?.noTasks1 || 'Add your first task to get started!';
                if (suggestion2) suggestion2.textContent = texts.catSuggestions?.noTasks2 || 'Use smart time recognition to add tasks quickly!';
            } else {
                if (suggestion1) suggestion1.textContent = texts.catSuggestions?.hasTasks1 || 'Manage your time wisely to improve efficiency!';
                if (suggestion2) suggestion2.textContent = texts.catSuggestions?.hasTasks2 || 'Remember to take breaks and maintain focus!';
            }
        }
        
        // Êõ¥Êñ∞Áå´Âí™‰ªªÂä°ÁªüËÆ°
        function updateCatTaskStats() {
            const todayCompleted = document.getElementById('todayCompleted');
            const remainingTasks = document.getElementById('remainingTasks');
            const completionRate = document.getElementById('completionRate');
            
            const completedCount = tasks.filter(t => t.completed).length;
            const totalCount = tasks.length;
            const rate = totalCount > 0 ? Math.round((completedCount / totalCount) * 100) : 0;
            
            if (todayCompleted) todayCompleted.textContent = completedCount;
            if (remainingTasks) remainingTasks.textContent = totalCount - completedCount;
            if (completionRate) completionRate.textContent = rate + '%';
        }
        
        // ÊòæÁ§∫Áå´Âí™Ê∂àÊÅØ
        function showCatMessage(message, type = 'info') {
            const catMessage = document.getElementById('catMessage');
            if (!catMessage) return;
            
            catMessage.textContent = message;
            catMessage.className = 'cat-message cat-message-' + type;
            catMessage.style.display = 'block';
            
            // 3ÁßíÂêéÈöêËóèÊ∂àÊÅØ
            setTimeout(() => {
                catMessage.style.display = 'none';
            }, 3000);
        }
        
        // ÂàùÂßãÂåñÁå´Âí™Âä©ÊâãËØ≠Ë®ÄÁä∂ÊÄÅ
        function initCatAssistantLanguage() {
            if (typeof i18n === 'undefined') {
                console.error('i18n is not defined');
                return;
            }
            
            const currentLang = i18n.currentLanguage;
            updateCatLanguageButtons(currentLang);
            updateCatAssistantTexts();
            updateCatAssistantContent();
        }
        
        // Âú®È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÂàùÂßãÂåñÁå´Âí™Âä©ÊâãËØ≠Ë®Ä
        document.addEventListener('DOMContentLoaded', function() {
            // Âª∂ËøüÂàùÂßãÂåñÔºåÁ°Æ‰øùÁå´Âí™Âä©ÊâãÊ®°ÂùóÂ∑≤Âä†ËΩΩ
            setTimeout(initCatAssistantLanguage, 100);
        });
    </script>
    
    <!-- Áã¨Á´ãÁå´Âí™Âä©ÊâãÊ®°Âùó -->
    <div class="cat-assistant-module" id="catAssistantModule">
        <!-- Áå´Âí™Âä©ÊâãÂÆπÂô® -->
        <div class="cat-assistant-container" id="catAssistantContainer">
            <!-- Áå´Âí™ÂàáÊç¢ÊåâÈíÆ -->
            <button class="cat-toggle-btn" id="catToggleBtn" onclick="toggleCatAssistant()">
                <span class="cat-icon">üê±</span>
            </button>
            
            <!-- Áå´Âí™Âä©ÊâãÈù¢Êùø -->
            <div class="cat-assistant-panel" id="catAssistantPanel">
                <!-- Áå´Âí™Â§¥ÈÉ®‰ø°ÊÅØ -->
                <div class="cat-header">
                    <div class="cat-avatar">
                        <div class="cat-emoji" id="catEmoji">üê±</div>
                        <div class="cat-mood-indicator" id="catMoodIndicator"></div>
                    </div>
                    <div class="cat-info">
                        <h3 class="cat-name" data-i18n="catAssistant">Êô∫ËÉΩÁå´Âí™Âä©Êâã</h3>
                        <div class="cat-mood-text" id="catMoodText" data-i18n="catMood.happy">ÂøÉÊÉÖÊÑâÂø´</div>
                        <div class="cat-happiness-bar">
                            <div class="cat-happiness-fill" id="catHappinessFill"></div>
                        </div>
                    </div>
                    <!-- ËØ≠Ë®ÄÂàáÊç¢ÊåâÈíÆ -->
                    <div class="cat-language-switch">
                        <button onclick="switchLanguageInCat('zh')" 
                                class="cat-lang-btn" 
                                id="cat-lang-zh-btn"
                                title="‰∏≠Êñá">
                            üá®üá≥
                        </button>
                        <button onclick="switchLanguageInCat('en')" 
                                class="cat-lang-btn" 
                                id="cat-lang-en-btn"
                                title="English">
                            üá∫üá∏
                        </button>
                    </div>
                </div>
                
                <!-- Êô∫ËÉΩÂàÜÊûêÈù¢Êùø -->
                <div class="cat-analysis-section" id="catAnalysisSection">
                    <h4 class="section-title" data-i18n="smartAnalysis">üìä Êô∫ËÉΩÂàÜÊûê</h4>
                    <div class="analysis-content" id="analysisContent">
                        <div class="analysis-item">
                            <span class="analysis-label" data-i18n="todayCompleted">‰ªäÊó•ÂÆåÊàê</span>
                            <span class="analysis-value" id="todayCompleted">0</span>
                        </div>
                        <div class="analysis-item">
                            <span class="analysis-label" data-i18n="pendingTasks">ÂæÖÂäû‰ªªÂä°</span>
                            <span class="analysis-value" id="remainingTasks">0</span>
                        </div>
                        <div class="analysis-item">
                            <span class="analysis-label" data-i18n="completionRate">ÂÆåÊàêÊïàÁéá</span>
                            <span class="analysis-value" id="completionRate">0%</span>
                        </div>
                    </div>
                </div>
                
                <!-- ÈºìÂä±‰ø°ÊÅØÈù¢Êùø -->
                <div class="cat-encouragement-section" id="catEncouragementSection">
                    <h4 class="section-title" data-i18n="smartEncouragement">üí™ Êô∫ËÉΩÈºìÂä±</h4>
                    <div class="encouragement-content" id="encouragementContent">
                        <div class="encouragement-message" id="encouragementMessage">
                            ÂºÄÂßã‰Ω†ÁöÑ‰ªªÂä°ÁÆ°ÁêÜ‰πãÊóÖÂêßÔºÅ
                        </div>
                    </div>
                </div>
                
                <!-- Êô∫ËÉΩÂª∫ËÆÆÈù¢Êùø -->
                <div class="cat-suggestions-section" id="catSuggestionsSection">
                    <h4 class="section-title" data-i18n="smartSuggestions">üí° Êô∫ËÉΩÂª∫ËÆÆ</h4>
                    <div class="suggestions-content" id="suggestionsContent">
                        <div class="suggestion-item" id="suggestion1">
                            Ê∑ªÂä†‰Ω†ÁöÑÁ¨¨‰∏Ä‰∏™‰ªªÂä°ÂºÄÂßãÂêßÔºÅ
                        </div>
                        <div class="suggestion-item" id="suggestion2">
                            ÂêàÁêÜÂÆâÊéíÊó∂Èó¥ÔºåÊèêÈ´òÊïàÁéáÂì¶ÔºÅ
                        </div>
                    </div>
                </div>
                
                <!-- ‰∫íÂä®Âå∫Âüü -->
                <div class="cat-interaction-section">
                    <h4 class="section-title">üéÆ ‰∫íÂä®</h4>
                    <div class="interaction-buttons">
                        <button class="interaction-btn pet-btn" id="petBtn" onclick="petCat()">
                            <span class="btn-icon">üëã</span>
                            <span class="btn-text">Êë∏Êë∏</span>
                            <span class="interaction-count" id="petCount">0</span>
                        </button>
                    </div>
                </div>
                
                <!-- Ê∂àÊÅØÊòæÁ§∫Âå∫Âüü -->
                <div class="cat-message-area" id="catMessageArea">
                    <div class="cat-message" id="catMessage"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Âàõ‰ΩúËÄÖ‰ø°ÊÅØ -->
    <div class="fixed bottom-4 left-4 z-20">
        <div class="creator-signature flex items-center space-x-2 text-xs text-gray-400 hover:text-gray-600 transition-colors cursor-default">
            <span class="opacity-70" data-i18n="createdWith">Created with</span>
            <span class="font-medium text-gray-500">‚ù§Ô∏è</span>
            <span class="font-medium text-gray-600">suducat</span>
        </div>
    </div>
</body>
</html>
